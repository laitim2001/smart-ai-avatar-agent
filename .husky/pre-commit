#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# ç´¢å¼•é©—è­‰ - ç¢ºä¿ PROJECT_INDEX.md èˆ‡å¯¦éš›æª”æ¡ˆç³»çµ±åŒæ­¥
echo "ğŸ” åŸ·è¡Œç´¢å¼•é©—è­‰..."

# åŸ·è¡Œé©—è­‰
npm run validate-index

# å¦‚æœé©—è­‰å¤±æ•—ï¼Œé˜»æ­¢ commit
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ ç´¢å¼•é©—è­‰å¤±æ•—ï¼"
  echo ""
  echo "ğŸ’¡ å»ºè­°æ“ä½œï¼š"
  echo "   1. åŸ·è¡Œ 'npm run sync-index -- --dry-run' æŸ¥çœ‹éœ€è¦æ›´æ–°çš„å…§å®¹"
  echo "   2. åŸ·è¡Œ 'npm run sync-index' è‡ªå‹•åŒæ­¥ç´¢å¼•"
  echo "   3. æª¢æŸ¥ä¸¦æäº¤æ›´æ–°å¾Œçš„ PROJECT_INDEX.md"
  echo "   4. é‡æ–°åŸ·è¡Œ git commit"
  echo ""
  exit 1
fi

echo "âœ… ç´¢å¼•é©—è­‰é€šéï¼"
echo ""
