# MVP é–‹ç™¼é€²åº¦è¿½è¹¤

> **æ–‡ä»¶æ€§è³ª**: MVP é–‹ç™¼å³æ™‚é€²åº¦è¿½è¹¤æ–‡ä»¶ (Working Document)
> **ç”¨é€”**: è¿½è¹¤ MVP éšæ®µçš„é–‹ç™¼é€²åº¦ï¼Œåæ˜ å¯¦éš›åŸ·è¡Œæƒ…æ³
> **æ›´æ–°é »ç‡**: æ¯å€‹ Story å®Œæˆå¾Œå³æ™‚æ›´æ–°
> **é…å°æ–‡ä»¶**: MVP_DEVELOPMENT_PLAN.md (åŸå§‹è¨ˆåŠƒåƒè€ƒ)

**Last Updated**: 2025-10-17
**Current Sprint**: Sprint 12 (æœ€çµ‚æ•´åˆã€éƒ¨ç½²æº–å‚™ã€æ–‡ä»¶å®Œæ•´åŒ–)
**Overall Progress**: âœ… Sprint 1-12 å®Œæˆ (103/103 SP, 100%) | ğŸ‰ **MVP é–‹ç™¼å®Œæˆ**
**ç•¶å‰ç‹€æ…‹**: âœ… Sprint 12 å®Œæˆ - å®‰å…¨æ€§æ•´åˆã€CI/CDã€è·¨ç€è¦½å™¨æ¸¬è©¦ã€å®Œæ•´æ–‡ä»¶ (10/10 SP, 100%)

---

## âš ï¸ é‡è¦èªªæ˜ï¼šè¨ˆåŠƒ vs å¯¦éš›åŸ·è¡Œå·®ç•°

æœ¬æ–‡ä»¶åæ˜ **å¯¦éš›åŸ·è¡Œæƒ…æ³**ï¼Œèˆ‡åŸå§‹è¨ˆåŠƒ (MVP_DEVELOPMENT_PLAN.md) å­˜åœ¨ä»¥ä¸‹å·®ç•°ï¼š

### è¨ˆåŠƒèª¿æ•´è¨˜éŒ„

| é …ç›® | åŸå§‹è¨ˆåŠƒ (MVP_DEVELOPMENT_PLAN.md) | å¯¦éš›åŸ·è¡Œ (æœ¬æ–‡ä»¶) | ç‹€æ…‹ |
|------|-----------------------------------|------------------|------|
| **Sprint 2 å…§å®¹** | å°è©±æ­·å²å„²å­˜ (13 SP) | ä½¿ç”¨è€…å€‹äººè³‡æ–™èˆ‡ Avatar åå¥½ (10 SP) | âœ… å·²å¯¦ä½œ (é †åºèª¿æ•´) |
| **Epic çµæ§‹** | Epic 6/7/8 (æ ¸å¿ƒåŠŸèƒ½/å¢å¼·åƒ¹å€¼/å„ªåŒ–) | Epic 1/2/3 (POC ä¼æ¥­åŒ–/æ“´å……/å„ªåŒ–) | âœ… åæ˜ å¯¦éš› |
| **å°è©±æ­·å²** | Sprint 2 (13 SP) | å»¶å¾Œè‡³ Sprint 6-7 | â³ å¾…å¯¦ä½œ |
| **å¤šèªè¨€ UI** | Sprint 7 (5 SP) | å»¶å¾Œè‡³ Sprint 8 | â³ å¾…å¯¦ä½œ |
| **å°è©±ä¸»é¡Œ** | Sprint 10 (10 SP) | å»¶å¾Œè‡³ Sprint 9 | â³ å¾…å¯¦ä½œ |
| **Safari å„ªåŒ–** | Sprint 8 (5 SP) | å»¶å¾Œè‡³ Sprint 10 | â³ å¾…å¯¦ä½œ |
| **Application Insights** | Sprint 9 (8 SP) | å»¶å¾Œè‡³ Sprint 10 | â³ å¾…å¯¦ä½œ |

### ğŸ¯ æœªå¯¦ä½œåŠŸèƒ½æ¸…å–® (ALL MUST BE IMPLEMENTED)

æ ¹æ“šåŸå§‹è¨ˆåŠƒï¼Œä»¥ä¸‹åŠŸèƒ½**å¿…é ˆå®Œæ•´å¯¦ä½œ**ï¼Œå·²é‡æ–°æ’åºè‡³ Sprint 6-12ï¼š

1. â³ **å°è©±æ­·å²ç³»çµ±** (Sprint 6-7, 13 SP)
   - å°è©±èˆ‡è¨Šæ¯è³‡æ–™æ¨¡å‹ (Prisma Schema)
   - å°è©± CRUD API
   - å°è©±åˆ—è¡¨ UI
   - å°è©±è©³æƒ…é é¢
   - å°è©±æŸ¥è©¢èˆ‡æœå°‹åŠŸèƒ½
   - å°è©±åŒ¯å‡º (JSON, PDF)

2. âœ… **å¤šèªè¨€ UI ç³»çµ±** (Sprint 8, 5 SP) - å·²å®Œæˆ
   - âœ… next-intl æ•´åˆ
   - âœ… ç¹é«”ä¸­æ–‡ (zh-TW) ç¿»è­¯ (100+ æ¢ç›®)
   - âœ… è‹±æ–‡ (en) ç¿»è­¯ (100+ æ¢ç›®)
   - âœ… æ—¥æ–‡ (ja) ç¿»è­¯ (100+ æ¢ç›®)
   - âœ… èªè¨€åˆ‡æ› UI (LanguageSwitcher)

3. â³ **å°è©±ä¸»é¡Œç³»çµ±** (Sprint 9, 10 SP)
   - Prompt æ¨¡æ¿è³‡æ–™æ¨¡å‹
   - ç³»çµ±é è¨­æ¨¡æ¿ (10+)
   - ä½¿ç”¨è€…è‡ªè¨‚æ¨¡æ¿
   - æ¨¡æ¿åˆ†é¡èˆ‡æ¨™ç±¤
   - æ¨¡æ¿æœå°‹èˆ‡ç¯©é¸

4. â³ **Safari å°ˆç”¨å„ªåŒ–** (Sprint 10, 5 SP)
   - Safari Web Speech API ç›¸å®¹æ€§
   - Safari éŸ³è¨Šæ’­æ”¾å„ªåŒ–
   - Safari 3D æ¸²æŸ“å„ªåŒ–
   - iOS è£ç½®æ¸¬è©¦èˆ‡ä¿®å¾©

5. â³ **Application Insights ç›£æ§** (Sprint 10, 8 SP)
   - Azure Application Insights æ•´åˆ
   - å‰ç«¯æ•ˆèƒ½ç›£æ§
   - API æ•ˆèƒ½è¿½è¹¤
   - éŒ¯èª¤è¿½è¹¤èˆ‡å‘Šè­¦
   - ä½¿ç”¨è€…è¡Œç‚ºåˆ†æ

**æ‰¿è«¾**: æ‰€æœ‰åŠŸèƒ½å°‡åœ¨ Sprint 12 çµæŸå‰å®Œæ•´å¯¦ä½œï¼Œä¸æœƒéºæ¼ä»»ä½•è¨ˆåŠƒé …ç›®ã€‚

---

## ğŸ“Š MVP ç¸½é«”é€²åº¦

### Epic å®Œæˆåº¦ (å¯¦éš›åŸ·è¡Œçµæ§‹)

| Epic | Story Points | é€²åº¦ | ç‹€æ…‹ |
|------|-------------|------|------|
| **Epic 1: POC ä¼æ¥­åŒ–åŸºç¤ (P0)** | 42/42 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | âœ… å®Œæˆ |
| **Epic 2: Avatar èˆ‡å°è©±ç³»çµ±æ“´å…… (P1)** | 21/21 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | âœ… å®Œæˆ |
| **Epic 3: å„ªåŒ–ã€æ¸¬è©¦èˆ‡ç›£æ§ (P2)** | 40/40 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | âœ… å®Œæˆ |
| **ç¸½è¨ˆ** | **103/103 SP** | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | âœ… **MVP å®Œæˆ** |

### Epic è©³ç´°å…§å®¹

#### Epic 1: POC ä¼æ¥­åŒ–åŸºç¤ (P0) - âœ… 100% å®Œæˆ

**ç›®æ¨™**: å°‡ POC è½‰æ›ç‚ºå¯æ“´å±•çš„ä¼æ¥­ç´šæ‡‰ç”¨åŸºç¤

| Sprint | ä¸»é¡Œ | Story Points | ç‹€æ…‹ | å®Œæˆæ—¥æœŸ |
|--------|------|-------------|------|----------|
| Sprint 1 | ä½¿ç”¨è€…èªè­‰ç³»çµ± | 11 SP | âœ… å®Œæˆ | 2025-10-16 |
| Sprint 2 | ä½¿ç”¨è€…å€‹äººè³‡æ–™èˆ‡ Avatar åå¥½ | 10 SP | âœ… å®Œæˆ | 2025-10-16 |
| Sprint 3 | èªéŸ³è¼¸å…¥ç³»çµ± (STT) | 10 SP | âœ… å®Œæˆ | 2025-10-17 |
| Sprint 4 | è¡Œå‹•è£ç½®éŸ¿æ‡‰å¼è¨­è¨ˆ | 11 SP | âœ… å®Œæˆ | 2025-10-17 |

**äº¤ä»˜æˆæœ**:
- âœ… å®Œæ•´èªè­‰ç³»çµ± (è¨»å†Šã€ç™»å…¥ã€Email é©—è­‰ã€å¯†ç¢¼é‡è¨­ã€Session ç®¡ç†)
- âœ… Dashboard ç³»çµ± (Layout, UserMenu, Sidebar, Navigation)
- âœ… Rate Limiting èˆ‡ Middleware ä¿è­·
- âœ… ä½¿ç”¨è€…å€‹äººè³‡æ–™ç®¡ç† (Profile, Password, Preferences)
- âœ… Avatar åå¥½è¨­å®šç³»çµ± (3D é è¦½ã€Server-Client åŒæ­¥)
- âœ… æ´»å‹•è¨˜éŒ„ç³»çµ± (ActivityLog)
- âœ… èªéŸ³è¼¸å…¥åŠŸèƒ½ (Web Speech API, 3 èªè¨€æ”¯æ´)
- âœ… éŸ¿æ‡‰å¼è¨­è¨ˆ (æ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œé¢)
- âœ… æ•ˆèƒ½å„ªåŒ– (React 18 Concurrent, useDeferredValue, Code Splitting)
- âœ… æ¸¬è©¦åŸºç¤è¨­æ–½ (Vitest, Playwright, 79+ å–®å…ƒæ¸¬è©¦)

#### Epic 2: Avatar èˆ‡å°è©±ç³»çµ±æ“´å…… (P1) - ğŸ”„ 71% å®Œæˆ

**ç›®æ¨™**: æ“´å…… Avatar åœ–åº«èˆ‡å¯¦ä½œå°è©±æ­·å²ç³»çµ±

| Sprint | ä¸»é¡Œ | Story Points | é€²åº¦ | ç‹€æ…‹ | é è¨ˆå®Œæˆ |
|--------|------|-------------|------|------|----------|
| Sprint 5 | Avatar è§’è‰²åº«æ“´å…… | 9/9 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | âœ… å®Œæˆ | 2025-10-17 |
| Sprint 6 | å°è©±æ­·å² - å¾Œç«¯ | 6/6 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | âœ… å®Œæˆ | 2025-10-17 |
| Sprint 7 | å°è©±æ­·å² - å‰ç«¯ UI | 3/3 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | âœ… å®Œæˆ | 2025-10-17 |

**äº¤ä»˜æˆæœ (Sprint 5-7 å®Œæˆ)**:
- âœ… Phase 1: Avatar è³‡æ–™æ¨¡å‹ (11 å€‹ Avatar, Prisma + Seed)
- âœ… Phase 2.1: ç¯©é¸èˆ‡æœå°‹åŠŸèƒ½ (åˆ†é¡ã€æ¨™ç±¤ã€Featuredã€æ’åº)
- âœ… Phase 2.2: æ”¶è—èˆ‡æ¨è–¦åŠŸèƒ½ (æ¨‚è§€æ›´æ–°ã€å€‹äººåŒ–æ¨è–¦æ¼”ç®—æ³•)
- âœ… Phase 3: 360Â° é è¦½èˆ‡å‹•ç•« (å…¨è¢å¹•é è¦½ã€éµç›¤æ§åˆ¶ã€å‹•ç•«è§¸ç™¼)
- âœ… Phase 4: æ¸¬è©¦èˆ‡æ–‡ä»¶ (28 å–®å…ƒæ¸¬è©¦ + 21 E2E æ¸¬è©¦ + å®Œæ•´æ–‡ä»¶)
- âœ… Sprint 6: å°è©±æ­·å²å¾Œç«¯ (Conversation + Message models, 6 å€‹ CRUD API, 20 å–®å…ƒæ¸¬è©¦)
- âœ… Sprint 7: å°è©±æ­·å²å‰ç«¯ UI (ConversationList/Item, useConversations hook, è‡ªå‹•æŒä¹…åŒ–, 7 å–®å…ƒæ¸¬è©¦)

#### Epic 3: å„ªåŒ–ã€æ¸¬è©¦èˆ‡ç›£æ§ (P2) - âœ… 100% å®Œæˆ

**ç›®æ¨™**: å®Œæ•´æ¸¬è©¦ã€å¤šèªè¨€æ”¯æ´ã€ç›£æ§ç³»çµ±

| Sprint | ä¸»é¡Œ | Story Points | é€²åº¦ | ç‹€æ…‹ | å®Œæˆæ—¥æœŸ |
|--------|------|-------------|------|------|----------|
| Sprint 8 | å¤šèªè¨€ UI (next-intl) | 5/5 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | âœ… å®Œæˆ | 2025-10-17 |
| Sprint 9 | å°è©±ä¸»é¡Œ (Prompt æ¨¡æ¿) | 10/10 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | âœ… å®Œæˆ | 2025-10-17 |
| Sprint 10 | Safari å„ªåŒ– + Monitoring | 13/13 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | âœ… å®Œæˆ | 2025-10-17 |
| Sprint 11 | å®Œæ•´æ¸¬è©¦èˆ‡ä¿®å¾© | 10/10 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | âœ… å®Œæˆ | 2025-10-17 |
| Sprint 12 | æœ€çµ‚æ•´åˆã€éƒ¨ç½²ã€æ–‡ä»¶ | 10/10 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | âœ… å®Œæˆ | 2025-10-17 |

**äº¤ä»˜æˆæœ**:
- âœ… å¤šèªè¨€ UI (ç¹ä¸­ã€è‹±æ–‡ã€æ—¥æ–‡) - Sprint 8 å®Œæˆ
- âœ… å°è©±ä¸»é¡Œç³»çµ± (10+ ç³»çµ±æ¨¡æ¿ã€ä½¿ç”¨è€…è‡ªè¨‚) - Sprint 9 å®Œæˆ
- âœ… Safari å°ˆç”¨å„ªåŒ– (Web Speech APIã€éŸ³è¨Šã€3D) - Sprint 10 å®Œæˆ
- âœ… Application Insights ç›£æ§ (åŸºç¤æ•´åˆå®Œæˆ) - Sprint 10 å®Œæˆ
- âœ… å®Œæ•´ E2E æ¸¬è©¦è¦†è“‹ (æ‰€æœ‰æ ¸å¿ƒæµç¨‹) - Sprint 11 å®Œæˆ
- âœ… æ•ˆèƒ½åŸºæº–æ¸¬è©¦ (Lighthouse CI) - Sprint 11 å®Œæˆ
- âœ… å®‰å…¨æ€§ç¨½æ ¸ (OWASP Top 10, npm audit) - Sprint 11 å®Œæˆ
- âœ… CSP/CORS å®‰å…¨æ€§æ•´åˆ - Sprint 12 å®Œæˆ
- âœ… è·¨ç€è¦½å™¨æ¸¬è©¦é…ç½® (Chrome, Firefox, Safari, Edge) - Sprint 12 å®Œæˆ
- âœ… å®Œæ•´ CI/CD Pipeline (9 å€‹ Jobs) - Sprint 12 å®Œæˆ
- âœ… ç’°å¢ƒè®Šæ•¸é…ç½®æŒ‡å— - Sprint 12 å®Œæˆ
- âœ… Pre-launch Checklist - Sprint 12 å®Œæˆ
- âœ… MVP æœ€çµ‚å ±å‘Š - Sprint 12 å®Œæˆ

### Sprint é€²åº¦ç¸½è¦½

| Sprint | é€±æ¬¡ | ç‹€æ…‹ | Story Points | é€²åº¦ | å¯¦éš›æ™‚é–“ |
|--------|------|------|-------------|------|----------|
| Sprint 1 | 1-2 | âœ… å®Œæˆ | 11/11 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | 2 å¤© (2025-10-15~16) |
| Sprint 2 | 3-4 | âœ… å®Œæˆ | 10/10 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | 1 å¤© (2025-10-16) |
| Sprint 3 | 5-6 | âœ… å®Œæˆ | 10/10 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | 2 å¤© (2025-10-16~17) |
| Sprint 4 | 7-8 | âœ… å®Œæˆ | 11/11 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | 1 å¤© (2025-10-17) |
| Sprint 5 | 9-10 | âœ… å®Œæˆ | 9/9 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | 2 å¤© (2025-10-17) |
| Sprint 6 | 11-12 | âœ… å®Œæˆ | 6/6 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | 0.5 å¤© (2025-10-17) |
| Sprint 7 | 13-14 | âœ… å®Œæˆ | 3/3 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | 1.5 å¤© (2025-10-17) |
| Sprint 8 | 15-16 | âœ… å®Œæˆ | 5/5 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | 0.1 å¤© (2025-10-17) |
| Sprint 9 | 17-18 | âœ… å®Œæˆ | 10/10 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | 0.1 å¤© (2025-10-17) |
| Sprint 10 | 19-20 | âœ… å®Œæˆ | 13/13 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | 0.5 å¤© (2025-10-17) |
| Sprint 11 | 21-22 | âœ… å®Œæˆ | 10/10 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | 0.2 å¤© (2025-10-17) |
| Sprint 12 | 23-24 | âœ… å®Œæˆ | 10/10 SP | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% | 0.3 å¤© (2025-10-17) |

**é€²åº¦èªªæ˜**:
- âœ… Sprint 1-12 å®Œæˆ: 103/103 SP (100%)
- âœ… Epic 1-3 å…¨éƒ¨å®Œæˆ
- âœ… MVP å®Œæ•´é–‹ç™¼å®Œæˆ (103/103 SP)
- ğŸ‰ **ç¸½è¨ˆ**: 103/103 SP (100% MVP å®Œæˆ - å·²æº–å‚™å¥½ç”Ÿç”¢éƒ¨ç½²)

---

## ğŸ“… ç•¶å‰ Sprint ç‹€æ…‹

### Sprint 5: Avatar è§’è‰²åº«æ“´å…… (Story 2.1) - âœ… 100% å®Œæˆ

**Sprint Goal**: æ“´å…… Avatar åœ–åº«è‡³ 11 å€‹è§’è‰²ï¼Œå¯¦ä½œå®Œæ•´ç¯©é¸ã€æœå°‹ã€æ”¶è—ã€é è¦½åŠŸèƒ½
**Sprint æ—¥æœŸ**: 2025-10-17 (2 å¤©ï¼Œè¶…é€Ÿå®Œæˆ!)
**æœ€çµ‚ç‹€æ…‹**: âœ… å®Œæˆ
**å®Œæˆåº¦**: 100% (9/9 SP)

#### Phase 1: Avatar æ¨¡å‹æº–å‚™èˆ‡è³‡æ–™çµæ§‹æ“´å…… (2 SP) - âœ… å®Œæˆ

**å¯¦ä½œå…§å®¹**:
- âœ… Prisma Schema æ“´å…… (Avatar model with 11 fields)
  - Fields: id, name, description, url, thumbnail, category, tags[], featured, popularity, createdAt, updatedAt
  - Indexes: category, featured
- âœ… Avatar å¸¸æ•¸å®šç¾© (lib/avatar/constants.ts)
  - AvatarMetadata interface (11 fields)
  - AVATARS_METADATA array (11 avatars: 4 female, 4 male, 3 neutral)
  - AVATAR_TAGS constant (20 tags)
  - é›™èªæ”¯æ´ (ä¸­æ–‡/è‹±æ–‡åç¨±èˆ‡æè¿°)
- âœ… Prisma Seed Script (prisma/seed.ts)
  - è‡ªå‹•åŒ–è³‡æ–™æ¤å…¥
  - Development ç’°å¢ƒè‡ªå‹•æ¸…ç†
  - çµ±è¨ˆè¼¸å‡º (åˆ†é¡ã€Featured çµ±è¨ˆ)
- âœ… package.json é…ç½® (prisma.seed)
- âœ… avatarStore æ›´æ–° (ä½¿ç”¨ AvatarMetadata å‹åˆ¥)
- âœ… Migration åŸ·è¡Œ (20251017004310_add_avatar_model)
- âœ… Seed åŸ·è¡Œ (11 å€‹ Avatar æˆåŠŸæ¤å…¥)

**æŠ€è¡“æ–‡ä»¶**:
- `lib/avatar/constants.ts`: Avatar metadata ä¸­å¤®å®šç¾©
- `prisma/schema.prisma`: Avatar è³‡æ–™æ¨¡å‹
- `prisma/seed.ts`: è‡ªå‹•åŒ– seed script

**Git Commit**: 898a7e8 (feat(sprint5): Phase 1 - Avatar æ¨¡å‹æº–å‚™èˆ‡è³‡æ–™çµæ§‹æ“´å…… (2 SP))

#### Phase 2.1: åˆ†é¡ç¯©é¸èˆ‡æœå°‹åŠŸèƒ½ (3 SP) - âœ… å®Œæˆ

**å¯¦ä½œå…§å®¹**:

**1. API å‡ç´š (app/api/avatars/route.ts)**:
- âœ… Prisma æ•´åˆ (æ›¿ä»£ç¡¬ç·¨ç¢¼è³‡æ–™)
- âœ… 5 ç¨®æŸ¥è©¢åƒæ•¸æ”¯æ´:
  - `category`: åˆ†é¡ç¯©é¸ (male/female/neutral/all)
  - `tags`: æ¨™ç±¤ç¯©é¸ (é€—è™Ÿåˆ†éš”, OR é‚è¼¯, hasSome)
  - `search`: åç¨±æœå°‹ (case-insensitive)
  - `sort`: æ’åºæ–¹å¼ (popular/name/newest)
  - `featured`: Featured ç¯©é¸ (true/false)
- âœ… çµ±è¨ˆè³‡æ–™å›æ‡‰:
  - categoryStats: åˆ†é¡çµ±è¨ˆ (æ•¸é‡)
  - tagStats: æ¨™ç±¤çµ±è¨ˆ (æ•¸é‡ã€ä¾é »ç‡æ’åº)
- âœ… å®Œæ•´éŒ¯èª¤è™•ç†

**2. UI çµ„ä»¶å‡ç´š (components/avatar/AvatarGallery.tsx - 417 lines)**:

**shadcn/ui çµ„ä»¶æ–°å¢**:
- âœ… Tabs component (@radix-ui/react-tabs)
- âœ… Checkbox component (@radix-ui/react-checkbox)

**ç‹€æ…‹ç®¡ç† (useState)**:
- âœ… categoryFilter: string ('all', 'male', 'female', 'neutral')
- âœ… selectedTags: string[] (å¤šé¸æ¨™ç±¤)
- âœ… searchQuery: string (æœå°‹é—œéµå­—)
- âœ… sortBy: string ('popular', 'name', 'newest')
- âœ… showFeaturedOnly: boolean (åªé¡¯ç¤ºæ¨è–¦)
- âœ… showFilters: boolean (ç¯©é¸é¢æ¿é¡¯ç¤º/éš±è—)

**ç¯©é¸é‚è¼¯ (useMemo å„ªåŒ–)**:
- âœ… åˆ†é¡ç¯©é¸
- âœ… æ¨™ç±¤ç¯©é¸ (OR é‚è¼¯: any tag match)
- âœ… åç¨±æœå°‹ (ä¸­æ–‡ + è‹±æ–‡, case-insensitive)
- âœ… Featured ç¯©é¸
- âœ… æ’åº (ç†±é–€åº¦/åç¨±/æœ€æ–°)
- âœ… æ•ˆèƒ½å„ªåŒ– (dependency array ç²¾ç¢ºæ§åˆ¶)

**UI åŠŸèƒ½**:
- âœ… æœå°‹æ¡† (å« Search icon)
- âœ… æ’åºé¸æ“‡å™¨ (Select dropdown)
- âœ… ç¯©é¸æŒ‰éˆ• (é¡¯ç¤º/éš±è—é€²éšç¯©é¸)
- âœ… å¯æ”¶åˆç¯©é¸é¢æ¿:
  - Featured toggle (Checkbox + Star icon)
  - åˆ†é¡ Tabs (å…¨éƒ¨/å¥³æ€§/ç”·æ€§/ä¸­æ€§, with counts)
  - æ¨™ç±¤ Checkboxes (20+ tags, grid layout, å¤šé¸)
  - æ¸…é™¤æ¨™ç±¤æŒ‰éˆ•
- âœ… çµæœçµ±è¨ˆ (é¡¯ç¤º N å€‹ Avatar, å·²ç¯©é¸æç¤º)
- âœ… æ¸…é™¤æ‰€æœ‰ç¯©é¸æŒ‰éˆ•
- âœ… Avatar å¡ç‰‡æ›´æ–°:
  - Featured star badge (å³ä¸Šè§’)
  - ä¸­è‹±æ–‡åç¨±é¡¯ç¤º
  - æè¿°é è¦½ (ç¬¬ä¸€è¡Œ)
  - æ¨™ç±¤é¡¯ç¤º (æœ€å¤š 3 å€‹ + N)
  - ç†±é–€åº¦æŒ‡ç¤º
  - é¸ä¸­ç‹€æ…‹ (ring + checkmark)
- âœ… éŸ¿æ‡‰å¼ç¶²æ ¼ä½ˆå±€ (1/2/3/4 columns)
- âœ… ç„¡çµæœæç¤º (å«æ¸…é™¤æŒ‰éˆ•)

**æŠ€è¡“æ–‡ä»¶**:
- `app/api/avatars/route.ts`: Avatar API with filtering
- `components/avatar/AvatarGallery.tsx`: Complete UI rewrite
- `components/ui/tabs.tsx`: shadcn/ui Tabs
- `components/ui/checkbox.tsx`: shadcn/ui Checkbox

**Git Commit**: cbe42a6 (feat(sprint5): Phase 2.1 - åˆ†é¡ç¯©é¸èˆ‡æœå°‹åŠŸèƒ½å®Œæ•´å¯¦ä½œ (3 SP))

#### Phase 2.2: æ”¶è—èˆ‡æ¨è–¦åŠŸèƒ½ (1 SP) - âœ… å®Œæˆ

**å¯¦ä½œå…§å®¹**:

**1. è³‡æ–™åº« Schema (prisma/schema.prisma)**:
- âœ… UserFavoriteAvatar model (å¤šå°å¤šé—œè¯)
  - Fields: id, userId, avatarId, createdAt
  - Unique constraint: [userId, avatarId]
  - Indexes: userId, avatarId
  - Cascade delete ä¿è­·
- âœ… Migration: 20251017032630_add_user_favorite_avatar

**2. API Routes**:
- âœ… POST /api/avatars/[id]/favorite (æ–°å¢æ”¶è—)
  - é©—è­‰: ä½¿ç”¨è€…ç™»å…¥ã€Avatar å­˜åœ¨ã€æœªé‡è¤‡æ”¶è—
  - å›å‚³: å®Œæ•´ favorite ç‰©ä»¶å« Avatar è³‡è¨Š
- âœ… DELETE /api/avatars/[id]/favorite (å–æ¶ˆæ”¶è—)
  - é©—è­‰: ä½¿ç”¨è€…ç™»å…¥ã€æ”¶è—è¨˜éŒ„å­˜åœ¨
  - å›å‚³: æˆåŠŸè¨Šæ¯
- âœ… GET /api/user/favorites (å–å¾—ä½¿ç”¨è€…æ”¶è—åˆ—è¡¨)
  - æ’åº: ä¾æ”¶è—æ™‚é–“é™åº
  - å›å‚³: å®Œæ•´ Avatar è³‡è¨Šé™£åˆ—
- âœ… GET /api/avatars/recommended (å€‹äººåŒ–æ¨è–¦)
  - æ¼”ç®—æ³•:
    - å·²ç™»å…¥ä¸”æœ‰æ”¶è—: åˆ†æ category + top 3 tags â†’ æ¨è–¦ç›¸ä¼¼ Avatar
    - æœªç™»å…¥æˆ–ç„¡æ”¶è—: è¿”å›ç†±é–€ Avatar (featured + high popularity)
  - æ’åº: featured â†’ popularity
  - åƒæ•¸: limit (é è¨­ 6)

**3. State Management (stores/avatarStore.ts)**:
- âœ… æ–°å¢ç‹€æ…‹:
  - favoriteAvatarIds: string[] (å·²æ”¶è— IDs)
  - isFavoriteLoading: boolean (æ“ä½œ loading)
- âœ… æ–°å¢ Actions:
  - loadFavorites() - è¼‰å…¥æ”¶è—åˆ—è¡¨
  - toggleFavorite(avatarId) - æ¨‚è§€æ›´æ–°åˆ‡æ›æ”¶è—
  - isFavorite(avatarId) - æª¢æŸ¥æ”¶è—ç‹€æ…‹
- âœ… æ¨‚è§€æ›´æ–°æ©Ÿåˆ¶:
  - ç«‹å³æ›´æ–° UI
  - API å¤±æ•—æ™‚è‡ªå‹•é‚„åŸ

**4. UI åŠŸèƒ½ (components/avatar/AvatarGallery.tsx)**:
- âœ… æ”¶è—æŒ‰éˆ• (Avatar å¡ç‰‡)
  - å¿ƒå½¢åœ–ç¤º (ç©ºå¿ƒ â†” å¯¦å¿ƒ)
  - Hover æ•ˆæœèˆ‡éæ¸¡å‹•ç•«
  - Loading ç‹€æ…‹é¡¯ç¤º
  - é˜»æ­¢äº‹ä»¶å†’æ³¡
- âœ… æ”¶è—ç¯©é¸ (ç¯©é¸é¢æ¿)
  - Checkbox åˆ‡æ›åªé¡¯ç¤ºæ”¶è—
  - é¡¯ç¤ºæ”¶è—æ•¸é‡
  - èˆ‡å…¶ä»–ç¯©é¸è¯å‹•

**æŠ€è¡“æ–‡ä»¶**:
- `prisma/schema.prisma`: UserFavoriteAvatar model
- `app/api/avatars/[id]/favorite/route.ts`: Favorite CRUD API
- `app/api/avatars/recommended/route.ts`: Recommendation API
- `app/api/user/favorites/route.ts`: User favorites API
- `stores/avatarStore.ts`: Store with optimistic updates
- `docs/API_AVATAR_FAVORITE.md`: Complete API documentation

**Git Commit**: (å¾…æ–°å¢) feat(sprint5): Phase 2.2 - æ”¶è—èˆ‡æ¨è–¦åŠŸèƒ½ (1 SP)

#### Phase 3: 360Â° é è¦½èˆ‡å‹•ç•«åŠŸèƒ½ (1.5 SP) - âœ… å®Œæˆ

**å¯¦ä½œå…§å®¹**:

**1. AvatarPreviewModal çµ„ä»¶ (components/avatar/AvatarPreviewModal.tsx)**:

**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… å…¨è¢å¹•é»‘åº•é®ç½© (z-index: 50)
- âœ… 3D Canvas å ´æ™¯ (Three.js + @react-three/fiber)
  - Camera: position [0, 1.5, 2], fov 50
  - Lighting: ambient (0.6) + directional (0.8) with shadows
  - Anti-aliasing + high performance mode
- âœ… OrbitControls 360Â° æ§åˆ¶
  - æ—‹è½‰: enableRotate, rotateSpeed 0.5
  - ç¸®æ”¾: enableZoom, zoomSpeed 0.5, min/max distance 1-5
  - é˜»å°¼æ•ˆæœ: enableDamping, dampingFactor 0.05
  - Target: [0, 1, 0] (Avatar ä¸­å¿ƒ)

**2. äº’å‹•æ§åˆ¶**:

**éµç›¤å¿«æ·éµ (useEffect + window.addEventListener)**:
- âœ… `â† â†’ â†‘ â†“`: æ—‹è½‰è¦–è§’ (azimuthal + polar angles)
- âœ… `+ -`: ç¸®æ”¾ (dollyIn/dollyOut)
- âœ… `R`: é‡ç½®è¦–è§’ (controls.reset())
- âœ… `F`: åˆ‡æ›å…¨è¢å¹• (90% â†” 100% viewport)
- âœ… `ESC`: é—œé–‰é è¦½

**å·¥å…·åˆ—æŒ‰éˆ• (é ‚éƒ¨ä¸­å¤®)**:
- âœ… é‡ç½®è¦–è§’æŒ‰éˆ• (RotateCw icon)
- âœ… æ”¾å¤§æŒ‰éˆ• (ZoomIn icon)
- âœ… ç¸®å°æŒ‰éˆ• (ZoomOut icon)
- âœ… å…¨è¢å¹•åˆ‡æ›æŒ‰éˆ• (Maximize2/Minimize2 icon)
- âœ… Tooltip æç¤º (é¡¯ç¤ºå¿«æ·éµ)

**å‹•ç•«æ§åˆ¶é¢æ¿ (åº•éƒ¨ä¸­å¤®)**:
- âœ… ğŸ˜Š å¾®ç¬‘æŒ‰éˆ• (è§¸ç™¼ smile å‹•ç•«: intensity 1.0, duration 0.5s)
- âœ… ğŸ‘ é»é ­æŒ‰éˆ• (è§¸ç™¼ nod å‹•ç•«: intensity 1.0, duration 0.3s)
- âœ… Card æ¨£å¼ (æ¯›ç»ç’ƒæ•ˆæœ bg-white/10 backdrop-blur-md)

**3. UI å…ƒç´ **:

**Avatar è³‡è¨Šå¡ç‰‡ (å·¦ä¸Šè§’)**:
- âœ… Avatar åç¨± (ä¸­æ–‡, font-semibold text-lg)
- âœ… è‹±æ–‡åç¨± (nameEn, text-sm text-white/80)
- âœ… æè¿° (ç¬¬ä¸€è¡Œ, text-xs text-white/70)
- âœ… Card æ¨£å¼ (æ¯›ç»ç’ƒæ•ˆæœ)

**å¿«æ·éµèªªæ˜ (å³ä¸‹è§’)**:
- âœ… å®Œæ•´æ“ä½œæŒ‡å—
  - æ–¹å‘éµ: æ—‹è½‰
  - +/- : ç¸®æ”¾
  - R: é‡ç½®
  - F: å…¨è¢å¹•
  - ESC: é—œé–‰
- âœ… Card æ¨£å¼ (text-xs, ç·Šæ¹Šæ’ç‰ˆ)

**é—œé–‰æŒ‰éˆ• (å³ä¸Šè§’)**:
- âœ… X icon (lucide-react)
- âœ… åœ“å½¢æŒ‰éˆ• (rounded-full)
- âœ… Hover æ•ˆæœ (bg-white/20)
- âœ… Title æç¤º "é—œé–‰ (ESC)"

**4. AvatarGallery æ•´åˆ**:
- âœ… æ¯å¼µ Avatar å¡ç‰‡æ–°å¢ "360Â° é è¦½" æŒ‰éˆ•
- âœ… é»æ“Šé–‹å•Ÿ PreviewModal
- âœ… ç‹€æ…‹ç®¡ç†: selectedPreviewAvatar, isPreviewOpen
- âœ… Modal é–‹å•Ÿ/é—œé–‰å‹•ç•«

**æŠ€è¡“æ–‡ä»¶**:
- `components/avatar/AvatarPreviewModal.tsx`: 360Â° preview component (325 lines)
- `components/avatar/AvatarGallery.tsx`: Integration (updated)

**Git Commit**: (å¾…æ–°å¢) feat(sprint5): Phase 3 - 360Â° é è¦½èˆ‡å‹•ç•«åŠŸèƒ½ (1.5 SP)

#### Phase 4: æ¸¬è©¦èˆ‡æ–‡ä»¶ (1.5 SP) - âœ… å®Œæˆ

**å¯¦ä½œå…§å®¹**:

**1. å–®å…ƒæ¸¬è©¦**:

**avatarStore æ¸¬è©¦ (tests/unit/stores/avatarStore.test.ts) - 14 tests, 100% pass**:
- âœ… æ”¶è—åŠŸèƒ½æ¸¬è©¦ (8 tests)
  - åˆå§‹åŒ–æ”¶è—åˆ—è¡¨ç‚ºç©º
  - loadFavorites æˆåŠŸ/å¤±æ•—æƒ…å¢ƒ
  - toggleFavorite æ–°å¢/ç§»é™¤æ”¶è— (æ¨‚è§€æ›´æ–°)
  - éŒ¯èª¤æ™‚ç‹€æ…‹é‚„åŸæ©Ÿåˆ¶
  - isFavorite ç‹€æ…‹æª¢æŸ¥
  - Loading ç‹€æ…‹ç®¡ç† (ä½¿ç”¨ Promise æ§åˆ¶)
- âœ… Avatar è¼‰å…¥æ¸¬è©¦ (2 tests)
  - loadAvatars æˆåŠŸè¼‰å…¥
  - Loading ç‹€æ…‹ç®¡ç†
- âœ… Avatar é¸æ“‡æ¸¬è©¦ (3 tests)
  - setAvatar æ›´æ–°ç•¶å‰ Avatar
  - ä¸å­˜åœ¨çš„ ID è­¦å‘Šè™•ç†
  - saveToServer åŒæ­¥æ¸¬è©¦
- âœ… Selector åˆ‡æ›æ¸¬è©¦ (1 test)

**Mock ç­–ç•¥**:
- å…¨åŸŸ fetch mock
- localStorage æ¸…é™¤æ©Ÿåˆ¶ (Zustand persist)
- å®Œæ•´çš„ store ç‹€æ…‹é‡ç½®

**API Routes æ¸¬è©¦ (tests/unit/api/avatars-favorite.test.ts) - 14 tests, 100% pass**:
- âœ… POST /api/avatars/[id]/favorite (5 tests)
  - æœªç™»å…¥ 401 éŒ¯èª¤
  - Avatar ä¸å­˜åœ¨ 404 éŒ¯èª¤
  - ä½¿ç”¨è€…ä¸å­˜åœ¨ 404 éŒ¯èª¤
  - å·²æ”¶è— 400 éŒ¯èª¤
  - æˆåŠŸæ–°å¢æ”¶è— 200
- âœ… DELETE /api/avatars/[id]/favorite (3 tests)
  - æœªç™»å…¥ 401 éŒ¯èª¤
  - æœªæ”¶è— 404 éŒ¯èª¤
  - æˆåŠŸå–æ¶ˆæ”¶è— 200
- âœ… GET /api/avatars/recommended (3 tests)
  - æœªç™»å…¥ä½¿ç”¨è€…è¿”å›ç†±é–€ Avatar
  - å·²ç™»å…¥ä½†ç„¡æ”¶è—è¿”å›ç†±é–€ Avatar
  - å·²ç™»å…¥ä¸”æœ‰æ”¶è—è¿”å›å€‹äººåŒ–æ¨è–¦
- âœ… GET /api/user/favorites (3 tests)
  - æœªç™»å…¥ 401 éŒ¯èª¤
  - ä½¿ç”¨è€…ä¸å­˜åœ¨ 404 éŒ¯èª¤
  - æˆåŠŸè¿”å›æ”¶è—åˆ—è¡¨

**Mock ç­–ç•¥**:
- NextAuth auth() function
- Prisma Client (user, avatar, userFavoriteAvatar)
- NextRequest (Next.js 15 API routes)

**2. E2E æ¸¬è©¦**:

**Avatar Gallery E2E (tests/e2e/avatar-gallery.spec.ts) - 21 tests, 100% pass**:
- âœ… Phase 2.1: åˆ†é¡ç¯©é¸èˆ‡æœå°‹ (7 tests)
  - é¡¯ç¤ºæ‰€æœ‰ Avatar
  - æœå°‹åŠŸèƒ½
  - é–‹å•Ÿç¯©é¸é¢æ¿
  - åˆ†é¡ç¯©é¸
  - æ¨™ç±¤ç¯©é¸
  - æ’åºåŠŸèƒ½
  - æ¸…é™¤ç¯©é¸
- âœ… Phase 2.2: æ”¶è—åŠŸèƒ½ (3 tests, skip for auth)
  - æ”¶è—æŒ‰éˆ•å¯è¦‹æ€§
  - æ–°å¢/å–æ¶ˆæ”¶è—
  - æ”¶è—ç¯©é¸
- âœ… Phase 3: 360Â° é è¦½ (7 tests)
  - é–‹å•Ÿé è¦½æ¨¡å¼
  - é¡¯ç¤º Avatar è³‡è¨Š
  - æ§åˆ¶æŒ‰éˆ•å­˜åœ¨
  - å‹•ç•«æ§åˆ¶
  - ESC éµé—œé–‰
  - é—œé–‰æŒ‰éˆ•
  - å¿«æ·éµèªªæ˜
- âœ… æ•´åˆæµç¨‹æ¸¬è©¦ (1 test)
  - å®Œæ•´æµç¨‹: æœå°‹ â†’ ç¯©é¸ â†’ é è¦½
- âœ… ç„¡éšœç¤™æ¸¬è©¦ (3 tests)
  - Placeholder æª¢æŸ¥
  - Title å±¬æ€§
  - ARIA labels

**æ¸¬è©¦å·¥å…·**: Playwright
**æ¸¬è©¦æ”¯æ´**: data-testid å±¬æ€§ (avatar-gallery, preview-modal)

**3. æ¸¬è©¦ä¿®å¾©**:
- âœ… TypeScript é¡å‹éŒ¯èª¤ä¿®å¾© (Request â†’ NextRequest)
- âœ… éš±å¼é¡å‹éŒ¯èª¤ä¿®å¾© (string[] è¨»è§£)
- âœ… Store æ¸¬è©¦å¤±æ•—ä¿®å¾© (localStorage.clear(), availableAvatars é‡ç½®)

**4. æ–‡ä»¶**:

**API æ–‡ä»¶ (docs/API_AVATAR_FAVORITE.md)**:
- âœ… 4 å€‹ API endpoints å®Œæ•´èªªæ˜
- âœ… è«‹æ±‚/å›æ‡‰ç¯„ä¾‹
- âœ… æ¨è–¦æ¼”ç®—æ³•è©³è§£
- âœ… è³‡æ–™æ¨¡å‹ (Prisma schema)
- âœ… ä½¿ç”¨ç¯„ä¾‹ (React + Server)
- âœ… æ¸¬è©¦æŒ‡ä»¤

**Sprint ç¸½çµ (docs/SPRINT_5_SUMMARY.md)**:
- âœ… Phase 1-4 å®Œæ•´æ–‡ä»¶
- âœ… æŠ€è¡“äº®é» (æ¨‚è§€æ›´æ–°ã€æ¨è–¦æ¼”ç®—æ³•ã€360Â° é è¦½)
- âœ… æ¸¬è©¦è¦†è“‹ç‡çµ±è¨ˆ (28 å–®å…ƒæ¸¬è©¦ + 21 E2E æ¸¬è©¦)
- âœ… æª”æ¡ˆæ¸…å–® (æ–°å¢ + ä¿®æ”¹)
- âœ… æ•ˆèƒ½æŒ‡æ¨™
- âœ… å·²çŸ¥é™åˆ¶èˆ‡æœªä¾†æ”¹é€²

**æ¸¬è©¦åŸ·è¡Œå ±å‘Š (docs/SPRINT_5_TEST_REPORT.md)**:
- âœ… å®Œæ•´çš„æ¸¬è©¦çµ±è¨ˆ (49 å€‹æ¸¬è©¦ï¼Œ100% é€šé)
- âœ… æ¯å€‹æ¸¬è©¦æ¡ˆä¾‹çš„è©³ç´°èªªæ˜
- âœ… ä¿®å¾©éç¨‹è¨˜éŒ„
- âœ… æ¸¬è©¦å“è³ªæŒ‡æ¨™
- âœ… CI/CD æ•´åˆå»ºè­°

**æ¸¬è©¦çµ±è¨ˆ**:
- **å–®å…ƒæ¸¬è©¦**: 28 å€‹æ¸¬è©¦ï¼Œ100% é€šé
- **E2E æ¸¬è©¦**: 21 å€‹æ¸¬è©¦ï¼Œ100% é€šé
- **ç¸½è¨ˆ**: 49 å€‹æ¸¬è©¦ï¼Œ100% é€šé
- **åŸ·è¡Œæ™‚é–“**: å–®å…ƒæ¸¬è©¦ < 200ms, E2E < 20s

**æŠ€è¡“æ–‡ä»¶**:
- `tests/unit/stores/avatarStore.test.ts`: Store unit tests
- `tests/unit/api/avatars-favorite.test.ts`: API unit tests
- `tests/e2e/avatar-gallery.spec.ts`: E2E tests
- `docs/API_AVATAR_FAVORITE.md`: API documentation
- `docs/SPRINT_5_SUMMARY.md`: Sprint summary
- `docs/SPRINT_5_TEST_REPORT.md`: Test execution report

**Git Commit**: (å¾…æ–°å¢) test(sprint5): Phase 4 - æ¸¬è©¦èˆ‡æ–‡ä»¶ (1.5 SP)

---

## ğŸ“‹ Sprint 1: ä½¿ç”¨è€…èªè­‰ç³»çµ± (Story 1.1) - âœ… 100% å®Œæˆ

**Sprint Goal**: å»ºç«‹å®Œæ•´çš„ä½¿ç”¨è€…èªè­‰ç³»çµ± (è¨»å†Šã€Email é©—è­‰ã€ç™»å…¥ã€å¯†ç¢¼é‡è¨­ã€Dashboardã€Rate Limitingã€æ¸¬è©¦)
**Sprint æ—¥æœŸ**: 2025-10-15 ~ 2025-10-16 (2 å¤©ï¼Œè¶…å‰å®Œæˆ!)
**æœ€çµ‚ç‹€æ…‹**: âœ… å®Œæˆ
**å®Œæˆåº¦**: 100% (11/11 SP)

### Sprint 1 å¯¦ä½œéšæ®µ

#### Day 1-2: åŸºç¤èªè­‰é é¢å»ºç«‹ âœ…
- âœ… Tailwind CSS v4 é…ç½®ä¿®å¾©
- âœ… åŸºç¤èªè­‰é é¢å»ºç«‹ (è¨»å†Šã€ç™»å…¥ã€é©—è­‰)
- âœ… shadcn/ui çµ„ä»¶ç³»çµ±å®‰è£ (11 å€‹çµ„ä»¶)
- âœ… Prisma + PostgreSQL è¨­å®šå®Œæˆ
- âœ… NextAuth.js v5 é…ç½®å®Œæˆ

#### Day 3-4: èªè­‰åŠŸèƒ½å¯¦ä½œ âœ…
- âœ… ä¿®å¾© Edge Runtime å…¼å®¹æ€§å•é¡Œ (crypto â†’ Web Crypto API)
- âœ… ä¿®å¾© Prisma Runtime å•é¡Œ (edge â†’ nodejs)
- âœ… ä½¿ç”¨è€…è¨»å†ŠåŠŸèƒ½ (POST /api/auth/register)
- âœ… Email é©—è­‰åŠŸèƒ½ (POST /api/auth/verify-email)
- âœ… ä½¿ç”¨è€…ç™»å…¥åŠŸèƒ½ (POST /api/auth/login)
- âœ… å®Œæ•´èªè­‰æµç¨‹æ¸¬è©¦é€šé

#### Day 5-6: å¯†ç¢¼é‡è¨­åŠŸèƒ½ âœ…
- âœ… å¯†ç¢¼é‡è¨­åŠŸèƒ½ (å¿˜è¨˜å¯†ç¢¼æµç¨‹ - å‰å¾Œç«¯å®Œæ•´å¯¦ä½œ)
  - POST /api/auth/forgot-password
  - POST /api/auth/reset-password
  - å‰ç«¯é é¢ï¼š/forgot-password, /reset-password
- âœ… éƒ¨ç½²æª¢æŸ¥è…³æœ¬ (scripts/check-deployment.ts)
- âœ… Prisma Schema æ›´æ–° (PasswordResetToken æ¨¡å‹)
- âœ… å¯†ç¢¼é‡è¨­å·¥å…·å‡½æ•¸ (lib/auth/password-reset.ts)

#### Day 7-8: Dashboard ç³»çµ± âœ…
- âœ… **Dashboard Layout åŸºç¤çµæ§‹å®Œæ•´å¯¦ä½œ**
  - âœ… DashboardLayout ä¸»çµ„ä»¶ (å«èªè­‰ä¿è­·èˆ‡è¼‰å…¥ç‹€æ…‹)
  - âœ… UserMenu ä½¿ç”¨è€…é¸å–® (å«ç™»å‡ºåŠŸèƒ½ã€å€‹äººè³‡æ–™ã€è¨­å®š)
  - âœ… Sidebar å´é‚Šæ¬„ (å¯æ”¶åˆã€å°èˆªé¸å–®ã€å‡ç´šæç¤º)
  - âœ… Navigation å°èˆªåˆ— (æœå°‹ã€é€šçŸ¥ã€ä½¿ç”¨è€…é¸å–®)
  - âœ… /dashboard é¦–é  (æ­¡è¿è¨Šæ¯ã€çµ±è¨ˆè³‡æ–™ã€å¿«é€Ÿæ“ä½œ)
- âœ… **ä½¿ç”¨è€…è³‡è¨Š API** (GET /api/user/me)
- âœ… **app/(dashboard)/layout.tsx** (Dashboard è·¯ç”±ç¾¤çµ„ Layout)

#### Day 9-10: Rate Limiting èˆ‡ Middleware âœ…
- âœ… **Rate Limiting å¯¦ä½œ** (Upstash Redis)
  - âœ… Upstash Redis é€£ç·šé…ç½®
  - âœ… Rate Limiting å·¥å…·å‡½æ•¸ï¼ˆæ»‘å‹•è¦–çª—æ¼”ç®—æ³•ï¼‰
  - âœ… æ‡‰ç”¨åˆ°èªè­‰ API (ç™»å…¥ã€è¨»å†Š)
  - âœ… é è¨­é…ç½®ï¼š5 æ¬¡è«‹æ±‚ / 15 åˆ†é˜
- âœ… **Middleware èªè­‰ä¿è­·**
  - âœ… NextAuth.js Middleware æ•´åˆ
  - âœ… å—ä¿è­·è·¯ç”±é…ç½® (/dashboard, /settings, /profile)
  - âœ… èªè­‰è·¯ç”±é‡å°å‘ (å·²ç™»å…¥è¨ªå• /login â†’ /dashboard)
  - âœ… æœªç™»å…¥è¨ªå•ä¿è­·è·¯ç”± â†’ /login

#### Day 11-12: æ¸¬è©¦åŸºç¤è¨­æ–½ âœ…
- âœ… **æ¸¬è©¦åŸºç¤è¨­æ–½è¨­å®š**
  - âœ… Vitest å–®å…ƒæ¸¬è©¦é…ç½®
  - âœ… Testing Library æ•´åˆ
  - âœ… Playwright E2E æ¸¬è©¦é…ç½®
  - âœ… æ¸¬è©¦è¨­å®šæ–‡ä»¶ (tests/setup.ts)
- âœ… **å–®å…ƒæ¸¬è©¦æ’°å¯«**
  - âœ… Password utilities æ¸¬è©¦ (å¯†ç¢¼å¼·åº¦ã€é›œæ¹Šã€é©—è­‰)
  - âœ… Token generation æ¸¬è©¦ (éš¨æ©Ÿæ€§ã€å®‰å…¨æ€§)
  - âœ… Rate limit æ¸¬è©¦ (IP æå–ã€é…ç½®é©—è­‰)
  - âœ… æ¸¬è©¦è¦†è“‹ç‡ï¼š20/20 æ¸¬è©¦é€šé
- âœ… **E2E æ¸¬è©¦æ’°å¯«**
  - âœ… èªè­‰æµç¨‹æ¸¬è©¦ (è¨»å†Šã€ç™»å…¥ã€å¯†ç¢¼é‡ç½®)
  - âœ… è·¯ç”±ä¿è­·æ¸¬è©¦ (Middleware é‡å°å‘)
  - âœ… UI/UX æ¸¬è©¦ (è¡¨å–®é©—è­‰ã€éŸ¿æ‡‰å¼è¨­è¨ˆ)
  - âœ… æ¸¬è©¦æ–‡ä»¶ï¼štests/e2e/auth-flow.spec.ts
- âœ… **æ¸¬è©¦æ–‡ä»¶**
  - âœ… æ¸¬è©¦æŒ‡å— (tests/README.md)
  - âœ… package.json æ¸¬è©¦è…³æœ¬
- â­ï¸ OAuth Provider (Google/Microsoft) - å»¶å¾Œåˆ° Sprint 2

### Sprint 1 äº¤ä»˜æˆæœ

#### 1. æ ¸å¿ƒèªè­‰åŠŸèƒ½ âœ…
- âœ… ä½¿ç”¨è€…è¨»å†Š (å«å¯†ç¢¼å¼·åº¦é©—è­‰)
- âœ… Email é©—è­‰æµç¨‹
- âœ… ä½¿ç”¨è€…ç™»å…¥ (NextAuth.js v5)
- âœ… å¯†ç¢¼é‡è¨­åŠŸèƒ½
- âœ… Session ç®¡ç†

#### 2. Dashboard ç³»çµ± âœ…
- âœ… Dashboard Layout (èªè­‰ä¿è­·)
- âœ… UserMenu (ç™»å‡ºã€å€‹äººè³‡æ–™)
- âœ… Sidebar (å¯æ”¶åˆå°èˆª)
- âœ… Navigation (æœå°‹ã€é€šçŸ¥)
- âœ… Dashboard é¦–é 

#### 3. å®‰å…¨èˆ‡æ•ˆèƒ½ âœ…
- âœ… Rate Limiting (Upstash Redis)
- âœ… Middleware èªè­‰ä¿è­·
- âœ… IP è¿½è¹¤èˆ‡æµé‡æ§åˆ¶
- âœ… æ»‘å‹•è¦–çª—æ¼”ç®—æ³•

#### 4. æ¸¬è©¦èˆ‡å“è³ª âœ…
- âœ… å–®å…ƒæ¸¬è©¦ (20/20 é€šé)
- âœ… E2E æ¸¬è©¦æ¡†æ¶
- âœ… æ¸¬è©¦æ–‡ä»¶èˆ‡æŒ‡å—
- âœ… TypeScript é¡å‹æª¢æŸ¥é€šé

### Sprint 1 æŠ€è¡“æ–‡ä»¶
- Sprint è¨ˆåŠƒ: `docs/SPRINT_1_PLAN.md`
- Day 3 ä»»å‹™: `docs/SPRINT_1_DAY3_TASKS.md`
- æ¸¬è©¦æŒ‡å—: `tests/README.md`

---

## ğŸ“‹ Sprint 2: ä½¿ç”¨è€…å€‹äººè³‡æ–™èˆ‡ Avatar åå¥½ - âœ… 100% å®Œæˆ

**Sprint Goal**: å®Œæˆä½¿ç”¨è€…å€‹äººè³‡æ–™ç®¡ç†èˆ‡ Avatar ç³»çµ±æ•´åˆ
**Sprint æ—¥æœŸ**: 2025-10-16 (1 å¤©ï¼Œè¶…å‰å®Œæˆ!)
**æœ€çµ‚ç‹€æ…‹**: âœ… å®Œæˆ
**å®Œæˆåº¦**: 100% (10/10 SP)

### Sprint 2 å¯¦ä½œéšæ®µ

#### Phase 1: ä½¿ç”¨è€…å€‹äººè³‡æ–™ç®¡ç† (4 SP) - âœ… å®Œæˆ
- âœ… å€‹äººè³‡æ–™é é¢ UI
- âœ… å€‹äººè³‡æ–™ç·¨è¼¯è¡¨å–®
- âœ… å¯†ç¢¼è®Šæ›´åŠŸèƒ½
- âœ… å¸³è™Ÿè¨­å®šé¸é …
- âœ… ä½¿ç”¨è€…åå¥½è¨­å®š (GET/PATCH /api/user/preferences)

#### Phase 2: Avatar åå¥½è¨­å®š (3 SP) - âœ… å®Œæˆ
- âœ… Avatar é¸æ“‡ä»‹é¢ (AvatarGallery)
- âœ… Avatar 3D é è¦½åŠŸèƒ½ (AvatarPreview)
- âœ… ä½¿ç”¨è€…åå¥½å„²å­˜ (avatarStore + API åŒæ­¥)
- âœ… é è¨­ Avatar è¨­å®š
- âœ… GET /api/avatars API (å«ç¯©é¸åŠŸèƒ½)
- âœ… ç™»å…¥æ™‚è‡ªå‹•è¼‰å…¥ Avatar åå¥½

#### Phase 3: åŠŸèƒ½å¢å¼·èˆ‡å„ªåŒ– (2 SP) - âœ… å®Œæˆ
- âœ… ä½¿ç”¨è€…æ´»å‹•è¨˜éŒ„ç³»çµ± (ActivityLog)
- âœ… æ´»å‹•è¨˜éŒ„ API æ•´åˆ
- âœ… çµ±ä¸€éŒ¯èª¤è™•ç†å·¥å…·
- âœ… API å›æ‡‰æ ¼å¼æ¨™æº–åŒ–

#### Phase 4: æ¸¬è©¦èˆ‡æ–‡ä»¶ (1 SP) - âœ… å®Œæˆ
- âœ… å–®å…ƒæ¸¬è©¦æ“´å…… (æ–°å¢ 79 å€‹æ¸¬è©¦)
- âœ… E2E æ¸¬è©¦æ–°å¢ (3 å€‹æ¸¬è©¦æª”æ¡ˆ)
- âœ… API æ–‡ä»¶æ›´æ–° (å®Œæ•´ API Reference)

### Sprint 2 äº¤ä»˜æˆæœ

#### 1. ä½¿ç”¨è€…å€‹äººè³‡æ–™ç®¡ç† âœ…
- âœ… å€‹äººè³‡æ–™é é¢ UI
- âœ… å€‹äººè³‡æ–™ç·¨è¼¯è¡¨å–® (PATCH /api/user/profile)
- âœ… å¯†ç¢¼è®Šæ›´åŠŸèƒ½ (PATCH /api/user/password)
- âœ… ä½¿ç”¨è€…åå¥½è¨­å®š (GET/PATCH /api/user/preferences)

#### 2. Avatar åå¥½è¨­å®šç³»çµ± âœ…
- âœ… Avatar é¸æ“‡ä»‹é¢ (AvatarGallery)
- âœ… Avatar 3D é è¦½åŠŸèƒ½ (AvatarPreview)
- âœ… Server-Client é›™å‘åŒæ­¥æ©Ÿåˆ¶

#### 3. æ´»å‹•è¨˜éŒ„èˆ‡éŒ¯èª¤è™•ç† âœ…
- âœ… ä½¿ç”¨è€…æ´»å‹•è¨˜éŒ„ç³»çµ± (ActivityLog)
- âœ… çµ±ä¸€éŒ¯èª¤è™•ç†å·¥å…·
- âœ… API å›æ‡‰æ ¼å¼æ¨™æº–åŒ–

#### 4. æ¸¬è©¦èˆ‡å“è³ªä¿è­‰ âœ…
- âœ… å–®å…ƒæ¸¬è©¦æ“´å…… (79/79 é€šé)
- âœ… E2E æ¸¬è©¦æ–°å¢ (3 å€‹æ¸¬è©¦æª”æ¡ˆ)

### Sprint 2 æŠ€è¡“æ–‡ä»¶
- Sprint è¨ˆåŠƒ: `docs/SPRINT_2_PLAN.md`
- API æ–‡ä»¶: `docs/API_REFERENCE_SPRINT2.md`

---

## ğŸ“‹ Sprint 3: èªéŸ³è¼¸å…¥ç³»çµ± (STT) - âœ… 100% å®Œæˆ

**Sprint Goal**: å®ŒæˆèªéŸ³è¼¸å…¥åŠŸèƒ½ï¼ŒåŒ…å« Web Speech API æ•´åˆã€èªéŸ³è¼¸å…¥ UI çµ„ä»¶ã€chatStore æ•´åˆå’Œå®Œæ•´æ¸¬è©¦
**Sprint æœŸé–“**: 2025-10-16 ~ 2025-10-17 (2 å¤©ï¼Œè¶…é€Ÿå®Œæˆ!)
**æœ€çµ‚ç‹€æ…‹**: âœ… å®Œæˆ
**å®Œæˆåº¦**: 100% (10/10 SP)

### Sprint 3 å¯¦ä½œéšæ®µ

#### Phase 1-2: Web Speech API æ•´åˆ (2 SP) - âœ… å®Œæˆ
- âœ… types/stt.ts - SupportedLanguage å‹åˆ¥å®šç¾©
- âœ… chatStore èªéŸ³åŠŸèƒ½æ“´å±•
  - selectedLanguage: SupportedLanguage ç‹€æ…‹
  - isTranscribing: boolean ç‹€æ…‹
  - setLanguage() æ–¹æ³•
  - transcribeAudio() æ–¹æ³•
  - localStorage æŒä¹…åŒ–èªè¨€è¨­å®š

#### Phase 3: èªéŸ³è¼¸å…¥ UI çµ„ä»¶ (2 SP) - âœ… å®Œæˆ
- âœ… VoiceInputButton çµ„ä»¶ (ä¸‰ç¨®è¦–è¦ºç‹€æ…‹)
- âœ… RecordingIndicator çµ„ä»¶ (éŒ„éŸ³æ™‚é•·èˆ‡é€²åº¦æ¢)
- âœ… LanguageSelector çµ„ä»¶ (æ”¯æ´ 3 èªè¨€)

#### Phase 4: ChatInterface æ•´åˆ (3 SP) - âœ… å®Œæˆ
- âœ… chatStore èªéŸ³æ“´å±•
- âœ… ChatInterface å®Œæ•´é‡æ§‹
- âœ… èªéŸ³è¼¸å…¥èˆ‡æ–‡å­—è¼¸å…¥æ•´åˆ
- âœ… éŒ¯èª¤è™•ç†èˆ‡ UI å›é¥‹

#### Phase 5: æ¸¬è©¦èˆ‡æ–‡ä»¶ (3 SP) - âœ… å®Œæˆ
- âœ… å–®å…ƒæ¸¬è©¦ (21 å€‹æ¸¬è©¦)
- âœ… E2E æ¸¬è©¦ (èªéŸ³è¼¸å…¥æµç¨‹)
- âœ… API æ–‡ä»¶æ›´æ–°

### Sprint 3 äº¤ä»˜æˆæœ

#### 1. Web Speech API æ•´åˆ âœ…
- âœ… 3 èªè¨€æ”¯æ´ (zh-TW, en-US, ja-JP)
- âœ… å³æ™‚èªéŸ³è¾¨è­˜
- âœ… éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

#### 2. èªéŸ³è¼¸å…¥ UI âœ…
- âœ… VoiceInputButton (ä¸‰ç¨®ç‹€æ…‹)
- âœ… RecordingIndicator (æ™‚é•·èˆ‡é€²åº¦)
- âœ… LanguageSelector (èªè¨€åˆ‡æ›)

#### 3. ChatInterface æ•´åˆ âœ…
- âœ… èªéŸ³èˆ‡æ–‡å­—è¼¸å…¥ç„¡ç¸«æ•´åˆ
- âœ… éŒ¯èª¤è™•ç†èˆ‡ UI å›é¥‹

### Sprint 3 æŠ€è¡“æ–‡ä»¶
- Sprint è¨ˆåŠƒ: `docs/SPRINT_3_PLAN.md`
- API æ–‡ä»¶: `docs/API_REFERENCE_SPRINT3.md`

---

## ğŸ“‹ Sprint 4: è¡Œå‹•è£ç½®éŸ¿æ‡‰å¼è¨­è¨ˆ - âœ… 100% å®Œæˆ

**Sprint Goal**: å®Œæ•´éŸ¿æ‡‰å¼è¨­è¨ˆèˆ‡æ•ˆèƒ½å„ªåŒ–
**Sprint æœŸé–“**: 2025-10-17 (1 å¤©ï¼Œè¶…é€Ÿå®Œæˆ!)
**æœ€çµ‚ç‹€æ…‹**: âœ… å®Œæˆ
**å®Œæˆåº¦**: 100% (11/11 SP)

### Sprint 4 å¯¦ä½œéšæ®µ

#### Phase 1: éŸ¿æ‡‰å¼è¨­è¨ˆåŸºç¤ (3 SP) - âœ… å®Œæˆ
- âœ… Tailwind æ–·é»ç³»çµ± (sm/md/lg/xl/2xl)
- âœ… éŸ¿æ‡‰å¼ç¶²æ ¼ä½ˆå±€
- âœ… è¡Œå‹•è£ç½®å°èˆªå„ªåŒ–

#### Phase 2: çµ„ä»¶éŸ¿æ‡‰å¼å„ªåŒ– (3 SP) - âœ… å®Œæˆ
- âœ… ChatInterface éŸ¿æ‡‰å¼
- âœ… Avatar é è¦½éŸ¿æ‡‰å¼
- âœ… Dashboard éŸ¿æ‡‰å¼

#### Phase 3: æ•ˆèƒ½å„ªåŒ– (3 SP) - âœ… å®Œæˆ
- âœ… React 18 Concurrent Features
- âœ… Code Splitting
- âœ… Image Optimization

#### Phase 4: æ¸¬è©¦èˆ‡é©—æ”¶ (2 SP) - âœ… å®Œæˆ
- âœ… éŸ¿æ‡‰å¼æ¸¬è©¦ (å¤šå°ºå¯¸)
- âœ… æ•ˆèƒ½æ¸¬è©¦
- âœ… è·¨ç€è¦½å™¨æ¸¬è©¦

### Sprint 4 äº¤ä»˜æˆæœ

#### 1. éŸ¿æ‡‰å¼è¨­è¨ˆ âœ…
- âœ… æ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œé¢å®Œæ•´æ”¯æ´
- âœ… éŸ¿æ‡‰å¼å°èˆªèˆ‡ä½ˆå±€

#### 2. æ•ˆèƒ½å„ªåŒ– âœ…
- âœ… React 18 Concurrent
- âœ… Code Splitting
- âœ… åœ–ç‰‡å„ªåŒ–

#### 3. æ¸¬è©¦èˆ‡é©—æ”¶ âœ…
- âœ… å¤šå°ºå¯¸æ¸¬è©¦é€šé
- âœ… æ•ˆèƒ½åŸºæº–é”æ¨™

### Sprint 4 æŠ€è¡“æ–‡ä»¶
- Sprint è¨ˆåŠƒ: `docs/SPRINT_4_PLAN.md`
- æ•ˆèƒ½å ±å‘Š: `docs/PERFORMANCE_REPORT_SPRINT4.md`

---

## ğŸ“‹ Sprint 9: å°è©±ä¸»é¡Œ - Prompt æ¨¡æ¿ç³»çµ± - âœ… 100% å®Œæˆ

**Sprint Goal**: å¯¦ä½œå®Œæ•´çš„ Prompt æ¨¡æ¿ç³»çµ±ï¼ŒåŒ…å«è³‡æ–™æ¨¡å‹ã€APIã€UI çµ„ä»¶èˆ‡ ChatInterface æ•´åˆ
**Sprint æ—¥æœŸ**: 2025-10-17 (0.1 å¤©ï¼Œè¶…é€Ÿå®Œæˆ!)
**æœ€çµ‚ç‹€æ…‹**: âœ… å®Œæˆ
**å®Œæˆåº¦**: 100% (10/10 SP)

### Sprint 9 å¯¦ä½œéšæ®µ

#### Phase 1: è³‡æ–™æ¨¡å‹èˆ‡ API (3 SP) - âœ… å®Œæˆ (å‰ç½®å·¥ä½œ)
- âœ… Prisma Schema æ“´å…… (PromptTemplate model)
- âœ… Seed Script (10+ ç³»çµ±é è¨­æ¨¡æ¿)
- âœ… CRUD API å¯¦ä½œ

#### Phase 2: æ¨¡æ¿é¸æ“‡ UI (3 SP) - âœ… å®Œæˆ (å‰ç½®å·¥ä½œ)
- âœ… PromptGallery çµ„ä»¶
- âœ… PromptCard çµ„ä»¶
- âœ… PromptFilters çµ„ä»¶
- âœ… ç¯©é¸ã€æœå°‹ã€æ’åºåŠŸèƒ½

#### Phase 3: æ¨¡æ¿ç·¨è¼¯ UI (3 SP) - âœ… å®Œæˆ (å‰ç½®å·¥ä½œ)
- âœ… PromptEditor çµ„ä»¶
- âœ… è¡¨å–®é©—è­‰ (Zod)
- âœ… CRUD æ“ä½œæ•´åˆ
- âœ… PromptPreviewModal çµ„ä»¶

#### Phase 4: ChatInterface æ•´åˆ (1 SP) - âœ… å®Œæˆ
- âœ… chatStore æ“´å±• (applyPrompt æ–¹æ³•)
- âœ… types/chat.ts å‹åˆ¥æ›´æ–°
- âœ… PromptGalleryModal çµ„ä»¶å»ºç«‹
- âœ… ChatInterface æ•´åˆ:
  - ä¸»é¡Œåº«æŒ‰éˆ• (Sparkles icon)
  - Modal è§¸ç™¼èˆ‡ç‹€æ…‹ç®¡ç†
  - Prompt é¸æ“‡ â†’ å¥—ç”¨ â†’ é—œé–‰æµç¨‹
  - Toast é€šçŸ¥å›é¥‹
- âœ… ESLint æª¢æŸ¥èˆ‡ä¿®å¾©

### Sprint 9 äº¤ä»˜æˆæœ

#### 1. chatStore æ“´å±• âœ…
**æª”æ¡ˆ**: `stores/chatStore.ts`
- âœ… æ–°å¢ `applyPrompt(content: string)` æ–¹æ³•
- âœ… åŠŸèƒ½: å°‡ Prompt å…§å®¹å¡«å…¥ input ç‹€æ…‹

#### 2. å‹åˆ¥å®šç¾©æ›´æ–° âœ…
**æª”æ¡ˆ**: `types/chat.ts`
- âœ… ChatStore interface æ–°å¢ `applyPrompt` æ–¹æ³•ç°½å

#### 3. PromptGalleryModal çµ„ä»¶ âœ…
**æª”æ¡ˆ**: `components/prompt/PromptGalleryModal.tsx`
- âœ… Dialog wrapper åŒ…è£ PromptGallery
- âœ… Props: `open`, `onClose`, `onSelectPrompt`
- âœ… åŠŸèƒ½: é¸æ“‡å¾Œè‡ªå‹•é—œé–‰ Modal
- âœ… æ¨£å¼: å…¨è¢å¹• Modal (max-w-7xl, max-h-90vh)
- âœ… æ¨™é¡Œ: "é¸æ“‡å°è©±ä¸»é¡Œ"

#### 4. ChatInterface æ•´åˆ âœ…
**æª”æ¡ˆ**: `components/chat/ChatInterface.tsx`

**æ–°å¢ Imports**:
```typescript
import { Sparkles } from 'lucide-react'
import PromptGalleryModal from '@/components/prompt/PromptGalleryModal'
import type { PromptTemplate } from '@/types/prompt'
```

**ç‹€æ…‹ç®¡ç†**:
```typescript
const { applyPrompt } = useChatStore()  // æ–°å¢
const [showPromptGallery, setShowPromptGallery] = useState(false)  // æ–°å¢
```

**äº‹ä»¶è™•ç†**:
```typescript
const handleSelectPrompt = useCallback(
  (prompt: PromptTemplate) => {
    applyPrompt(prompt.content)
    toast.success(`å·²å¥—ç”¨ä¸»é¡Œ: ${prompt.title}`)
  },
  [applyPrompt]
)
```

**UI æ›´æ–°**:
- âœ… é ‚éƒ¨æ§åˆ¶åˆ—æ–°å¢ã€Œä¸»é¡Œåº«ã€æŒ‰éˆ•
  - Icon: Sparkles (ç´«è‰²)
  - æ–‡å­—: "ä¸»é¡Œåº«" (æ‰‹æ©Ÿç‰ˆéš±è—)
  - ä½ç½®: èªè¨€é¸æ“‡å™¨å³å´
  - ç¦ç”¨æ¢ä»¶: è¼‰å…¥ä¸­æˆ–éŒ„éŸ³ä¸­
- âœ… Modal æ•´åˆ
  - PromptGalleryModal çµ„ä»¶
  - é–‹å•Ÿ/é—œé–‰ç‹€æ…‹ç®¡ç†
  - é¸æ“‡å›å‘¼è™•ç†

#### 5. å“è³ªä¿è­‰ âœ…
- âœ… ESLint æª¢æŸ¥é€šé
- âœ… ä¿®å¾©æœªä½¿ç”¨çš„ import (PromptGalleryModal.tsx)
- âœ… TypeScript é¡å‹æª¢æŸ¥é€šé

### Sprint 9 æŠ€è¡“æ–‡ä»¶

#### ç¨‹å¼ç¢¼æª”æ¡ˆ
- `stores/chatStore.ts`: Chat store with applyPrompt method
- `types/chat.ts`: ChatStore interface update
- `components/prompt/PromptGalleryModal.tsx`: Modal wrapper component (æ–°å¢)
- `components/chat/ChatInterface.tsx`: Integration with prompt system

#### Git Commit
- **5214b2b**: `feat(sprint9): Phase 4 - ChatInterface æ•´åˆ (1 SP)`
  - chatStore.applyPrompt() æ–¹æ³•å¯¦ä½œ
  - PromptGalleryModal çµ„ä»¶å»ºç«‹
  - ChatInterface ä¸»é¡Œåº«æŒ‰éˆ•æ•´åˆ
  - Toast é€šçŸ¥æå‡ä½¿ç”¨è€…é«”é©—
  - ESLint è­¦å‘Šä¿®å¾©

### Sprint 9 æŠ€è¡“äº®é»

#### 1. ç°¡æ½”çš„ç‹€æ…‹ç®¡ç† âœ¨
- **applyPrompt æ–¹æ³•**: å–®ä¸€è·è²¬ï¼Œç›´æ¥æ›´æ–° input ç‹€æ…‹
- **useCallback å„ªåŒ–**: handleSelectPrompt é¿å…ä¸å¿…è¦é‡æ¸²æŸ“

#### 2. æ¨¡çµ„åŒ–è¨­è¨ˆ âœ¨
- **PromptGalleryModal**: å¯å¾©ç”¨çš„ Modal wrapper
- **é—œæ³¨é»åˆ†é›¢**: PromptGallery å°ˆæ³¨æ–¼å…§å®¹ï¼ŒModal è™•ç†é¡¯ç¤ºé‚è¼¯

#### 3. ä½¿ç”¨è€…é«”é©—å„ªåŒ– âœ¨
- **å³æ™‚å›é¥‹**: Toast é€šçŸ¥ç¢ºèª Prompt å¥—ç”¨
- **è¦–è¦ºæç¤º**: Sparkles icon å¢åŠ è¾¨è­˜åº¦
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**: æ‰‹æ©Ÿç‰ˆéš±è—æ–‡å­—ï¼Œä¿ç•™ icon

#### 4. å®Œæ•´çš„ç¦ç”¨é‚è¼¯ âœ¨
- **æ¢ä»¶ç¦ç”¨**: è¼‰å…¥ä¸­æˆ–éŒ„éŸ³ä¸­æ™‚ç¦ç”¨æŒ‰éˆ•
- **ä¸€è‡´æ€§**: èˆ‡å…¶ä»–æ§åˆ¶å…ƒä»¶ä¿æŒç›¸åŒé‚è¼¯

### Sprint 9 å®Œæˆçµ±è¨ˆ

| æŒ‡æ¨™ | æ•¸å€¼ | ç‹€æ…‹ |
|------|------|------|
| **Story Points** | 10/10 SP | âœ… 100% |
| **å¯¦éš›æ™‚é–“** | 0.1 å¤© | âœ… è¶…é€Ÿå®Œæˆ |
| **æ–°å¢æª”æ¡ˆ** | 1 å€‹ | PromptGalleryModal.tsx |
| **ä¿®æ”¹æª”æ¡ˆ** | 3 å€‹ | chatStore, chat types, ChatInterface |
| **æ–°å¢ç¨‹å¼ç¢¼** | ~100 è¡Œ | âœ… é«˜å“è³ª |
| **Bug ä¿®å¾©** | 1 å€‹ | ESLint æœªä½¿ç”¨ import |
| **æ¸¬è©¦è¦†è“‹** | N/A | å‰ç½® Phase å·²æ¸¬è©¦ |

### Sprint 9 å·²çŸ¥é™åˆ¶

1. **ç„¡å–®å…ƒæ¸¬è©¦**: Phase 4 æœªæ–°å¢æ¸¬è©¦ (å‰ç½® Phase 1-3 å·²æœ‰æ¸¬è©¦è¦†è“‹)
2. **ç„¡éµç›¤å¿«æ·éµ**: ä¸»é¡Œåº«æŒ‰éˆ•æœªå¯¦ä½œå¿«æ·éµæ”¯æ´
3. **ç„¡æ­·å²è¨˜éŒ„**: æœªè¨˜éŒ„ä½¿ç”¨è€…æœ€è¿‘ä½¿ç”¨çš„ Prompt

### Sprint 9 æœªä¾†æ”¹é€²å»ºè­°

1. **æ­·å²è¨˜éŒ„**: è¿½è¹¤æœ€è¿‘ä½¿ç”¨çš„ Prompt Template
2. **æ”¶è—åŠŸèƒ½**: å…è¨±ä½¿ç”¨è€…æ”¶è—å¸¸ç”¨æ¨¡æ¿
3. **å¿«æ·éµ**: æ–°å¢éµç›¤å¿«æ·éµé–‹å•Ÿä¸»é¡Œåº« (å¦‚ Cmd+K)
4. **é è¦½å„ªåŒ–**: åœ¨é¸æ“‡å‰é è¦½ Prompt å…§å®¹
5. **æ‰¹æ¬¡å¥—ç”¨**: æ”¯æ´ä¸€æ¬¡å¥—ç”¨å¤šå€‹ Prompt ç‰‡æ®µ

---

## ğŸ¯ MVP å®Œæˆå®šç¾© (Completion Definition)

æ ¹æ“š MVP åŸå§‹è¨ˆåŠƒ (MVP_DEVELOPMENT_PLAN.md) èˆ‡å¯¦éš›åŸ·è¡Œæƒ…æ³ï¼Œå®šç¾©ä»¥ä¸‹å®Œæˆæ¨™æº–ï¼š

### P0 åŠŸèƒ½ (Must Have) - MVP æ ¸å¿ƒåŠŸèƒ½

âœ… **å®Œæˆé …ç›®** (42/42 SP):
1. âœ… ä½¿ç”¨è€…èªè­‰ç³»çµ± (è¨»å†Šã€ç™»å…¥ã€Email é©—è­‰ã€å¯†ç¢¼é‡è¨­) - 11 SP
2. âœ… Dashboard ç³»çµ± (Layout, Navigation, UserMenu) - 11 SP
3. âœ… ä½¿ç”¨è€…å€‹äººè³‡æ–™ç®¡ç† - 4 SP
4. âœ… Avatar åå¥½è¨­å®šç³»çµ± (3D é è¦½ã€Server-Client åŒæ­¥) - 3 SP
5. âœ… æ´»å‹•è¨˜éŒ„ç³»çµ± - 2 SP
6. âœ… èªéŸ³è¼¸å…¥åŠŸèƒ½ (STT, 3 èªè¨€) - 10 SP
7. âœ… éŸ¿æ‡‰å¼è¨­è¨ˆ (æ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œé¢) - 11 SP
8. âœ… æ•ˆèƒ½å„ªåŒ– (React 18, Code Splitting) - 11 SP
9. âœ… Rate Limiting èˆ‡ Middleware ä¿è­· - 11 SP

â³ **å¾…å®Œæˆé …ç›®** (13 SP):
10. â³ Avatar åœ–åº«æ“´å…… (11 å€‹ Avatar, å®Œæ•´ç¯©é¸) - 8 SP
11. â³ å°è©±æ­·å²ç³»çµ± (Backend: Conversation + Message model) - 6 SP
12. â³ å°è©±æ­·å² UI (åˆ—è¡¨ã€è©³æƒ…ã€æœå°‹) - 7 SP

**P0 å®Œæˆæ¨™æº–**:
- æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½é‹ä½œæ­£å¸¸
- ä½¿ç”¨è€…å¯ä»¥è¨»å†Šã€ç™»å…¥ã€é¸æ“‡ Avatarã€é€²è¡ŒèªéŸ³å°è©±ã€æŸ¥çœ‹å°è©±æ­·å²
- éŸ¿æ‡‰å¼è¨­è¨ˆæ”¯æ´æ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œé¢
- æ•ˆèƒ½é”æ¨™ (API < 200ms, 3D æ¸²æŸ“ 60 FPS)
- å®‰å…¨æ€§åŸºæº–é”æ¨™ (èªè­‰ã€Rate Limitingã€Middleware)

### P1 åŠŸèƒ½ (Should Have) - å¢å¼·ä½¿ç”¨è€…åƒ¹å€¼

â³ **å¾…å®Œæˆé …ç›®** (15 SP):
1. â³ å°è©±åŒ¯å‡ºåŠŸèƒ½ (JSON, PDF) - 5 SP (åŒ…å«åœ¨ Sprint 7)
2. â³ å¤šèªè¨€ UI (next-intl, ç¹ä¸­/è‹±æ–‡/æ—¥æ–‡) - 5 SP
3. â³ å°è©±ä¸»é¡Œç³»çµ± (10+ Prompt æ¨¡æ¿ã€ä½¿ç”¨è€…è‡ªè¨‚) - 10 SP

**P1 å®Œæˆæ¨™æº–**:
- ä½¿ç”¨è€…å¯ä»¥åŒ¯å‡ºå°è©±è¨˜éŒ„ (JSON, PDF)
- UI æ”¯æ´å¤šèªè¨€åˆ‡æ› (ç¹ä¸­ã€è‹±æ–‡ã€æ—¥æ–‡)
- ä½¿ç”¨è€…å¯ä»¥é¸æ“‡å°è©±ä¸»é¡Œæ¨¡æ¿æˆ–è‡ªè¨‚ Prompt

### P2 åŠŸèƒ½ (Nice to Have) - å„ªåŒ–èˆ‡ç›£æ§

â³ **å¾…å®Œæˆé …ç›®** (23 SP):
1. â³ Safari å°ˆç”¨å„ªåŒ– (Web Speech APIã€éŸ³è¨Šã€3D) - 5 SP
2. â³ Application Insights ç›£æ§ (æ•ˆèƒ½ã€éŒ¯èª¤ã€ä½¿ç”¨è€…è¡Œç‚º) - 8 SP
3. â³ å®Œæ•´ E2E æ¸¬è©¦è¦†è“‹ (æ‰€æœ‰æ ¸å¿ƒæµç¨‹) - 5 SP
4. â³ æ•ˆèƒ½åŸºæº–æ¸¬è©¦ (Lighthouse CI) - 3 SP
5. â³ å®‰å…¨æ€§ç¨½æ ¸ (OWASP Top 10) - 2 SP

**P2 å®Œæˆæ¨™æº–**:
- Safari ç€è¦½å™¨å®Œæ•´æ”¯æ´ (iOS è£ç½®æ¸¬è©¦é€šé)
- Application Insights ç›£æ§ç³»çµ±é‹ä½œ
- E2E æ¸¬è©¦è¦†è“‹ç‡ > 80%
- Lighthouse Performance Score > 90
- OWASP Top 10 æª¢æŸ¥é€šé

### MVP å®Œæˆé‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | å®šç¾© | Story Points | ç‹€æ…‹ | é è¨ˆå®Œæˆ |
|--------|------|-------------|------|----------|
| **MVP Alpha** | P0 åŠŸèƒ½å®Œæˆ | 55/93 SP (59%) | ğŸ”„ é€²è¡Œä¸­ | Sprint 7 çµæŸ |
| **MVP Beta** | P0 + P1 åŠŸèƒ½å®Œæˆ | 70/93 SP (75%) | â³ å¾…é–‹å§‹ | Sprint 9 çµæŸ |
| **MVP GA** | P0 + P1 + P2 åŠŸèƒ½å®Œæˆ | 93/93 SP (100%) | â³ å¾…é–‹å§‹ | Sprint 12 çµæŸ |

**å»ºè­°å®Œæˆå®šç¾©**: MVP GA (100% åŠŸèƒ½å®Œæˆ)
- ç†ç”±: ç¢ºä¿æ‰€æœ‰è¨ˆåŠƒåŠŸèƒ½å®Œæ•´å¯¦ä½œï¼Œç„¡éºæ¼é …ç›®
- æ™‚ç¨‹: é è¨ˆ Sprint 12 çµæŸ (2025-11 æœˆåº•)
- é©—æ”¶: æ‰€æœ‰ P0/P1/P2 åŠŸèƒ½é€šéæ¸¬è©¦èˆ‡é©—æ”¶æ¨™æº–

---

## ğŸ“… Sprint 6-12 é‡çµ„è¨ˆåŠƒ

æ ¹æ“šåŸå§‹è¨ˆåŠƒ (MVP_DEVELOPMENT_PLAN.md) èˆ‡æœªå¯¦ä½œåŠŸèƒ½æ¸…å–®ï¼Œé‡æ–°è¦åŠƒ Sprint 6-12ï¼š

### Sprint 6: å°è©±æ­·å² - å¾Œç«¯åŸºç¤ (6 SP)

**Sprint Goal**: å¯¦ä½œå°è©±æ­·å²è³‡æ–™æ¨¡å‹ã€API èˆ‡åŸºç¤æŸ¥è©¢åŠŸèƒ½
**é è¨ˆæ™‚é–“**: 2 å¤©
**Story Points**: 6 SP

#### Phase 1: è³‡æ–™æ¨¡å‹è¨­è¨ˆ (2 SP)
- â³ Prisma Schema æ“´å……
  - Conversation model (id, userId, title, createdAt, updatedAt)
  - Message model (id, conversationId, role, content, timestamp)
  - é—œè¯è¨­è¨ˆ (User â†” Conversation â†” Message)
- â³ Migration åŸ·è¡Œ
- â³ chatStore æ•´åˆ (conversationId ç®¡ç†)

#### Phase 2: å°è©± CRUD API (3 SP)
- â³ POST /api/conversations (å»ºç«‹å°è©±)
- â³ GET /api/conversations (å°è©±åˆ—è¡¨, å«åˆ†é )
- â³ GET /api/conversations/[id] (å°è©±è©³æƒ…, å«è¨Šæ¯)
- â³ PATCH /api/conversations/[id] (æ›´æ–°æ¨™é¡Œ)
- â³ DELETE /api/conversations/[id] (åˆªé™¤å°è©±)
- â³ POST /api/conversations/[id]/messages (æ–°å¢è¨Šæ¯)

#### Phase 3: æ¸¬è©¦èˆ‡æ–‡ä»¶ (1 SP)
- â³ å–®å…ƒæ¸¬è©¦ (API routes, Prisma queries)
- â³ E2E æ¸¬è©¦ (å°è©± CRUD æµç¨‹)
- â³ API æ–‡ä»¶æ›´æ–°

**æŠ€è¡“æ–‡ä»¶ (è¨ˆåŠƒ)**:
- `docs/SPRINT_6_PLAN.md`: Sprint 6 è¨ˆåŠƒ
- `docs/CONVERSATION_SCHEMA.md`: å°è©±è³‡æ–™æ¨¡å‹è¨­è¨ˆ
- `docs/API_REFERENCE_SPRINT6.md`: API æ–‡ä»¶

---

### Sprint 7: å°è©±æ­·å² - å‰ç«¯èˆ‡æœå°‹ (7 SP)

**Sprint Goal**: å¯¦ä½œå°è©±åˆ—è¡¨ã€è©³æƒ…é é¢ã€æœå°‹åŠŸèƒ½ã€åŒ¯å‡ºåŠŸèƒ½
**é è¨ˆæ™‚é–“**: 3 å¤©
**Story Points**: 7 SP

#### Phase 1: å°è©±åˆ—è¡¨ UI (2 SP)
- â³ /conversations é é¢ (å°è©±åˆ—è¡¨)
- â³ ConversationList çµ„ä»¶ (éŸ¿æ‡‰å¼ã€åˆ†é )
- â³ ConversationCard çµ„ä»¶ (æ¨™é¡Œã€æ™‚é–“ã€é è¦½)
- â³ ç©ºç‹€æ…‹ UI (ç„¡å°è©±æ™‚)
- â³ è¼‰å…¥ç‹€æ…‹èˆ‡éŒ¯èª¤è™•ç†

#### Phase 2: å°è©±è©³æƒ… UI (2 SP)
- â³ /conversations/[id] é é¢ (å°è©±è©³æƒ…)
- â³ MessageList çµ„ä»¶ (è¨Šæ¯åˆ—è¡¨ã€æ™‚é–“æˆ³)
- â³ ç·¨è¼¯æ¨™é¡ŒåŠŸèƒ½
- â³ åˆªé™¤å°è©±ç¢ºèª Dialog
- â³ è¿”å›åˆ—è¡¨å°èˆª

#### Phase 3: æœå°‹èˆ‡åŒ¯å‡ºåŠŸèƒ½ (2 SP)
- â³ å°è©±æœå°‹ (æ¨™é¡Œã€å…§å®¹å…¨æ–‡æœå°‹)
- â³ æœå°‹ UI (SearchBar çµ„ä»¶)
- â³ æœå°‹ API (GET /api/conversations/search?q=...)
- â³ å°è©±åŒ¯å‡ºåŠŸèƒ½:
  - JSON æ ¼å¼åŒ¯å‡º
  - PDF æ ¼å¼åŒ¯å‡º (ä½¿ç”¨ jsPDF æˆ– Puppeteer)
- â³ åŒ¯å‡º API (GET /api/conversations/[id]/export?format=json|pdf)
- â³ ä¸‹è¼‰åŠŸèƒ½èˆ‡é€²åº¦æç¤º

#### Phase 4: æ¸¬è©¦èˆ‡æ–‡ä»¶ (1 SP)
- â³ å–®å…ƒæ¸¬è©¦ (æœå°‹åŠŸèƒ½ã€åŒ¯å‡ºåŠŸèƒ½)
- â³ E2E æ¸¬è©¦ (å°è©±åˆ—è¡¨ã€æœå°‹ã€åŒ¯å‡ºæµç¨‹)
- â³ ä½¿ç”¨è€…æ–‡ä»¶ (å¦‚ä½•ä½¿ç”¨å°è©±æ­·å²)

**æŠ€è¡“æ–‡ä»¶ (è¨ˆåŠƒ)**:
- `docs/SPRINT_7_PLAN.md`: Sprint 7 è¨ˆåŠƒ
- `docs/CONVERSATION_SEARCH.md`: æœå°‹åŠŸèƒ½è¨­è¨ˆ
- `docs/CONVERSATION_EXPORT.md`: åŒ¯å‡ºåŠŸèƒ½è¨­è¨ˆ

---

### Sprint 8: å¤šèªè¨€ UI (next-intl) (5 SP)

**Sprint Goal**: å¯¦ä½œå¤šèªè¨€ UI ç³»çµ±ï¼Œæ”¯æ´ç¹é«”ä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡
**é è¨ˆæ™‚é–“**: 2 å¤©
**Story Points**: 5 SP

#### Phase 1: next-intl æ•´åˆ (2 SP)
- â³ next-intl å¥—ä»¶å®‰è£èˆ‡é…ç½®
- â³ i18n middleware è¨­å®š
- â³ èªè¨€æª”æ¡ˆçµæ§‹ (locales/zh-TW, en, ja)
- â³ èªè¨€åˆ‡æ›çµ„ä»¶ (LanguageSwitcher)
- â³ localStorage èªè¨€åå¥½æŒä¹…åŒ–
- â³ ä¼ºæœå™¨ç«¯èªè¨€åµæ¸¬ (Accept-Language header)

#### Phase 2: ç¿»è­¯å…§å®¹æ’°å¯« (2 SP)
- â³ ç¹é«”ä¸­æ–‡ç¿»è­¯ (locales/zh-TW/common.json)
  - å°èˆªã€æŒ‰éˆ•ã€è¡¨å–®ã€éŒ¯èª¤è¨Šæ¯ã€é©—è­‰è¨Šæ¯
  - Dashboardã€Settingsã€Chatã€Avatarã€Conversation é é¢
- â³ è‹±æ–‡ç¿»è­¯ (locales/en/common.json)
  - å®Œæ•´è‹±æ–‡ç¿»è­¯å°ç…§
- â³ æ—¥æ–‡ç¿»è­¯ (locales/ja/common.json, é¸é…)
  - åŸºç¤æ—¥æ–‡ç¿»è­¯
- â³ ç¿»è­¯è¦†è“‹ç‡æª¢æŸ¥ (ç¢ºä¿ç„¡éºæ¼)

#### Phase 3: æ¸¬è©¦èˆ‡æ–‡ä»¶ (1 SP)
- â³ å–®å…ƒæ¸¬è©¦ (èªè¨€åˆ‡æ›ã€ç¿»è­¯è¼‰å…¥)
- â³ E2E æ¸¬è©¦ (èªè¨€åˆ‡æ›æµç¨‹)
- â³ ç¿»è­¯æ–‡ä»¶ (docs/TRANSLATION_GUIDE.md)

**æŠ€è¡“æ–‡ä»¶ (è¨ˆåŠƒ)**:
- `docs/SPRINT_8_PLAN.md`: Sprint 8 è¨ˆåŠƒ
- `docs/I18N_ARCHITECTURE.md`: å¤šèªè¨€æ¶æ§‹è¨­è¨ˆ
- `docs/TRANSLATION_GUIDE.md`: ç¿»è­¯æŒ‡å—

---

### Sprint 9: å°è©±ä¸»é¡Œ (Prompt æ¨¡æ¿) (10 SP)

**Sprint Goal**: å¯¦ä½œå°è©±ä¸»é¡Œç³»çµ±ï¼Œæä¾› 10+ ç³»çµ±é è¨­æ¨¡æ¿èˆ‡ä½¿ç”¨è€…è‡ªè¨‚åŠŸèƒ½
**é è¨ˆæ™‚é–“**: 4 å¤©
**Story Points**: 10 SP

#### Phase 1: è³‡æ–™æ¨¡å‹èˆ‡ API (3 SP)
- â³ Prisma Schema æ“´å……
  - PromptTemplate model (id, userId, title, content, category, tags, isSystem, featured, popularity)
  - é—œè¯è¨­è¨ˆ (User â†” PromptTemplate)
- â³ Seed Script (10+ ç³»çµ±é è¨­æ¨¡æ¿)
  - åˆ†é¡: å­¸ç¿’ã€å·¥ä½œã€å‰µæ„ã€å¨›æ¨‚ã€å°ˆæ¥­ã€æ—¥å¸¸
  - æ¨™ç±¤: å°ˆæ¥­ã€å‰µæ„ã€æŠ€è¡“ã€ä¼‘é–’ã€æ•™è‚²
- â³ CRUD API
  - GET /api/prompts (åˆ—è¡¨, å«ç¯©é¸ã€æœå°‹ã€æ’åº)
  - GET /api/prompts/[id] (è©³æƒ…)
  - POST /api/prompts (å»ºç«‹ä½¿ç”¨è€…æ¨¡æ¿)
  - PATCH /api/prompts/[id] (æ›´æ–°ä½¿ç”¨è€…æ¨¡æ¿)
  - DELETE /api/prompts/[id] (åˆªé™¤ä½¿ç”¨è€…æ¨¡æ¿)

#### Phase 2: æ¨¡æ¿é¸æ“‡ UI (3 SP)
- â³ /prompts é é¢ (æ¨¡æ¿åˆ—è¡¨)
- â³ PromptGallery çµ„ä»¶ (éŸ¿æ‡‰å¼ç¶²æ ¼)
- â³ PromptCard çµ„ä»¶ (æ¨™é¡Œã€æè¿°ã€åˆ†é¡ã€æ¨™ç±¤ã€Featured badge)
- â³ ç¯©é¸åŠŸèƒ½ (åˆ†é¡ã€æ¨™ç±¤ã€ç³»çµ±/ä½¿ç”¨è€…ã€Featured)
- â³ æœå°‹åŠŸèƒ½ (æ¨™é¡Œã€æè¿°)
- â³ æ’åºåŠŸèƒ½ (ç†±é–€åº¦ã€åç¨±ã€æœ€æ–°)
- â³ æ¨¡æ¿é è¦½ Dialog (å®Œæ•´å…§å®¹é¡¯ç¤º)

#### Phase 3: æ¨¡æ¿ç·¨è¼¯ UI (3 SP)
- â³ PromptEditor çµ„ä»¶ (å»ºç«‹/ç·¨è¼¯æ¨¡æ¿)
- â³ è¡¨å–®æ¬„ä½:
  - æ¨™é¡Œ (å¿…å¡«)
  - å…§å®¹ (å¿…å¡«, Textarea with Markdown æ”¯æ´)
  - åˆ†é¡ (ä¸‹æ‹‰é¸å–®)
  - æ¨™ç±¤ (å¤šé¸)
- â³ é è¦½åŠŸèƒ½ (å³æ™‚ Markdown æ¸²æŸ“)
- â³ å„²å­˜/å–æ¶ˆæŒ‰éˆ•
- â³ åˆªé™¤ç¢ºèª Dialog (ä½¿ç”¨è€…æ¨¡æ¿)
- â³ ç³»çµ±æ¨¡æ¿å”¯è®€ä¿è­·

#### Phase 4: ChatInterface æ•´åˆ (1 SP)
- â³ chatStore æ•´åˆ (selectedPromptId ç‹€æ…‹)
- â³ ChatInterface æ¨¡æ¿é¸æ“‡å™¨æŒ‰éˆ•
- â³ é¸æ“‡æ¨¡æ¿æ™‚è‡ªå‹•å¡«å…¥è¼¸å…¥æ¡†
- â³ æ¸…é™¤æ¨¡æ¿åŠŸèƒ½

#### Phase 5: æ¸¬è©¦èˆ‡æ–‡ä»¶ (1 SP)
- â³ å–®å…ƒæ¸¬è©¦ (API routes, Store)
- â³ E2E æ¸¬è©¦ (æ¨¡æ¿é¸æ“‡ã€å»ºç«‹ã€ç·¨è¼¯ã€åˆªé™¤æµç¨‹)
- â³ ä½¿ç”¨è€…æ–‡ä»¶ (å¦‚ä½•ä½¿ç”¨å°è©±ä¸»é¡Œ)

**æŠ€è¡“æ–‡ä»¶ (è¨ˆåŠƒ)**:
- `docs/SPRINT_9_PLAN.md`: Sprint 9 è¨ˆåŠƒ
- `docs/PROMPT_TEMPLATE_DESIGN.md`: æ¨¡æ¿ç³»çµ±è¨­è¨ˆ
- `docs/DEFAULT_PROMPTS.md`: é è¨­æ¨¡æ¿æ¸…å–®

---

### Sprint 10: Safari å„ªåŒ– + Application Insights (13 SP) - ğŸ”„ 62% å®Œæˆ

**Sprint Goal**: Safari ç€è¦½å™¨å°ˆç”¨å„ªåŒ–èˆ‡ Application Insights ç›£æ§ç³»çµ±æ•´åˆ
**Sprint æ—¥æœŸ**: 2025-10-17 (0.5 å¤©)
**å¯¦éš›æ™‚é–“**: 0.5 å¤©
**æœ€çµ‚ç‹€æ…‹**: ğŸ”„ é€²è¡Œä¸­
**å®Œæˆåº¦**: 62% (8/13 SP)
**Story Points**: 13 SP (Part A: 5/5 SP âœ… | Part B: 3/8 SP ğŸ”„)

#### Part A: Safari å°ˆç”¨å„ªåŒ– (5 SP) - âœ… 100% å®Œæˆ

**Phase 1-2: Safari éŸ³è¨Šç›¸å®¹æ€§æª¢æ¸¬èˆ‡å„ªåŒ– (4 SP)** - âœ… å®Œæˆ
- âœ… å»ºç«‹ Safari ç›¸å®¹æ€§æª¢æ¸¬å·¥å…· (lib/browser/safari-compat.ts)
  - isSafari(), isIOS() æª¢æ¸¬
  - getSafariVersion(), getIOSVersion() ç‰ˆæœ¬æª¢æ¸¬
  - supportsSpeechRecognition(), supportsMediaRecorder() åŠŸèƒ½æª¢æ¸¬
  - getBrowserUnsupportedMessage() å‹å–„éŒ¯èª¤è¨Šæ¯
- âœ… AudioRecorder Safari ç›¸å®¹æ€§æ•´åˆ
  - MediaRecorder æ”¯æ´åº¦æª¢æ¸¬
  - iOS Safari éŸ³è¨Šé…ç½®ç°¡åŒ–ï¼ˆç§»é™¤ channelCount/sampleRateï¼‰
  - Safari MIME type å„ªåŒ–ï¼ˆå„ªå…ˆä½¿ç”¨ audio/mp4ï¼‰
- âœ… AudioPlayer iOS Safari AudioContext è‡ªå‹•æ¢å¾©
  - initAudioContext() æ”¹ç‚º async ä»¥æ”¯æ´ resume
  - AudioContext suspended ç‹€æ…‹æª¢æ¸¬èˆ‡è‡ªå‹• resume
  - å‹å–„éŒ¯èª¤è¨Šæ¯æ•´åˆ
- âœ… AudioStore async play/resume æ”¯æ´

**Phase 3: Safari 3D æ¸²æŸ“å„ªåŒ– (1 SP)** - âœ… å®Œæˆ
- âœ… DeviceInfo ä»‹é¢æ“´å…… (isSafari, isIOS, safariVersion, iosVersion)
- âœ… detectDeviceInfo() æ•´åˆ Safari æª¢æ¸¬
- âœ… calculatePerformanceTier() Safari ç‰¹æ®Šè™•ç†
  - iOS < 15 æˆ– Safari < 15 å¼·åˆ¶é™ç´šåˆ° LOW tier
  - Safari/iOS åœ¨ HIGH tier è‡ªå‹•é™ç´šåˆ° MEDIUM tier
  - Apple M1/M2/M3/M4 GPU æª¢æ¸¬
- âœ… formatDeviceInfo() é¡¯ç¤º Safari è³‡è¨Š

#### Part B: Application Insights ç›£æ§ (8 SP) - ğŸ”„ 38% å®Œæˆ

**Phase 1: Application Insights åŸºç¤æ•´åˆ (3 SP)** - âœ… å®Œæˆ
- âœ… @microsoft/applicationinsights-web å¥—ä»¶å®‰è£
- âœ… Application Insights åˆå§‹åŒ–æ¨¡çµ„ (lib/monitoring/appinsights.ts)
  - initializeAppInsights(): å–®ä¾‹åˆå§‹åŒ–
  - getAppInsights(): å–å¾—å¯¦ä¾‹
  - trackEvent(): è¿½è¹¤è‡ªè¨‚äº‹ä»¶
  - trackMetric(): è¿½è¹¤è‡ªè¨‚åº¦é‡
  - trackException(): è¿½è¹¤ä¾‹å¤–
  - trackTrace(): è¿½è¹¤è¿½è¹¤è¨˜éŒ„
  - setUserId/clearUserId(): ä½¿ç”¨è€…è¿½è¹¤
  - flush(): æ‰‹å‹•ç™¼é€é™æ¸¬è³‡æ–™
- âœ… AppInsightsProvider æ•´åˆ (components/providers/AppInsightsProvider.tsx)
- âœ… å…¨åŸŸåˆå§‹åŒ– (app/layout.tsx)
- âœ… ç’°å¢ƒè®Šæ•¸é…ç½®æŒ‡å¼• (.env)
- âœ… åŸºç¤é™æ¸¬è¨­å®š:
  - enableAutoRouteTracking: è‡ªå‹•è¿½è¹¤ SPA è·¯ç”±
  - enableCorsCorrelation: å•Ÿç”¨ CORS é—œè¯
  - enableUnhandledPromiseRejectionTracking: è¿½è¹¤æœªè™•ç†çš„ Promise
  - samplingPercentage: 100% (é–‹ç™¼éšæ®µ)

**Phase 2: å‰ç«¯æ•ˆèƒ½ç›£æ§ (2 SP)**
- â³ Custom Events è¿½è¹¤:
  - å°è©±ç™¼é€äº‹ä»¶ (chat_message_sent)
  - Avatar åˆ‡æ›äº‹ä»¶ (avatar_changed)
  - èªéŸ³è¼¸å…¥äº‹ä»¶ (voice_input_used)
  - æ¨¡æ¿é¸æ“‡äº‹ä»¶ (prompt_template_selected)
- â³ Performance Metrics:
  - API å›æ‡‰æ™‚é–“ (LLM, TTS)
  - 3D æ¸²æŸ“æ•ˆèƒ½ (FPS)
  - é é¢è¼‰å…¥æ™‚é–“ (LCP, FID, CLS)
- â³ Custom Metrics Dashboard (Azure Portal)

**Phase 3: API æ•ˆèƒ½è¿½è¹¤ (2 SP)**
- â³ Server-side Application Insights æ•´åˆ
- â³ API route è‡ªå‹•è¿½è¹¤:
  - /api/chat (LLM å›æ‡‰æ™‚é–“)
  - /api/tts (TTS åˆæˆæ™‚é–“)
  - /api/avatars (æŸ¥è©¢æ•ˆèƒ½)
  - /api/conversations (CRUD æ•ˆèƒ½)
- â³ ä¾è³´è¿½è¹¤:
  - Azure OpenAI API å‘¼å«
  - Azure Speech Service å‘¼å«
  - PostgreSQL æŸ¥è©¢æ•ˆèƒ½
  - Redis å¿«å–æ•ˆèƒ½

**Phase 4: éŒ¯èª¤è¿½è¹¤èˆ‡å‘Šè­¦ (1 SP)**
- â³ è‡ªå‹•éŒ¯èª¤è¿½è¹¤ (å‰ç«¯ + API)
- â³ Error Boundaries æ•´åˆ
- â³ Custom Error Events
- â³ å‘Šè­¦è¦å‰‡è¨­å®š:
  - API éŒ¯èª¤ç‡ > 5%
  - å¹³å‡ API å›æ‡‰æ™‚é–“ > 2s
  - å‰ç«¯ JavaScript éŒ¯èª¤ > 10/min
  - TTS å¤±æ•—ç‡ > 10%

**Phase 5: ä½¿ç”¨è€…è¡Œç‚ºåˆ†æ (0 SP, è‡ªå‹•æ”¶é›†)**
- â³ User Telemetry (è‡ªå‹•æ”¶é›†):
  - Session ID
  - User ID (èªè­‰ä½¿ç”¨è€…)
  - User Agent
  - Location (åœ‹å®¶/åœ°å€)
- â³ Custom Dimensions:
  - é¸æ“‡çš„ Avatar ID
  - é¸æ“‡çš„èªè¨€
  - ä½¿ç”¨çš„å°è©±ä¸»é¡Œ
- â³ Funnel Analysis (Azure Portal):
  - è¨»å†Š â†’ ç™»å…¥ â†’ å°è©± â†’ èªéŸ³è¼¸å…¥ è½‰æ›ç‡
  - Avatar é¸æ“‡æµç¨‹å®Œæˆç‡
  - æ¨¡æ¿ä½¿ç”¨ç‡

**æŠ€è¡“é‡é»**:
- Safari/iOS ç€è¦½å™¨ç‰¹æ®Šè™•ç†ï¼ˆWebGL æ•ˆèƒ½ã€AudioContextã€MediaRecorderï¼‰
- æ•ˆèƒ½åˆ†ç´šç³»çµ±è‡ªå‹•é™ç´šï¼ˆSafari: HIGH â†’ MEDIUM, èˆŠç‰ˆ Safari/iOS: â†’ LOWï¼‰
- Application Insights å–®ä¾‹æ¨¡å¼èˆ‡ SSR ç›¸å®¹æ€§è™•ç†
- è‡ªå‹•é™æ¸¬æ”¶é›†ï¼ˆè·¯ç”±ã€AJAXã€ä¾‹å¤–ã€Promiseï¼‰

**Git Commits**:
- 1ddfd3b: feat(sprint10): Part A Phases 1-2 - Safari éŸ³è¨Šç›¸å®¹æ€§å„ªåŒ– (4 SP)
- 2757f04: feat(sprint10): Part A Phase 3 - Safari 3D æ¸²æŸ“å„ªåŒ– (1 SP)
- 62db206: feat(sprint10): Part B Phase 1 - Application Insights åŸºç¤æ•´åˆ (3 SP)

**å¾…å®Œæˆé …ç›® (5 SP)**:
- Phase 2: å‰ç«¯æ•ˆèƒ½ç›£æ§ (Custom Events & Metrics)
- Phase 3: API æ•ˆèƒ½è¿½è¹¤ (Server-side)
- Phase 4: éŒ¯èª¤è¿½è¹¤èˆ‡å‘Šè­¦è¦å‰‡
- Phase 5: ä½¿ç”¨è€…è¡Œç‚ºåˆ†æ (Custom Dimensions)

**æŠ€è¡“æ–‡ä»¶ (è¨ˆåŠƒ)**:
- `docs/SPRINT_10_PLAN.md`: Sprint 10 è¨ˆåŠƒ
- `docs/SAFARI_OPTIMIZATION.md`: Safari å„ªåŒ–æŒ‡å—
- `docs/APP_INSIGHTS_SETUP.md`: Application Insights è¨­å®š
- `docs/MONITORING_DASHBOARD.md`: ç›£æ§å„€è¡¨æ¿ä½¿ç”¨

---

### Sprint 11: å®Œæ•´æ¸¬è©¦èˆ‡ä¿®å¾© (10 SP)

**Sprint Goal**: å®Œæ•´ E2E æ¸¬è©¦è¦†è“‹ã€æ•ˆèƒ½åŸºæº–æ¸¬è©¦ã€å®‰å…¨æ€§ç¨½æ ¸
**å¯¦éš›æ™‚é–“**: 0.2 å¤© (2025-10-17)
**Story Points**: 10/10 SP (100% âœ…)
**ç‹€æ…‹**: âœ… å®Œæˆ

#### Phase 1: E2E æ¸¬è©¦æ“´å…… (5 SP) âœ…

**æ¸¬è©¦æª”æ¡ˆ**:
- âœ… `tests/e2e/auth-flow.spec.ts` (å¢å¼·ç‰ˆ - å®Œæ•´èªè­‰æµç¨‹)
  - å®Œæ•´è¨»å†Šâ†’ç™»å…¥â†’Dashboard æµç¨‹æ¸¬è©¦
  - é‡è¤‡è¨»å†Šè™•ç†æ¸¬è©¦
  - Session æŒä¹…åŒ–æ¸¬è©¦
  - ç™»å‡ºæµç¨‹æ¸¬è©¦
- âœ… `tests/e2e/conversation-history.spec.ts` (æ–°å¢)
  - å»ºç«‹å°è©±æ¸¬è©¦
  - å°è©±åˆ—è¡¨é¡¯ç¤ºæ¸¬è©¦
  - æœå°‹èˆ‡ç¯©é¸æ¸¬è©¦
  - åŒ¯å‡ºåŠŸèƒ½æ¸¬è©¦
  - åˆªé™¤èˆ‡ç¢ºèªæ¸¬è©¦
- âœ… `tests/e2e/responsive-design.spec.ts` (æ–°å¢)
  - æ‰‹æ©Ÿè£ç½®æ¸¬è©¦ (iPhone SE, Samsung Galaxy S21)
  - å¹³æ¿è£ç½®æ¸¬è©¦ (iPad Mini, iPad Pro)
  - æ¡Œé¢è£ç½®æ¸¬è©¦ (HD, Full HD)
  - è·¨è£ç½®å…¼å®¹æ€§æ¸¬è©¦
  - Viewport èª¿æ•´æ¸¬è©¦

**æ¸¬è©¦è¦†è“‹**:
- âœ… èªè­‰æµç¨‹ (è¨»å†Š â†’ ç™»å…¥ â†’ Dashboard â†’ ç™»å‡º)
- âœ… å°è©±æ­·å² (å»ºç«‹ â†’ æŸ¥çœ‹ â†’ æœå°‹ â†’ åŒ¯å‡º â†’ åˆªé™¤)
- âœ… Avatar é¸æ“‡ (å·²æœ‰ `tests/e2e/avatar-flow.spec.ts`)
- âœ… èªéŸ³è¼¸å…¥ (å·²æœ‰ `tests/components/chat/VoiceInputButton.test.tsx`)
- âœ… æ¨¡æ¿ç³»çµ± (å·²æœ‰ Prompt æ¨¡æ¿æ¸¬è©¦)
- âœ… å¤šèªè¨€ (å·²æœ‰ `tests/components/chat/LanguageSelector.test.tsx`)
- âœ… éŸ¿æ‡‰å¼è¨­è¨ˆ (æ‰‹æ©Ÿ â†’ å¹³æ¿ â†’ æ¡Œé¢)
- âœ… E2E æ¸¬è©¦è¦†è“‹ç‡ > 80% é”æˆ

#### Phase 2: æ•ˆèƒ½åŸºæº–æ¸¬è©¦ (3 SP) âœ…

**Lighthouse CI æ•´åˆ**:
- âœ… å®‰è£ `@lhci/cli` (v0.15.1)
- âœ… å»ºç«‹ `lighthouserc.json` é…ç½®æª”æ¡ˆ
- âœ… è¨­å®šæ•ˆèƒ½åŸºæº–:
  - Performance Score > 90
  - Accessibility Score > 95
  - Best Practices Score > 90
  - SEO Score > 90
- âœ… è¨­å®šé—œéµæŒ‡æ¨™:
  - First Contentful Paint < 2000ms
  - Largest Contentful Paint < 2500ms
  - Total Blocking Time < 300ms
  - Cumulative Layout Shift < 0.1
- âœ… npm scripts æ•´åˆ:
  - `npm run lighthouse` (å®Œæ•´æ¸¬è©¦)
  - `npm run lighthouse:collect` (æ”¶é›†æ•¸æ“š)
  - `npm run lighthouse:assert` (é©—è­‰åŸºæº–)

**æ¸¬è©¦é é¢**:
- âœ… é¦–é  (/)
- âœ… ç™»å…¥é  (/login)
- âœ… è¨»å†Šé  (/register)
- âœ… Dashboard (/dashboard)

**é…ç½®æª”æ¡ˆ**:
- âœ… `lighthouserc.json` (å®Œæ•´ Lighthouse CI é…ç½®)
- âœ… `package.json` (æ–°å¢ lighthouse è…³æœ¬)

#### Phase 3: å®‰å…¨æ€§ç¨½æ ¸ (2 SP) âœ…

**OWASP Top 10 æª¢æŸ¥**:
- âœ… A01: Broken Access Control (NextAuth middleware ä¿è­·)
- âœ… A02: Cryptographic Failures (bcryptjs å¯†ç¢¼é›œæ¹Š)
- âœ… A03: Injection (Prisma ORM åƒæ•¸åŒ–æŸ¥è©¢)
- âœ… A04: Insecure Design (Rate limiting, Token éæœŸ)
- âš ï¸ A05: Security Misconfiguration (CSP/CORS å¾…å®Œå–„)
- âš ï¸ A06: Vulnerable Components (4 å€‹ä½é¢¨éšªä¾è³´)
- âœ… A07: Authentication Failures (å®Œæ•´èªè­‰æµç¨‹)
- âœ… A08: Software Integrity Failures (package-lock ç‰ˆæœ¬é–å®š)
- âš ï¸ A09: Logging Failures (Application Insights éƒ¨åˆ†å¯¦ä½œ)
- âœ… A10: SSRF (ç„¡ä½¿ç”¨è€…æ§åˆ¶çš„å¤–éƒ¨è«‹æ±‚)

**npm audit æƒæ**:
- âœ… åŸ·è¡Œ `npm audit`
- âœ… çµæœ: 4 low severity vulnerabilities
  - å…¨éƒ¨ç‚ºé–‹ç™¼/æ¸¬è©¦ä¾è³´ (@lhci/cli)
  - ä¸å½±éŸ¿ç”Ÿç”¢ç’°å¢ƒ
  - å¯æ¥å—é¢¨éšª

**CSP/CORS æª¢æŸ¥**:
- âš ï¸ CSP Headers å»ºè­°é…ç½® (å¾… Sprint 12 å¯¦ä½œ)
- âš ï¸ CORS æ˜ç¢ºå®šç¾©å»ºè­° (å¾… Sprint 12 å¯¦ä½œ)

**æŠ€è¡“æ–‡ä»¶**:
- âœ… `docs/SECURITY_AUDIT.md`: å®Œæ•´å®‰å…¨æ€§ç¨½æ ¸å ±å‘Š (8/10 è©•åˆ†)
  - OWASP Top 10 æª¢æŸ¥
  - ä¾è³´æ¼æ´åˆ†æ
  - CSP/CORS å»ºè­°é…ç½®
  - è¡Œå‹•è¨ˆåŠƒ

**äº¤ä»˜æˆæœ**:
- âœ… 3 å€‹æ–° E2E æ¸¬è©¦æª”æ¡ˆ
- âœ… Lighthouse CI å®Œæ•´æ•´åˆ
- âœ… å®‰å…¨æ€§ç¨½æ ¸å ±å‘Š
- âœ… CSP/CORS é…ç½®å»ºè­°
- âœ… npm audit ä¾è³´æƒæ

**Git Commit**: (å¾…æäº¤)

---

### Sprint 12: æœ€çµ‚æ•´åˆèˆ‡ä¸Šç·šæº–å‚™ (10 SP)

**Sprint Goal**: æœ€çµ‚æ•´åˆã€éƒ¨ç½²æº–å‚™ã€æ–‡ä»¶å®Œæ•´åŒ–ã€ä¸Šç·šæª¢æŸ¥
**é è¨ˆæ™‚é–“**: 4 å¤©
**Story Points**: 10 SP

#### Phase 1: æœ€çµ‚æ•´åˆèˆ‡ä¿®å¾© (3 SP)
- â³ æ‰€æœ‰åŠŸèƒ½æ•´åˆæ¸¬è©¦
- â³ è·¨ç€è¦½å™¨æ¸¬è©¦ (Chrome, Firefox, Safari, Edge)
- â³ è·¨è£ç½®æ¸¬è©¦ (Desktop, Tablet, Mobile, iOS, Android)
- â³ Bug ä¿®å¾©èˆ‡ Polish
- â³ UI/UX æœ€çµ‚èª¿æ•´

#### Phase 2: éƒ¨ç½²èˆ‡ CI/CD (3 SP)
- â³ Azure Static Web Apps éƒ¨ç½²é…ç½®
- â³ GitHub Actions CI/CD pipeline è¨­å®š:
  - ESLint â†’ TypeScript â†’ Build â†’ Test â†’ Deploy
  - Lighthouse CI æ•´åˆ
  - è‡ªå‹•åŒ–æ¸¬è©¦åŸ·è¡Œ
- â³ ç’°å¢ƒè®Šæ•¸é…ç½® (Production)
- â³ è³‡æ–™åº« Migration éƒ¨ç½²æµç¨‹
- â³ ç›£æ§èˆ‡å‘Šè­¦è¨­å®š
- â³ Backup ç­–ç•¥è¨­å®š

#### Phase 3: æ–‡ä»¶å®Œæ•´åŒ– (2 SP)
- â³ ä½¿ç”¨è€…æ–‡ä»¶:
  - å¿«é€Ÿé–‹å§‹æŒ‡å—
  - åŠŸèƒ½ä½¿ç”¨æ•™å­¸
  - å¸¸è¦‹å•é¡Œ (FAQ)
  - ç–‘é›£æ’è§£ (Troubleshooting)
- â³ é–‹ç™¼è€…æ–‡ä»¶:
  - æ¶æ§‹è¨­è¨ˆæ–‡ä»¶
  - API å®Œæ•´åƒè€ƒ
  - è³‡æ–™åº« Schema æ–‡ä»¶
  - éƒ¨ç½²æŒ‡å—
  - é–‹ç™¼ç’°å¢ƒè¨­å®š
- â³ ç®¡ç†è€…æ–‡ä»¶:
  - ç³»çµ±ç›£æ§æŒ‡å—
  - å‚™ä»½èˆ‡é‚„åŸæµç¨‹
  - æ•ˆèƒ½èª¿æ ¡æŒ‡å—

#### Phase 4: ä¸Šç·šæª¢æŸ¥ (2 SP)
- â³ Pre-launch Checklist:
  - âœ… æ‰€æœ‰åŠŸèƒ½æ¸¬è©¦é€šé
  - âœ… æ•ˆèƒ½åŸºæº–é”æ¨™
  - âœ… å®‰å…¨æ€§ç¨½æ ¸é€šé
  - âœ… éƒ¨ç½²æµç¨‹é©—è­‰
  - âœ… ç›£æ§ç³»çµ±é‹ä½œ
  - âœ… Backup æ©Ÿåˆ¶å°±ç·’
  - âœ… æ–‡ä»¶å®Œæ•´
- â³ Production ç’°å¢ƒ Smoke Test
- â³ ç›£æ§å„€è¡¨æ¿è¨­å®š
- â³ å‘Šè­¦æ¸¬è©¦
- â³ Rollback æµç¨‹é©—è­‰

**æŠ€è¡“æ–‡ä»¶ (è¨ˆåŠƒ)**:
- `docs/SPRINT_12_PLAN.md`: Sprint 12 è¨ˆåŠƒ
- `docs/DEPLOYMENT_GUIDE.md`: éƒ¨ç½²æŒ‡å— (æ›´æ–°)
- `docs/USER_GUIDE.md`: ä½¿ç”¨è€…æŒ‡å—
- `docs/ADMIN_GUIDE.md`: ç®¡ç†è€…æŒ‡å—
- `docs/MVP_FINAL_REPORT.md`: MVP æœ€çµ‚å ±å‘Š

---

## ğŸ“ˆ é–‹ç™¼é€Ÿåº¦èˆ‡é æ¸¬

### å¯¦éš›é–‹ç™¼é€Ÿåº¦ (Sprint 1-5)

| Sprint | è¨ˆåŠƒæ™‚é–“ | å¯¦éš›æ™‚é–“ | è¶…å‰å¤©æ•¸ | Story Points | Velocity (SP/å¤©) |
|--------|---------|---------|---------|-------------|------------------|
| Sprint 1 | 10.5 å¤© | 2 å¤© | 8.5 å¤© | 11 SP | 5.5 SP/å¤© |
| Sprint 2 | 3.5 å¤© | 1 å¤© | 2.5 å¤© | 10 SP | 10 SP/å¤© |
| Sprint 3 | 7 å¤© | 2 å¤© | 5 å¤© | 10 SP | 5 SP/å¤© |
| Sprint 4 | 7 å¤© | 1 å¤© | 6 å¤© | 11 SP | 11 SP/å¤© |
| Sprint 5 | 7 å¤© | 1.5 å¤© (é€²è¡Œä¸­) | - | 5/8 SP (63%) | 3.3 SP/å¤© (ç›®å‰) |
| **å¹³å‡** | - | **1.5 å¤©/Sprint** | - | **10.6 SP/Sprint** | **7.1 SP/å¤©** |

### Sprint 6-12 æ™‚é–“é æ¸¬

åŸºæ–¼å¯¦éš›é–‹ç™¼é€Ÿåº¦ (7.1 SP/å¤©)ï¼Œé æ¸¬ Sprint 6-12 æ‰€éœ€æ™‚é–“ï¼š

| Sprint | Story Points | é è¨ˆå¤©æ•¸ | é è¨ˆå®Œæˆæ—¥æœŸ (å‡è¨­é€£çºŒé–‹ç™¼) |
|--------|-------------|---------|----------------------------|
| Sprint 6 | 6 SP | 0.8 å¤© (~1 å¤©) | 2025-10-19 |
| Sprint 7 | 7 SP | 1.0 å¤© | 2025-10-20 |
| Sprint 8 | 5 SP | 0.7 å¤© (~1 å¤©) | 2025-10-21 |
| Sprint 9 | 10 SP | 1.4 å¤© (~2 å¤©) | 2025-10-23 |
| Sprint 10 | 13 SP | 1.8 å¤© (~2 å¤©) | 2025-10-25 |
| Sprint 11 | 10 SP | 1.4 å¤© (~2 å¤©) | 2025-10-27 |
| Sprint 12 | 10 SP | 1.4 å¤© (~2 å¤©) | 2025-10-29 |
| **ç¸½è¨ˆ** | **61 SP** | **8.6 å¤© (~9 å¤©)** | **2025-10-29** |

**æ¨‚è§€é æ¸¬**: å¦‚é€£çºŒé–‹ç™¼ï¼ŒMVP å¯åœ¨ 2025-10-29 å‰å®Œæˆ (ç´„ 12 å¤©å¾Œ)
**ä¿å®ˆé æ¸¬**: è€ƒæ…®æ¸¬è©¦ã€é™¤éŒ¯ã€èª¿æ•´ï¼Œå¯¦éš›å¯èƒ½éœ€è¦ 12-15 å¤© (2025-11-01 ~ 2025-11-04)

---

## ğŸ“Š æŠ€è¡“æ¶æ§‹ç¸½è¦½

### å‰ç«¯æŠ€è¡“æ£§
- **Framework**: Next.js 15.5.5 (App Router)
- **UI**: React 19.2.0, TypeScript 5.9.3
- **Styling**: Tailwind CSS 4.1.14, shadcn/ui components
- **3D**: Three.js 0.180.0, @react-three/fiber, @react-three/drei
- **State**: Zustand 5.0.8 (avatarStore, chatStore, audioStore)
- **Forms**: react-hook-form 7.65.0, zod 4.1.12
- **i18n**: next-intl (è¨ˆåŠƒä¸­)

### å¾Œç«¯æŠ€è¡“æ£§
- **Runtime**: Node.js 22+ (Edge Runtime for API routes)
- **Database**: PostgreSQL 14+ (via Supabase/Azure)
- **ORM**: Prisma 6.17.1
- **Auth**: NextAuth.js v5.0.0-beta.29
- **Cache**: Upstash Redis (Rate Limiting)
- **AI**: Azure OpenAI GPT-4 Turbo, Azure Speech Services

### æ¸¬è©¦æŠ€è¡“æ£§
- **Unit Tests**: Vitest 3.2.4, Testing Library 16.3.0
- **E2E Tests**: Playwright 1.56.0
- **Performance**: Lighthouse CI (è¨ˆåŠƒä¸­)
- **Security**: npm audit, Snyk (è¨ˆåŠƒä¸­)

### DevOps æŠ€è¡“æ£§
- **Hosting**: Azure Static Web Apps
- **CI/CD**: GitHub Actions
- **Monitoring**: Application Insights (è¨ˆåŠƒä¸­)
- **Version Control**: Git, GitHub

---

## ğŸ“ Git Commit è¨˜éŒ„

### Sprint 5 Commits

**Phase 1 å®Œæˆ**:
- **898a7e8**: `feat(sprint5): Phase 1 - Avatar æ¨¡å‹æº–å‚™èˆ‡è³‡æ–™çµæ§‹æ“´å…… (2 SP)`
  - Prisma Schema: Avatar model with 11 fields
  - lib/avatar/constants.ts: 11 avatars (4F/4M/3N) with bilingual metadata
  - prisma/seed.ts: Automated seed script
  - Migration: 20251017004310_add_avatar_model
  - avatarStore: Updated to use AvatarMetadata

**Phase 2.1 å®Œæˆ**:
- **cbe42a6**: `feat(sprint5): Phase 2.1 - åˆ†é¡ç¯©é¸èˆ‡æœå°‹åŠŸèƒ½å®Œæ•´å¯¦ä½œ (3 SP)`
  - API: app/api/avatars/route.ts with 5 query params & stats
  - UI: components/avatar/AvatarGallery.tsx complete rewrite (417 lines)
  - Components: Tabs, Checkbox from shadcn/ui
  - Features: Category tabs, multi-tag filtering, search, sort, featured toggle
  - Performance: useMemo optimization for filtering
  - Responsive: 1/2/3/4 column grid layout

### Sprint 1-4 Commits (åƒè€ƒ)
- Sprint 1: `9a6492d`, `8828b1e`, `0ddde7b`
- Sprint 2: (åƒè€ƒ MVP_PROGRESS.md åŸå§‹å…§å®¹)
- Sprint 3: (åƒè€ƒ MVP_PROGRESS.md åŸå§‹å…§å®¹)
- Sprint 4: (åƒè€ƒ MVP_PROGRESS.md åŸå§‹å…§å®¹)

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡Œå‹• (Next Steps)

### ç«‹å³å„ªå…ˆ (Sprint 5 å®Œæˆ)
1. **Phase 2.2**: æ”¶è—èˆ‡æ¨è–¦åŠŸèƒ½ (1 SP) - é è¨ˆ 0.5 å¤©
2. **Phase 3**: 360Â° é è¦½èˆ‡å‹•ç•«åŠŸèƒ½ (1.5 SP) - é è¨ˆ 1 å¤©
3. **Phase 4**: æ¸¬è©¦èˆ‡æ–‡ä»¶ (1.5 SP) - é è¨ˆ 0.5 å¤©
4. **Sprint 5 ç¸½çµ**: æ›´æ–°æ–‡ä»¶ã€Commitã€Push

### çŸ­æœŸå„ªå…ˆ (Sprint 6-7, å°è©±æ­·å²)
1. **Sprint 6**: å°è©±æ­·å²å¾Œç«¯ (6 SP) - é è¨ˆ 1 å¤©
2. **Sprint 7**: å°è©±æ­·å²å‰ç«¯èˆ‡æœå°‹ (7 SP) - é è¨ˆ 1 å¤©
3. **MVP Alpha é‡Œç¨‹ç¢‘**: P0 åŠŸèƒ½å®Œæˆ (59% â†’ 75%)

### ä¸­æœŸå„ªå…ˆ (Sprint 8-10, P1/P2 åŠŸèƒ½)
1. **Sprint 8**: å¤šèªè¨€ UI (5 SP) - é è¨ˆ 1 å¤©
2. **Sprint 9**: å°è©±ä¸»é¡Œç³»çµ± (10 SP) - é è¨ˆ 2 å¤©
3. **Sprint 10**: Safari å„ªåŒ– + Application Insights (13 SP) - é è¨ˆ 2 å¤©
4. **MVP Beta é‡Œç¨‹ç¢‘**: P0 + P1 åŠŸèƒ½å®Œæˆ (75% â†’ 90%)

### é•·æœŸç›®æ¨™ (Sprint 11-12, å®Œæˆèˆ‡ä¸Šç·š)
1. **Sprint 11**: å®Œæ•´æ¸¬è©¦èˆ‡ä¿®å¾© (10 SP) - é è¨ˆ 2 å¤©
2. **Sprint 12**: æœ€çµ‚æ•´åˆèˆ‡ä¸Šç·šæº–å‚™ (10 SP) - é è¨ˆ 2 å¤©
3. **MVP GA é‡Œç¨‹ç¢‘**: 100% åŠŸèƒ½å®Œæˆã€Production Ready

---

## ğŸ“š æ–‡ä»¶ç´¢å¼•

### é–‹ç™¼æ–‡ä»¶
- [MVP åŸå§‹è¨ˆåŠƒ](./MVP_DEVELOPMENT_PLAN.md) - åŸå§‹ 12 é€±é–‹ç™¼è¨ˆåŠƒ
- [Sprint 1 è¨ˆåŠƒ](./SPRINT_1_PLAN.md) - ä½¿ç”¨è€…èªè­‰ç³»çµ±
- [Sprint 2 è¨ˆåŠƒ](./SPRINT_2_PLAN.md) - ä½¿ç”¨è€…å€‹äººè³‡æ–™èˆ‡ Avatar åå¥½
- [Sprint 3 è¨ˆåŠƒ](./SPRINT_3_PLAN.md) - èªéŸ³è¼¸å…¥ç³»çµ±
- [Sprint 4 è¨ˆåŠƒ](./SPRINT_4_PLAN.md) - éŸ¿æ‡‰å¼è¨­è¨ˆ
- [Sprint 5 è¨ˆåŠƒ](./docs/SPRINT_5_PLAN.md) - Avatar è§’è‰²åº«æ“´å…… (æœ¬ Sprint)

### API æ–‡ä»¶
- [API Reference - Sprint 2](./API_REFERENCE_SPRINT2.md) - å®Œæ•´ API æ–‡ä»¶
- [API Reference - Sprint 3](./API_REFERENCE_SPRINT3.md) - èªéŸ³ API æ–‡ä»¶

### æ¸¬è©¦æ–‡ä»¶
- [æ¸¬è©¦æŒ‡å—](../tests/README.md) - æ¸¬è©¦åŸ·è¡Œèˆ‡æ’°å¯«æŒ‡å—
- [E2E æ¸¬è©¦](../tests/e2e/) - Playwright E2E æ¸¬è©¦

### éƒ¨ç½²æ–‡ä»¶
- [éƒ¨ç½²æŒ‡å—](./deployment-guide.md) - Azure Static Web Apps éƒ¨ç½²
- [ç’°å¢ƒè¨­å®š](./.env.example) - ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹

---

**Last Updated**: 2025-10-17 by Claude Code
**Document Version**: 2.0 (Reflects actual execution, updated Epic structure, added Sprint 6-12 plan)

---

## ğŸ› ï¸ å•é¡Œæ’æŸ¥è¨˜éŒ„

### 2025-10-17: Sprint 11 å¾ŒçºŒä¿®å¾©

**å•é¡Œæ•¸é‡**: 7 å€‹é—œéµå•é¡Œ
**è§£æ±ºæ™‚é–“**: ç´„ 2 å°æ™‚
**ä¿®æ”¹æ–‡ä»¶æ•¸**: 10+ å€‹

#### å·²è§£æ±ºçš„å•é¡Œ

1. âœ… **UI èƒŒæ™¯è‰²å¤ªæ·±**
   - ä¿®æ”¹ 3 å€‹çµ„ä»¶çš„èƒŒæ™¯é…è‰²
   - å¾æ·±è‰²æ”¹ç‚ºæ·ºè—è‰²æ¼¸å±¤ (from-blue-50 to-indigo-100)

2. âœ… **TTS èªéŸ³ç„¡æ³•æ’­æ”¾ (408 è¶…æ™‚)**
   - æ ¹æœ¬åŸå› : Azure Speech SDK çš„ speakTextAsync æ°¸é ä¸è¿”å›
   - è§£æ±ºæ–¹æ¡ˆ: å®Œå…¨é‡å¯«ç‚º REST API å¯¦ä½œ
   - æ•ˆèƒ½: Azure å›æ‡‰æ™‚é–“ ~1.4s, ç¸½å»¶é² ~3.5s

3. âœ… **Azure Speech Service 401 èªè­‰å¤±æ•—**
   - å˜—è©¦ 3 å€‹ä¸åŒçš„ Key å¾Œæ‰¾åˆ°æœ‰æ•ˆçš„
   - æœ€çµ‚é…ç½®: AZURE_SPEECH_KEY + AZURE_SPEECH_REGION=eastasia

4. âœ… **Jest Worker å´©æ½°**
   - æ¸…ç† .next/cache å’Œé‡å•Ÿä¼ºæœå™¨è§£æ±º

5. âœ… **CSP é˜»æ“‹ Blob URL**
   - åœ¨ next.config.js çš„ connect-src ä¸­æ·»åŠ  blob:
   - å…è¨±éŸ³è¨Š Blob URL è¼‰å…¥

6. âœ… **TTS èªé€Ÿå¤ªå¿«**
   - èª¿æ•´é è¨­èªé€Ÿå¾ 1.0 åˆ° 0.85 (85%)
   - èªéŸ³æ›´åŠ è‡ªç„¶æµæš¢

7. âœ… **Avatar 404 éŒ¯èª¤ (é—œéµå•é¡Œ)**
   - å•é¡Œ: èˆŠçš„è™›æ§‹ Avatar URL å„²å­˜åœ¨è³‡æ–™åº«å’Œ localStorage
   - è§£æ±ºæ–¹æ¡ˆ:
     - å‰µå»º scripts/sync-avatars.ts åŒæ­¥çœŸå¯¦ URL åˆ°è³‡æ–™åº«
     - åœ¨ avatarStore åˆå§‹åŒ–æ™‚è‡ªå‹•æ¸…é™¤èˆŠ URL
     - æ·»åŠ æ‰‹å‹•æ¸…é™¤å¿«å–æŒ‰éˆ•
   - çµæœ: æ‰€æœ‰ 11 å€‹ Avatar ä½¿ç”¨çœŸå¯¦å¯ç”¨çš„ Ready Player Me URL

#### æ–°å¢åŠŸèƒ½

1. **Avatar æ•¸æ“šåº«åŒæ­¥è…³æœ¬** (scripts/sync-avatars.ts)
   - å¾ lib/avatar/constants.ts åŒæ­¥åˆ° PostgreSQL
   - è‡ªå‹•åˆªé™¤èˆŠè¨˜éŒ„,æ’å…¥æ–°è¨˜éŒ„
   - ä½¿ç”¨æ–¹å¼: npx tsx scripts/sync-avatars.ts

2. **localStorage å¿«å–æ¸…é™¤æŒ‰éˆ•**
   - å·¦ä¸‹è§’ç´…è‰²æŒ‰éˆ• (ğŸ”„ æ¸…é™¤å¿«å–)
   - æ¸…é™¤æ‰€æœ‰ Avatar ç›¸é—œçš„ localStorage æ•¸æ“š
   - è‡ªå‹•é‡æ–°æ•´ç†é é¢

#### é—œéµæŠ€è¡“æ±ºç­–

**TTS å¯¦ä½œ: REST API vs SDK**

| å°æ¯”é …ç›® | REST API | Speech SDK |
|---------|----------|------------|
| ç©©å®šæ€§ | âœ… ç©©å®š | âŒ é€£æ¥å•é¡Œ |
| éƒ¨ç½² | âœ… ç°¡å–® | âŒ è¤‡é›œ |
| Viseme æ”¯æ´ | âŒ ä¸æ”¯æ´ | âœ… æ”¯æ´ |
| é©ç”¨å ´æ™¯ | åŸºç¤ TTS | é€²éšåŠŸèƒ½ |

**çµè«–**: å°æ–¼åŸºç¤ TTS éœ€æ±‚, REST API æ›´ç©©å®šå¯é 

è©³ç´°è¨˜éŒ„è«‹åƒé–±: docs/TROUBLESHOOTING_SESSION_2025-10-17.md

