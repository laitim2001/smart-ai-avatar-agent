# AI Agent 知識庫管理系統 - 使用手冊

> **版本**: 1.0.0
> **更新日期**: 2025-10-21
> **適用對象**: CDO、數據團隊、AI Agent 管理員

---

## 📋 目錄

1. [系統概述](#系統概述)
2. [快速開始](#快速開始)
3. [知識庫總覽](#知識庫總覽)
4. [Persona 定義管理](#persona-定義管理)
5. [FAQ 管理](#faq-管理)
6. [KPI 字典管理](#kpi-字典管理)
7. [常見問題](#常見問題)
8. [最佳實踐](#最佳實踐)

---

## 系統概述

### 什麼是知識庫管理系統？

AI Agent 知識庫管理系統是一套完整的知識管理工具，讓您可以：

- **定義 AI Agent 的角色與行為**（Persona）
- **建立常見問題庫**（FAQ），提升 AI 回答準確度
- **管理業務指標定義**（KPI Dictionary），確保數據一致性
- **記錄重要決策**（Decision Logs）
- **保存會議摘要與行動項目**（Meeting Summaries）
- **儲存策略簡報**（POV Briefings）

### 系統架構

```
知識庫檔案 (Markdown)
    ↓
檔案管理模組 (CRUD + 驗證)
    ↓
API 層 (RESTful API)
    ↓
前端介面 (React + Monaco Editor)
    ↓
使用者操作
```

### 核心特色

✅ **Markdown 為基礎** - 所有知識以 Markdown 格式儲存，易於版本控制
✅ **即時驗證** - 內容品質自動檢查，提供改善建議
✅ **直覺介面** - 專業 Monaco 編輯器，支援語法高亮與即時預覽
✅ **標籤分類** - 靈活的標籤系統，快速組織與搜尋知識
✅ **完整 CRUD** - 新增、編輯、刪除、搜尋等完整操作

---

## 快速開始

### 1. 訪問系統

打開瀏覽器，前往：

```
http://localhost:3002/knowledge
```

您將看到知識庫總覽頁面，顯示所有知識類型和統計資訊。

### 2. 導航結構

系統側邊欄提供以下入口：

```
📚 知識庫管理
  ├─ 📖 知識庫總覽
  ├─ 👥 Persona 定義
  ├─ ❓ FAQ 管理
  ├─ 📊 KPI 字典
  ├─ 📄 決策日誌（即將推出）
  └─ 📅 會議摘要（即將推出）
```

### 3. 首次使用建議

**建議順序**：
1. **先查看 Persona 定義** - 了解當前 AI Agent 的角色設定
2. **新增 FAQ** - 建立常見問題庫，從最常被問的問題開始
3. **定義 KPI** - 確保數據指標定義一致
4. **定期更新** - 根據實際使用情況持續優化知識庫

---

## 知識庫總覽

### 功能說明

知識庫總覽提供系統整體狀況的鳥瞰視圖：

#### 統計卡片

- **知識檔案總數** - 目前系統中的知識檔案數量
- **Persona 品質** - Persona 定義的完整度評分 (0-100%)
- **最後更新** - 最近一次知識更新的時間

#### 知識類型卡片

6 個知識類型卡片，每個顯示：
- 類型名稱與描述
- 當前統計資訊（例如 FAQ 數量、KPI 數量）
- 點擊進入對應管理介面

#### 快速操作

常用操作的快捷入口：
- 編輯 Persona
- 新增 FAQ
- 新增 KPI
- 搜尋知識庫（即將推出）

#### 使用指南

系統內建使用指南，說明每種知識類型的用途和最佳實踐。

---

## Persona 定義管理

### 什麼是 Persona？

Persona 是 AI Agent 的「人格檔案」，定義了：

- **核心身份** - AI 的角色定位（例如：虛擬數據長）
- **溝通風格** - 語氣、詞彙、句式偏好
- **決策原則** - 評估提案的優先級與紅線
- **專業領域** - 核心專業知識與經驗背景
- **互動模式** - 如何回應不同情境
- **行為指令** - 輸出格式、反問清單等系統級規範

### 介面功能

#### 1. 頁面頂部

- **統計資訊**:
  - **完整度** - Persona 內容的完整性評分
  - **章節數量** - 當前 Persona 包含的章節數
  - **字數** - Persona 總字數

- **操作按鈕**:
  - **顯示/隱藏預覽** - 控制預覽窗格顯示
  - **重置** - 放棄未儲存的變更
  - **儲存變更** - 保存修改（支援 Ctrl+S 快捷鍵）

#### 2. 編輯器區域

**左側 - Markdown 編輯器**:
- 專業的 Monaco Editor（VS Code 使用的編輯器）
- 語法高亮支援
- 自動縮排與補全
- Ctrl+S 快速儲存

**右側 - 即時預覽**:
- 即時渲染 Markdown 內容
- 自訂樣式美化顯示
- 支援表格、程式碼區塊、引用等 GFM 語法

#### 3. 驗證警告

儲存時系統會自動檢查：
- 內容最小長度（建議 ≥ 500 字元）
- 必要章節是否完整
- 結構一致性

若有警告會以黃色提示框顯示，建議但不強制修正。

#### 4. 章節導航

底部顯示所有章節標題，幫助快速了解 Persona 結構。

### 使用範例

#### 編輯 Persona

1. 點擊側邊欄「Persona 定義」
2. 在左側編輯器中修改內容
3. 右側即時查看效果
4. 按 Ctrl+S 或點擊「儲存變更」
5. 系統驗證內容並顯示結果

#### 新增章節

```markdown
## 新章節名稱

章節內容...

### 子章節 (可選)

子章節內容...
```

---

## FAQ 管理

### 什麼是 FAQ？

FAQ (Frequently Asked Questions) 是常見問題知識庫，用於：

- **提升 AI 回答準確度** - 預先定義標準答案
- **減少重複解釋** - 統一回答口徑
- **知識傳承** - 保存團隊智慧
- **快速查詢** - 團隊成員也可參考

### 介面功能

#### 1. 搜尋與篩選

**搜尋框**:
- 支援問題、答案、關鍵字搜尋
- 即時篩選結果

**標籤篩選**:
- 點擊標籤快速篩選
- 顯示每個標籤的 FAQ 數量
- 點擊「全部」顯示所有 FAQ

#### 2. FAQ 列表

每個 FAQ 卡片顯示：
- **問題** - 粗體標題
- **答案** - 完整回答內容
- **標籤** - 分類標籤（綠色徽章）
- **使用次數** - 被引用次數
- **最後更新時間**

#### 3. 操作按鈕

- **編輯按鈕** (藍色鉛筆圖示) - 修改 FAQ
- **刪除按鈕** (紅色垃圾桶圖示) - 刪除 FAQ

#### 4. 新增/編輯表單

點擊「新增 FAQ」或編輯按鈕後，顯示表單：

**必填欄位**:
- **問題** - 清晰簡潔的問題描述
- **回答** - 詳細的回答內容

**選填欄位**:
- **標籤** - 用逗號分隔，例如: `數據, 報表, 分析`
- **關鍵字** - 用逗號分隔，例如: `數據導出, Excel, CSV`

### 使用範例

#### 新增 FAQ

1. 點擊右上角「新增 FAQ」按鈕
2. 填寫問題：「如何導出數據報表？」
3. 填寫答案：「進入報表管理頁面...」
4. 新增標籤：`數據, 報表`
5. 新增關鍵字：`導出, 下載, Excel`
6. 點擊「新增」按鈕

#### 編輯 FAQ

1. 找到要編輯的 FAQ
2. 點擊藍色鉛筆圖示
3. 修改內容
4. 點擊「更新」按鈕

#### 刪除 FAQ

1. 找到要刪除的 FAQ
2. 點擊紅色垃圾桶圖示
3. 確認刪除

#### 搜尋 FAQ

1. 在搜尋框輸入關鍵字（例如:「報表」）
2. 系統即時篩選符合的 FAQ
3. 點擊標籤進一步篩選

---

## KPI 字典管理

### 什麼是 KPI 字典？

KPI Dictionary 是業務指標的統一定義庫，確保：

- **定義一致性** - 全公司使用相同的指標定義
- **計算透明** - 明確記錄計算邏輯（SQL）
- **責任歸屬** - 明確每個 KPI 的負責團隊
- **更新頻率** - 清楚標示數據刷新週期

### 介面功能

#### 1. 搜尋與篩選

**搜尋框**:
- 支援 KPI 名稱、定義、計算邏輯搜尋
- 即時篩選結果

**標籤篩選**:
- 按類別快速篩選 KPI
- 顯示每個類別的 KPI 數量

#### 2. KPI 列表

每個 KPI 卡片顯示：
- **KPI 名稱** - 粗體標題 + 標籤
- **定義** - 業務意義說明
- **計算邏輯** - SQL 語法（灰色程式碼區塊）
- **資料來源** - 數據表或系統名稱
- **負責人** - 擁有者團隊
- **更新頻率** - 即時/每小時/每日/每週/每月
- **最後更新時間**

#### 3. 操作按鈕

- **編輯按鈕** (藍色鉛筆圖示) - 修改 KPI
- **刪除按鈕** (紅色垃圾桶圖示) - 刪除 KPI

#### 4. 新增/編輯表單

**第一行（兩欄）**:
- **KPI 名稱** * - 例如: `月活躍用戶數 (MAU)`
- **負責人** * - 例如: `數據分析團隊`

**定義** * - 描述業務意義

**計算邏輯 (SQL)** * - 完整 SQL 語句
```sql
SELECT COUNT(DISTINCT user_id)
FROM user_activity
WHERE activity_date >= DATE_SUB(CURDATE(), INTERVAL 30 DAY)
```

**第三行（三欄）**:
- **資料來源** * - 例如: `user_activity 表`
- **更新頻率** - 下拉選單選擇
- **標籤** - 用逗號分隔，例如: `用戶, 活躍度`

### 使用範例

#### 新增 KPI

1. 點擊右上角「新增 KPI」按鈕
2. 填寫 KPI 名稱：「月活躍用戶數 (MAU)」
3. 填寫負責人：「數據分析團隊」
4. 填寫定義：「過去 30 天內至少有一次活動的獨立用戶數」
5. 填寫 SQL 計算邏輯
6. 填寫資料來源：「user_activity 表」
7. 選擇更新頻率：「每日」
8. 新增標籤：`用戶, 活躍度`
9. 點擊「新增」按鈕

#### 編輯 KPI

1. 找到要編輯的 KPI
2. 點擊藍色鉛筆圖示
3. 修改欄位（例如更新 SQL 邏輯）
4. 點擊「更新」按鈕

#### 查看 SQL 計算邏輯

每個 KPI 卡片都會顯示完整的 SQL 語法，使用 monospace 字體清晰呈現。

---

## 常見問題

### Q1: 如何備份知識庫？

**答**: 所有知識庫檔案都以 Markdown 格式儲存在 `agent-brain/` 目錄下。您可以：

1. 使用 Git 進行版本控制
2. 定期複製整個 `agent-brain/` 目錄
3. 使用雲端同步服務（如 OneDrive, Dropbox）

### Q2: 修改 Persona 後需要重啟系統嗎？

**答**: 不需要。Persona 檔案會在每次 AI 對話時動態載入，修改後立即生效。

### Q3: 可以同時編輯多個知識檔案嗎？

**答**: 建議一次編輯一個檔案，確保變更被正確儲存。系統會在有未儲存變更時顯示警告。

### Q4: 如何匯入大量 FAQ？

**答**: 目前版本支援單筆新增。若需批量匯入，可以：

1. 直接編輯 `agent-brain/cdo_faq.md` 檔案
2. 使用未來版本的批次匯入功能
3. 透過 API 程式化批次新增

### Q5: KPI 的 SQL 語法會被驗證嗎？

**答**: 目前系統會進行基礎語法檢查（例如包含 SELECT 關鍵字），但不執行 SQL。建議在資料庫中測試後再新增。

### Q6: 標籤可以使用中文嗎？

**答**: 完全支援中文標籤。系統會自動處理中英文標籤。

### Q7: 系統支援多人協作嗎？

**答**: 目前版本為單使用者模式。建議：

- 使用 Git 進行版本控制
- 透過 Pull Request 審核變更
- 定期同步更新

### Q8: 如何搜尋所有知識庫？

**答**: 全域搜尋功能即將推出。目前可以：

- 在各頁面使用分類搜尋
- 使用瀏覽器的頁面搜尋 (Ctrl+F)
- 直接在檔案系統中搜尋 Markdown 檔案

---

## 最佳實踐

### Persona 管理

✅ **定期審查** - 每季度檢視 Persona 是否符合當前需求
✅ **版本控制** - 使用 Git 記錄重大變更
✅ **明確定義** - 避免模糊用語，使用具體案例說明
✅ **保持一致** - 確保溝通風格、決策原則前後一致

### FAQ 管理

✅ **從實際問題出發** - 記錄真實被問到的問題
✅ **標準化回答** - 確保回答準確、完整、易懂
✅ **定期更新** - 根據新政策或流程更新答案
✅ **合理分類** - 使用標籤幫助快速定位
✅ **追蹤使用** - 定期檢視使用次數，優化高頻問題的回答

### KPI 管理

✅ **統一口徑** - 全公司使用相同的 KPI 定義
✅ **完整記錄** - SQL 邏輯要完整、可執行
✅ **明確負責人** - 每個 KPI 都要有明確 owner
✅ **定期驗證** - 確保計算邏輯與實際業務一致
✅ **文檔化假設** - 在定義中說明重要假設或限制

### 知識庫整體

✅ **保持簡潔** - 避免冗長重複，提煉核心資訊
✅ **結構清晰** - 使用標題、列表、表格組織內容
✅ **持續優化** - 根據使用回饋不斷改進
✅ **團隊協作** - 鼓勵團隊成員貢獻知識
✅ **定期清理** - 移除過時或不再適用的內容

---

## 技術支援

如有問題或建議，請聯繫：

- **系統管理員**: [您的聯絡方式]
- **技術文件**: `docs/KNOWLEDGE_MANAGEMENT_SYSTEM_DESIGN.md`
- **開發團隊**: AI Development Team

---

**文件版本**: 1.0.0
**最後更新**: 2025-10-21
**維護者**: AI Development Team
