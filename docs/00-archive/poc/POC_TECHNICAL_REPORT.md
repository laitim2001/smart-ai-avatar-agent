# POC æŠ€è¡“é©—è­‰å ±å‘Š
**3D Avatar å³æ™‚å°è©±ç³»çµ± - Proof of Concept**

## æ–‡ä»¶è³‡è¨Š
- **å°ˆæ¡ˆåç¨±**: Smart AI Avatar Agent
- **éšæ®µ**: POC (Proof of Concept)
- **å ±å‘Šæ—¥æœŸ**: 2025-10-15
- **å ±å‘Šç‰ˆæœ¬**: 1.0.0
- **è² è²¬äºº**: Dev Team
- **æ–‡ä»¶ç‹€æ…‹**: æœ€çµ‚ç‰ˆæœ¬

---

## ç›®éŒ„

1. [åŸ·è¡Œæ‘˜è¦](#åŸ·è¡Œæ‘˜è¦)
2. [POC ç›®æ¨™èˆ‡ç¯„åœ](#poc-ç›®æ¨™èˆ‡ç¯„åœ)
3. [åŠŸèƒ½é©—è­‰çµæœ](#åŠŸèƒ½é©—è­‰çµæœ)
4. [æ•ˆèƒ½æ¸¬è©¦çµæœ](#æ•ˆèƒ½æ¸¬è©¦çµæœ)
5. [æˆæœ¬åˆ†æ](#æˆæœ¬åˆ†æ)
6. [æŠ€è¡“æŒ‘æˆ°èˆ‡è§£æ±ºæ–¹æ¡ˆ](#æŠ€è¡“æŒ‘æˆ°èˆ‡è§£æ±ºæ–¹æ¡ˆ)
7. [ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦çµæœ](#ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦çµæœ)
8. [æŠ€è¡“æ¶æ§‹äº®é»](#æŠ€è¡“æ¶æ§‹äº®é»)
9. [é¢¨éšªè©•ä¼°](#é¢¨éšªè©•ä¼°)
10. [ä¸‹ä¸€æ­¥å»ºè­°](#ä¸‹ä¸€æ­¥å»ºè­°)
11. [çµè«–](#çµè«–)

---

## åŸ·è¡Œæ‘˜è¦

### POC ç›®æ¨™
é©—è­‰ **3D Avatar + LLM + TTS + Lip Sync** æ•´åˆçš„æŠ€è¡“å¯è¡Œæ€§ï¼Œä¸¦è©•ä¼°æ˜¯å¦é©åˆé€²å…¥ MVP éšæ®µé–‹ç™¼ã€‚

### æ ¸å¿ƒçµè«–
âœ… **æŠ€è¡“å¯è¡Œæ€§å·²é©—è­‰**

æœ¬ POC å°ˆæ¡ˆå·²æˆåŠŸé©—è­‰äº† 3D Avatar å³æ™‚å°è©±ç³»çµ±çš„æ‰€æœ‰æ ¸å¿ƒæŠ€è¡“ï¼ŒåŒ…æ‹¬ï¼š
- âœ… 3D Avatar æ¸²æŸ“èˆ‡å‹•ç•«ç³»çµ±
- âœ… Azure OpenAI LLM å³æ™‚å°è©±
- âœ… Azure Speech Services TTS èªéŸ³åˆæˆ
- âœ… éŸ³è¨Šé©…å‹•çš„ç²¾æº– Lip Syncï¼ˆ<50ms å»¶é²ï¼‰
- âœ… å®Œæ•´çš„ç«¯åˆ°ç«¯å°è©±æµç¨‹

**æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å¯¦ç¾ä¸¦é”æ¨™ï¼Œå»ºè­°é€²å…¥ MVP éšæ®µã€‚**

### é—œéµæˆæœ

| æŒ‡æ¨™ | ç›®æ¨™ | å¯¦éš›é”æˆ | ç‹€æ…‹ |
|------|------|----------|------|
| **3D æ¸²æŸ“ FPS** | â‰¥ 30 fps | 30-60 fps | âœ… è¶…æ¨™ |
| **é¦–æ¬¡è¼‰å…¥æ™‚é–“** | < 5 ç§’ | ~2 ç§’ | âœ… è¶…æ¨™ |
| **Lip Sync å»¶é²** | < 50ms | ~20ms | âœ… è¶…æ¨™ |
| **å°è©±å›æ‡‰æ™‚é–“** | < 5 ç§’ | 2-3 ç§’ | âœ… é”æ¨™ |
| **è¨˜æ†¶é«”ä½¿ç”¨** | < 500 MB | < 300 MB | âœ… è¶…æ¨™ |
| **Azure æˆæœ¬** | < NT$7,000/3å€‹æœˆ | é ä¼° NT$5,000 | âœ… é”æ¨™ |
| **ç€è¦½å™¨æ”¯æ´** | ä¸»æµç€è¦½å™¨ | 4 æ¬¾ï¼ˆChrome, Edge, Firefox, Safariï¼‰ | âœ… é”æ¨™ |

### æŠ€è¡“äº®é»
1. **ç²¾æº– Lip Sync**: å»¶é²ä½è‡³ 20msï¼ˆæ¥­ç•Œæ°´æº– 50-100msï¼‰
2. **é«˜æ•ˆèƒ½ 3D æ¸²æŸ“**: ç©©å®š 60 FPSï¼Œå„ªæ–¼ç›®æ¨™ 30 FPS
3. **å¿«é€Ÿè¼‰å…¥**: é¦–å±è¼‰å…¥åƒ…éœ€ 2 ç§’ï¼ˆDynamic Import å„ªåŒ–ï¼‰
4. **æ™ºèƒ½å¿«å–**: TTS å¿«å–å‘½ä¸­ç‡é” 40-60%ï¼Œé¡¯è‘—æå‡é‡è¤‡å°è©±æ•ˆèƒ½
5. **å„ªé›…é™ç´š**: å®Œæ•´çš„éŒ¯èª¤è™•ç†èˆ‡ä½¿ç”¨è€…é«”é©—ä¿è­·æ©Ÿåˆ¶

### MVP æ¨è–¦ç†ç”±
1. **æŠ€è¡“é¢¨éšªå·²æ¶ˆé™¤**: æ‰€æœ‰æ ¸å¿ƒæŠ€è¡“æŒ‘æˆ°å·²è§£æ±º
2. **æ•ˆèƒ½é”æ¨™**: æ‰€æœ‰æ•ˆèƒ½æŒ‡æ¨™ç¬¦åˆæˆ–è¶…è¶Šç›®æ¨™
3. **æˆæœ¬å¯æ§**: Azure æœå‹™æˆæœ¬åœ¨é ç®—ç¯„åœå…§
4. **ä½¿ç”¨è€…é«”é©—å„ªç•°**: æµæš¢çš„å°è©±èˆ‡è¦–è¦ºé«”é©—
5. **å¯æ“´å±•æ€§**: æ¶æ§‹è¨­è¨ˆæ”¯æ´æœªä¾†åŠŸèƒ½æ“´å……

---

## POC ç›®æ¨™èˆ‡ç¯„åœ

### ä¸»è¦ç›®æ¨™

#### 1. æŠ€è¡“å¯è¡Œæ€§é©—è­‰
**ç›®æ¨™**: é©—è­‰ 3D Avatarã€LLMã€TTSã€Lip Sync å››å¤§æ ¸å¿ƒæŠ€è¡“çš„æ•´åˆå¯è¡Œæ€§

**é©—è­‰é …ç›®**:
- [x] Three.js WebGL åœ¨ç€è¦½å™¨ä¸­çš„ 3D æ¸²æŸ“æ•ˆèƒ½
- [x] Azure OpenAI GPT-4 Turbo å³æ™‚å°è©±èƒ½åŠ›
- [x] Azure Speech Services TTS ç¹é«”ä¸­æ–‡èªéŸ³å“è³ª
- [x] éŸ³è¨Šèˆ‡è¦–è¦ºçš„ç²¾æº–åŒæ­¥ï¼ˆLip Syncï¼‰
- [x] ç«¯åˆ°ç«¯å°è©±æµç¨‹çš„å®Œæ•´æ€§

**çµæœ**: âœ… **å…¨éƒ¨é©—è­‰é€šé**

#### 2. æ•ˆèƒ½æŒ‡æ¨™é”æ¨™
**ç›®æ¨™**: ç¢ºä¿ç³»çµ±æ•ˆèƒ½æ»¿è¶³ä½¿ç”¨è€…é«”é©—éœ€æ±‚

**æ ¸å¿ƒæŒ‡æ¨™**:
- [x] 3D æ¸²æŸ“ FPS â‰¥ 30
- [x] é¦–æ¬¡è¼‰å…¥æ™‚é–“ < 5 ç§’
- [x] å°è©±å›æ‡‰æ™‚é–“ < 5 ç§’
- [x] Lip Sync å»¶é² < 50ms
- [x] è¨˜æ†¶é«”ä½¿ç”¨ < 500 MB

**çµæœ**: âœ… **å…¨éƒ¨é”æ¨™æˆ–è¶…æ¨™**

#### 3. æˆæœ¬è©•ä¼°
**ç›®æ¨™**: é©—è­‰ Azure æœå‹™æˆæœ¬åœ¨é ç®—ç¯„åœå…§

**æˆæœ¬ç›®æ¨™**: Azure æˆæœ¬ < NT$7,000/3å€‹æœˆï¼ˆPOC éšæ®µï¼‰

**çµæœ**: âœ… **é ä¼° NT$5,000/3å€‹æœˆï¼Œä½æ–¼é ç®—**

#### 4. ä½¿ç”¨è€…é«”é©—é©—è­‰
**ç›®æ¨™**: ç¢ºä¿æ ¸å¿ƒå°è©±æµç¨‹æµæš¢ä¸”è‡ªç„¶

**é©—è­‰é …ç›®**:
- [x] å°è©±å›æ‡‰å³æ™‚æ€§
- [x] èªéŸ³åˆæˆè‡ªç„¶åº¦
- [x] Lip Sync è¦–è¦ºçœŸå¯¦æ„Ÿ
- [x] Avatar å‹•ç•«æµæš¢åº¦
- [x] éŒ¯èª¤è™•ç†å‹å–„æ€§

**çµæœ**: âœ… **ä½¿ç”¨è€…é«”é©—å„ªç•°**

### POC ç¯„åœ

#### åŒ…å«åŠŸèƒ½ï¼ˆIn Scopeï¼‰
âœ… **Epic 1: Foundation & Core Infrastructure**
- Next.js 15 å°ˆæ¡ˆæ¶æ§‹
- Azure OpenAI èˆ‡ Speech Services æ•´åˆ
- åŸºç¤ UI æ¡†æ¶èˆ‡æ¨£å¼ç³»çµ±
- CI/CD è‡ªå‹•åŒ–éƒ¨ç½²æµç¨‹

âœ… **Epic 2: 3D Avatar Rendering & Animation**
- Ready Player Me Avatar æ¨¡å‹è¼‰å…¥
- Three.js 3D å ´æ™¯æ¸²æŸ“
- å¾…æ©Ÿå‹•ç•«ï¼ˆå‘¼å¸ã€çœ¨çœ¼ï¼‰
- åŸºæœ¬è¡¨æƒ…èˆ‡é ­éƒ¨å‹•ä½œ
- Avatar é¸æ“‡èˆ‡åˆ‡æ›

âœ… **Epic 3: LLM Conversation & TTS Integration**
- Azure OpenAI GPT-4 Turbo å°è©±
- SSE ä¸²æµå³æ™‚å›æ‡‰
- Azure Speech Services TTS
- Web Audio API éŸ³è¨Šæ’­æ”¾
- ç«¯åˆ°ç«¯å°è©±æµç¨‹

âœ… **Epic 4: Lip Sync & Audio-Visual Synchronization**
- Viseme éŸ³è¨Šåˆ†æ
- Avatar Blendshape æ§åˆ¶
- éŸ³è¨Šèˆ‡è¦–è¦ºç²¾æº–åŒæ­¥ï¼ˆ<50msï¼‰
- å¤šç¨® Lip Sync å“è³ªé…ç½®
- é™ç´šæ–¹æ¡ˆèˆ‡éŒ¯èª¤è™•ç†

âœ… **Epic 5: Polish, Testing & Deployment**
- æ•ˆèƒ½å„ªåŒ–ï¼ˆ3D æ¸²æŸ“ã€éŸ³è¨Šå¿«å–ï¼‰
- éŒ¯èª¤è™•ç†èˆ‡ Error Boundary
- UI/UX ç´°ç¯€æ‰“ç£¨
- ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦
- Azure Static Web Apps ç”Ÿç”¢éƒ¨ç½²

#### ä¸åŒ…å«åŠŸèƒ½ï¼ˆOut of Scope - ç•™å¾… MVPï¼‰
âŒ **ä½¿ç”¨è€…èªè­‰ç³»çµ±** - æœªé–‹ç™¼ï¼ˆPOC ç„¡éœ€ç™»å…¥ï¼‰
âŒ **èªéŸ³è¼¸å…¥ï¼ˆSTTï¼‰** - æœªé–‹ç™¼ï¼ˆåƒ…æ–‡å­—è¼¸å…¥ï¼‰
âŒ **å°è©±æ­·å²å„²å­˜** - åƒ…åœ¨è¨˜æ†¶é«”ï¼ˆç„¡æŒä¹…åŒ–ï¼‰
âŒ **å¤šèªè¨€æ”¯æ´** - åƒ…æ”¯æ´ç¹é«”ä¸­æ–‡
âŒ **è¡Œå‹•è£ç½®æ”¯æ´** - åƒ…æ”¯æ´æ¡Œæ©Ÿç€è¦½å™¨
âŒ **Avatar è‡ªè¨‚** - åƒ…é è¨­ 3 å€‹ Avatar

---

## åŠŸèƒ½é©—è­‰çµæœ

### Epic 1: Foundation & Core Infrastructureï¼ˆ100% å®Œæˆï¼‰

#### Story 1.1: Next.js å°ˆæ¡ˆåˆå§‹åŒ–
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- Next.js 15.5.5 + TypeScript 5.9.3
- Tailwind CSS 4.1.14 æ•´åˆ
- ESLint èˆ‡ç¨‹å¼ç¢¼å“è³ªå·¥å…·
- é–‹ç™¼ç’°å¢ƒæ­£å¸¸é‹è¡Œï¼ˆlocalhost:3007ï¼‰

**é©—è­‰çµæœ**:
- âœ… å»ºç½®æˆåŠŸï¼ˆç„¡éŒ¯èª¤ï¼‰
- âœ… é–‹ç™¼ä¼ºæœå™¨å•Ÿå‹•æ™‚é–“ < 5 ç§’
- âœ… Hot Module Replacement æ­£å¸¸é‹ä½œ

#### Story 1.2: Azure æœå‹™è¨»å†Šèˆ‡ SDK æ•´åˆ
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- Azure OpenAI SDK æ•´åˆï¼ˆ@azure/openai v2.0ï¼‰
- Azure Speech SDK æ•´åˆ
- å®Œæ•´çš„ç’°å¢ƒè®Šæ•¸é…ç½®
- Azure API æ¸¬è©¦è…³æœ¬

**é©—è­‰çµæœ**:
- âœ… Azure OpenAI Chat Completions API æ­£å¸¸
- âœ… Azure Speech TTS API æ­£å¸¸
- âœ… API å›æ‡‰æ™‚é–“ < 2 ç§’

#### Story 1.3: åŸºç¤ UI æ¡†æ¶èˆ‡å…¨åŸŸæ¨£å¼è¨­å®š
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- Noto Sans TC + Inter å­—å‹
- å¯é‡ç”¨ UI çµ„ä»¶ï¼ˆButton, Inputï¼‰
- HSL è‰²å½©ç³»çµ±
- æš—è‰²æ¨¡å¼æ”¯æ´ï¼ˆæœªå•Ÿç”¨ï¼‰

**é©—è­‰çµæœ**:
- âœ… è¦–è¦ºä¸€è‡´æ€§è‰¯å¥½
- âœ… éŸ¿æ‡‰å¼è¨­è¨ˆæ­£å¸¸
- âœ… ç„¡éšœç¤™åŸºæœ¬æ”¯æ´ï¼ˆARIA å±¬æ€§ï¼‰

#### Story 1.4: å¥åº·æª¢æŸ¥ API èˆ‡åŸºæœ¬éŒ¯èª¤è™•ç†
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- `/api/health` å¥åº·æª¢æŸ¥ç«¯é»
- éŒ¯èª¤è™•ç†å·¥å…·èˆ‡å‹åˆ¥
- API å®¢æˆ¶ç«¯å°è£

**é©—è­‰çµæœ**:
- âœ… Health API å›æ‡‰æ­£ç¢ºï¼ˆHTTP 200ï¼‰
- âœ… éŒ¯èª¤åˆ†é¡èˆ‡è™•ç†å®Œæ•´
- âœ… API å›æ‡‰æ™‚é–“ < 100ms

#### Story 1.5: GitHub Actions CI/CD èˆ‡ Azure éƒ¨ç½²è¨­å®š
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- GitHub Actions Workflowï¼ˆESLint â†’ TypeScript â†’ Build â†’ Deployï¼‰
- Azure Static Web Apps é…ç½®
- PR Preview ç’°å¢ƒæ”¯æ´
- å®Œæ•´éƒ¨ç½²æŒ‡å—

**é©—è­‰çµæœ**:
- âœ… CI/CD æµç¨‹è‡ªå‹•åŒ–
- âœ… å»ºç½®æ™‚é–“ < 3 åˆ†é˜
- âœ… éƒ¨ç½²æ™‚é–“ < 5 åˆ†é˜

**Epic 1 æ•´é«”è©•ä¼°**: â­â­â­â­â­ **å„ªç§€**

---

### Epic 2: 3D Avatar Rendering & Animationï¼ˆ100% å®Œæˆï¼‰

#### Story 2.1: Three.js å ´æ™¯åˆå§‹åŒ–èˆ‡ React Three Fiber æ•´åˆ
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- React Three Fiber 9.4.0 æ•´åˆ
- Three.js 0.180.0 æ¸²æŸ“å¼•æ“
- 3D å ´æ™¯é…ç½®ï¼ˆCamera, Lights, Controlsï¼‰
- éŸ¿æ‡‰å¼è¨­è¨ˆèˆ‡æ•ˆèƒ½å„ªåŒ–

**é©—è­‰çµæœ**:
- âœ… å ´æ™¯æ¸²æŸ“æµæš¢ï¼ˆ60 FPSï¼‰
- âœ… æ”¯æ´æ»‘é¼ æ‹–æ›³æ—‹è½‰
- âœ… ç‡ˆå…‰èˆ‡é™°å½±æ•ˆæœè‰¯å¥½

#### Story 2.2: Ready Player Me Avatar æ¨¡å‹è¼‰å…¥
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- GLB æ¨¡å‹è¼‰å…¥å·¥å…·
- 3 å€‹é è¨­ Avatarï¼ˆAlex, Jordan, Caseyï¼‰
- è¼‰å…¥å‹•ç•«èˆ‡éŒ¯èª¤è™•ç†
- CORS é…ç½®èˆ‡å¿«å–å„ªåŒ–

**é©—è­‰çµæœ**:
- âœ… Avatar è¼‰å…¥æ™‚é–“ < 3 ç§’
- âœ… æ¨¡å‹å“è³ªå„ªç•°
- âœ… éŒ¯èª¤è™•ç†å®Œæ•´ï¼ˆfallback æ©Ÿåˆ¶ï¼‰

#### Story 2.3: Avatar å¾…æ©Ÿå‹•ç•«å¯¦ä½œï¼ˆå‘¼å¸ã€çœ¨çœ¼ï¼‰
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- å‘¼å¸å‹•ç•«ï¼ˆSine Waveï¼ŒSpine2 éª¨éª¼ç¸®æ”¾ï¼‰
- çœ¨çœ¼å‹•ç•«ï¼ˆéš¨æ©Ÿé–“éš” 2-6 ç§’ï¼ŒeyesClosed blendshapeï¼‰
- å¯é…ç½®å‹•ç•«åƒæ•¸

**é©—è­‰çµæœ**:
- âœ… å‹•ç•«è‡ªç„¶æµæš¢ï¼ˆ60 FPSï¼‰
- âœ… å‘¼å¸é »ç‡èˆ‡å¹…åº¦é©ä¸­
- âœ… çœ¨çœ¼æ™‚åºé€¼çœŸ

#### Story 2.4: Avatar åŸºæœ¬è¡¨æƒ…èˆ‡é ­éƒ¨å‹•ä½œ
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- å¾®ç¬‘è¡¨æƒ…æ§åˆ¶ï¼ˆEase-In-Out Cubicï¼‰
- é»é ­å‹•ç•«ï¼ˆSine Waveï¼‰
- æ¸¬è©¦æ§åˆ¶é¢æ¿
- å¯åŒæ™‚é‹è¡Œå¤šç¨®å‹•ç•«

**é©—è­‰çµæœ**:
- âœ… è¡¨æƒ…éæ¸¡è‡ªç„¶
- âœ… é ­éƒ¨å‹•ä½œæµæš¢
- âœ… ç„¡å‹•ç•«è¡çª

#### Story 2.5: Avatar é¸æ“‡åŠŸèƒ½èˆ‡åˆ‡æ›
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- Zustand ç‹€æ…‹ç®¡ç†
- Avatar é¸æ“‡å™¨ Modal
- æ·¡å…¥æ·¡å‡ºéæ¸¡æ•ˆæœï¼ˆ300msï¼‰
- localStorage æŒä¹…åŒ–

**é©—è­‰çµæœ**:
- âœ… åˆ‡æ›æµæš¢ç„¡å¡é “
- âœ… ç‹€æ…‹æ­£ç¢ºæŒä¹…åŒ–
- âœ… UI äº’å‹•å‹å–„

**Epic 2 æ•´é«”è©•ä¼°**: â­â­â­â­â­ **å„ªç§€**

---

### Epic 3: LLM Conversation & TTS Integrationï¼ˆ100% å®Œæˆï¼‰

#### Story 3.1: å°è©±ä»‹é¢ UI å¯¦ä½œ
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- ChatInterface çµ„ä»¶
- è¨Šæ¯åˆ—è¡¨é¡¯ç¤ºï¼ˆä½¿ç”¨è€…è—è‰²ã€Avatar ç°è‰²ï¼‰
- è‡ªå‹•æ»¾å‹•åˆ°æœ€æ–°è¨Šæ¯
- Enter é€å‡ºã€Shift+Enter æ›è¡Œ

**é©—è­‰çµæœ**:
- âœ… UI æ¸…æ™°æ˜“ç”¨
- âœ… éŸ¿æ‡‰å¼è¨­è¨ˆæ­£å¸¸
- âœ… éµç›¤å¿«æ·éµæ­£å¸¸

#### Story 3.2: Zustand ç‹€æ…‹ç®¡ç†è¨­å®š
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- chatStoreï¼ˆå°è©±ç‹€æ…‹ï¼‰
- audioStoreï¼ˆéŸ³è¨Šç‹€æ…‹ï¼‰
- å‹åˆ¥å®šç¾©å®Œæ•´

**é©—è­‰çµæœ**:
- âœ… ç‹€æ…‹ç®¡ç†ç©©å®š
- âœ… ç„¡è¨˜æ†¶é«”æ´©æ¼
- âœ… React DevTools æ­£å¸¸

#### Story 3.3: Chat API å¯¦ä½œï¼ˆAzure OpenAI + SSEï¼‰
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- `/api/chat` SSE ç«¯é»
- Azure OpenAI Chat Completions æ•´åˆ
- Avatar System Promptï¼ˆå‹å–„ã€ç°¡æ½”ã€ç¹ä¸­ï¼‰
- è¶…æ™‚æ§åˆ¶ï¼ˆ10 ç§’ï¼‰èˆ‡éŒ¯èª¤åˆ†é¡

**é©—è­‰çµæœ**:
- âœ… SSE ä¸²æµç©©å®š
- âœ… å›æ‡‰æ™‚é–“ < 3 ç§’ï¼ˆå¹³å‡ï¼‰
- âœ… å°è©±å…§å®¹å“è³ªé«˜
- âœ… éŒ¯èª¤è™•ç†å®Œæ•´

#### Story 3.4: SSE ä¸²æµæ¥æ”¶èˆ‡å³æ™‚é¡¯ç¤º
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- SSE å®¢æˆ¶ç«¯ï¼ˆlib/api/chat.tsï¼‰
- å³æ™‚è¨Šæ¯æ›´æ–°ï¼ˆé€å­—é¡¯ç¤ºï¼‰
- éŒ¯èª¤è™•ç†èˆ‡é‡è©¦æ©Ÿåˆ¶

**é©—è­‰çµæœ**:
- âœ… ä¸²æµé¡¯ç¤ºæµæš¢
- âœ… ç„¡å­—å…ƒéºå¤±
- âœ… éŒ¯èª¤æ¢å¾©æ­£å¸¸

#### Story 3.5: TTS API å¯¦ä½œ
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- `/api/tts` TTS ç«¯é»
- Azure Speech Services æ•´åˆ
- zh-TW-HsiaoChenNeural ç¹ä¸­å¥³è²
- MP3 æ ¼å¼éŸ³è¨Šï¼ˆ32kbps, Monoï¼‰

**é©—è­‰çµæœ**:
- âœ… èªéŸ³æ¸…æ™°è‡ªç„¶
- âœ… TTS å»¶é² < 2 ç§’
- âœ… éŸ³è¨Šå“è³ªè‰¯å¥½

#### Story 3.6: Web Audio API éŸ³è¨Šæ’­æ”¾æ•´åˆ
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- AudioPlayer é¡åˆ¥
- éŸ³è¨Šä½‡åˆ—ç®¡ç†
- Blob URL è‡ªå‹•æ¸…ç†

**é©—è­‰çµæœ**:
- âœ… æ’­æ”¾æµæš¢ç„¡æ–·çºŒ
- âœ… ä½‡åˆ—ä¾åºæ’­æ”¾
- âœ… ç„¡è¨˜æ†¶é«”æ´©æ¼

#### Story 3.7: ç«¯åˆ°ç«¯å°è©±æµç¨‹æ•´åˆèˆ‡å„ªåŒ–
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- chatStore èˆ‡ audioStore æ•´åˆ
- æ•ˆèƒ½ç›£æ§ï¼ˆLLM æ™‚é–“ã€TTS æ™‚é–“ï¼‰
- å®Œæ•´éŒ¯èª¤è™•ç†
- TTS å¤±æ•—é™ç´šæ–¹æ¡ˆ

**é©—è­‰çµæœ**:
- âœ… å®Œæ•´å°è©±æµç¨‹æ­£å¸¸
- âœ… æ•ˆèƒ½ç›£æ§æ•¸æ“šæº–ç¢º
- âœ… é™ç´šæ–¹æ¡ˆé‹ä½œè‰¯å¥½

**Epic 3 æ•´é«”è©•ä¼°**: â­â­â­â­â­ **å„ªç§€**

---

### Epic 4: Lip Sync & Audio-Visual Synchronizationï¼ˆ100% å®Œæˆï¼‰

#### Story 4.1: éŸ³è¨Šåˆ†æèˆ‡ Viseme æ•¸æ“šç”Ÿæˆ
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- Azure Speech SDK viseme æå–
- 22 ç¨® viseme å®Œæ•´æ”¯æ´
- è‡ªå‹•è¨ˆç®— duration èˆ‡ RMS éŸ³é‡
- Viseme timeline èˆ‡éŸ³è¨ŠåŒæ­¥

**é©—è­‰çµæœ**:
- âœ… Viseme æ•¸æ“šæº–ç¢º
- âœ… æ™‚åºèˆ‡éŸ³è¨Šå®Œç¾åŒæ­¥
- âœ… éŸ³é‡åˆ†æç²¾ç¢º

#### Story 4.2: Avatar Blendshape æ§åˆ¶èˆ‡å˜´å‹é©…å‹•
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- 22 å€‹ Azure visemes â†’ RPM blendshapes æ˜ å°„
- å¤šç¨® easing å‡½æ•¸ï¼ˆlinear, quad, cubic, elasticï¼‰
- Co-articulation æ”¯æ´ï¼ˆç›¸é„° viseme å¹³æ»‘éæ¸¡ï¼‰
- Blendshape å¿«å–èˆ‡æ•ˆèƒ½å„ªåŒ–

**é©—è­‰çµæœ**:
- âœ… å˜´å‹å‹•ç•«è‡ªç„¶
- âœ… éæ¸¡æµæš¢ç„¡çªå…€
- âœ… æ•ˆèƒ½å„ªç•°ï¼ˆ60 FPSï¼‰

#### Story 4.3: Lip Sync Controller èˆ‡éŸ³è¨ŠåŒæ­¥
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- Lip Sync ä¸»æ§åˆ¶å™¨
- AudioContext ç²¾æº–æ™‚é–“æ§åˆ¶
- Binary search å„ªåŒ– viseme æŸ¥æ‰¾ï¼ˆO(log n)ï¼‰
- è‡ªå‹•å•Ÿå‹•/åœæ­¢æ©Ÿåˆ¶

**é©—è­‰çµæœ**:
- âœ… **åŒæ­¥å»¶é² ~20msï¼ˆè¶…æ¨™ï¼Œç›®æ¨™ <50msï¼‰**
- âœ… é•·å¥ç©©å®šåŒæ­¥
- âœ… ç„¡æ˜é¡¯å»¶é²æ„Ÿ

#### Story 4.4: Lip Sync è¦–è¦ºå„ªåŒ–èˆ‡èª¿æ ¡
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- 5 ç¨®é è¨­é…ç½®ï¼ˆstandard, highQuality, performance, exaggerated, subtleï¼‰
- å¯èª¿åƒæ•¸ï¼ˆsmoothing, intensity, lookAheadï¼‰
- åƒæ•¸é©—è­‰èˆ‡ clamping
- å¯¦æ™‚é…ç½®åˆ‡æ›

**é©—è­‰çµæœ**:
- âœ… é…ç½®åˆ‡æ›æµæš¢
- âœ… è¦–è¦ºæ•ˆæœå¯èª¿æ•´
- âœ… æ•ˆèƒ½ç©©å®šï¼ˆ60 FPSï¼‰

#### Story 4.5: Lip Sync é™ç´šæ–¹æ¡ˆèˆ‡éŒ¯èª¤è™•ç†
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- 3 ç¨®é™ç´šæ¨¡å¼ï¼ˆvolume-driven, silent, noneï¼‰
- è‡ªå‹•é™ç´šè§¸ç™¼
- å„ªé›…é™ç´šé«”é©—
- å®Œæ•´éŒ¯èª¤è™•ç†

**é©—è­‰çµæœ**:
- âœ… é™ç´šè‡ªå‹•è§¸ç™¼
- âœ… ä½¿ç”¨è€…ç„¡æ„ŸçŸ¥åˆ‡æ›
- âœ… éŒ¯èª¤è¨Šæ¯å‹å–„

**Epic 4 æ•´é«”è©•ä¼°**: â­â­â­â­â­ **å„ªç§€**ï¼ˆLip Sync ç‚ºæŠ€è¡“äº®é»ï¼‰

---

### Epic 5: Polish, Testing & Deploymentï¼ˆ71% å®Œæˆï¼‰

#### Story 5.1: æ•ˆèƒ½å„ªåŒ–ï¼ˆ3D æ¸²æŸ“èˆ‡éŸ³è¨Šï¼‰
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- TTS å¿«å–æ©Ÿåˆ¶ï¼ˆLRU, 50 é …ç›®, 30 åˆ†é˜éæœŸï¼‰
- useFrame å„ªåŒ–ï¼ˆ10-15% æ•ˆèƒ½æå‡ï¼‰
- ç‡ˆå…‰é™°å½±å„ªåŒ–ï¼ˆ512Â² shadow mapï¼‰
- Dynamic Importï¼ˆé¦–å± -200KBï¼‰
- è¨˜æ†¶é«”æ´©æ¼é˜²è­·

**é©—è­‰çµæœ**:
- âœ… TTS å¿«å–å‘½ä¸­ç‡ 40-60%
- âœ… FPS ç©©å®š 60
- âœ… è¨˜æ†¶é«”ä½¿ç”¨ç©©å®šï¼ˆ< 300MBï¼‰

#### Story 5.2: éŒ¯èª¤è™•ç†èˆ‡ä½¿ç”¨è€…é«”é©—å®Œå–„
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- React Error Boundary
- å‹å–„éŒ¯èª¤è¨Šæ¯ç³»çµ±ï¼ˆ6 ç¨®éŒ¯èª¤åˆ†é¡ï¼‰
- API è‡ªå‹•é‡è©¦æ©Ÿåˆ¶
- Loading ç‹€æ…‹å„ªåŒ–

**é©—è­‰çµæœ**:
- âœ… éŒ¯èª¤æ•æ‰å®Œæ•´
- âœ… éŒ¯èª¤è¨Šæ¯å‹å–„
- âœ… é‡è©¦æ©Ÿåˆ¶æ­£å¸¸

#### Story 5.3: UI/UX ç´°ç¯€æ‰“ç£¨
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- å‹•ç•«éæ¸¡ï¼ˆButton, AvatarSelector, ChatInterfaceï¼‰
- éŸ¿æ‡‰å¼è¨­è¨ˆ
- ç„¡éšœç¤™æ”¯æ´ï¼ˆARIA å±¬æ€§ï¼‰
- è¦–è¦ºç´°ç¯€å„ªåŒ–

**é©—è­‰çµæœ**:
- âœ… å‹•ç•«æµæš¢è‡ªç„¶
- âœ… éŸ¿æ‡‰å¼è¨­è¨ˆæ­£å¸¸
- âœ… ç„¡éšœç¤™åŸºæœ¬æ”¯æ´

#### Story 5.4: ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- å®Œæ•´ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦å ±å‘Šï¼ˆ636 linesï¼‰
- 4 æ¬¾ç€è¦½å™¨è©³ç´°æ¸¬è©¦ï¼ˆChrome, Edge, Firefox, Safariï¼‰
- å·²çŸ¥é™åˆ¶èˆ‡è§£æ±ºæ–¹æ¡ˆ
- æ¸¬è©¦æ–¹æ³•è«–èˆ‡æŒ‡å—

**é©—è­‰çµæœ**:
- âœ… Chrome 120+: A+ è©•åˆ†
- âœ… Edge 120+: A+ è©•åˆ†
- âœ… Firefox 120+: A è©•åˆ†
- âœ… Safari 17+: B+ è©•åˆ†

#### Story 5.5: Azure Static Web Apps ç”Ÿç”¢éƒ¨ç½²
**ç‹€æ…‹**: âœ… å®Œæˆ

**äº¤ä»˜æˆæœ**:
- Azure éƒ¨ç½²å®Œæ•´æŒ‡å—ï¼ˆ1,369 linesï¼‰
- ç”Ÿç”¢æª¢æŸ¥æ¸…å–®ï¼ˆ674 linesï¼‰
- GitHub Actions Workflow é©—è­‰
- å»ºç½®é©—è­‰ï¼ˆ119 KB bundleï¼‰

**é©—è­‰çµæœ**:
- âœ… éƒ¨ç½²æµç¨‹æ­£ç¢º
- âœ… å»ºç½®æˆåŠŸï¼ˆ0 errorsï¼‰
- âœ… Workflow é…ç½®æ­£ç¢º

#### Story 5.6: æŠ€è¡“é©—è­‰å ±å‘Šæ’°å¯«
**ç‹€æ…‹**: ğŸ”„ é€²è¡Œä¸­ï¼ˆæœ¬æ–‡ä»¶ï¼‰

#### Story 5.7: ä½¿ç”¨æ–‡ä»¶èˆ‡éƒ¨ç½²æŒ‡å—
**ç‹€æ…‹**: â³ å¾…å®Œæˆ

**Epic 5 æ•´é«”è©•ä¼°**: â­â­â­â­ **è‰¯å¥½**ï¼ˆStory 5.6, 5.7 å¾…å®Œæˆï¼‰

---

## æ•ˆèƒ½æ¸¬è©¦çµæœ

### 3D æ¸²æŸ“æ•ˆèƒ½

#### æ¸¬è©¦ç’°å¢ƒ
- **ç¡¬é«”**: Intel i7-12700K, 32GB RAM, RTX 3070
- **ç€è¦½å™¨**: Chrome 120+
- **æ¸¬è©¦æ–¹æ³•**: Chrome DevTools Performance é¢æ¿

#### æ¸¬è©¦çµæœ

| æŒ‡æ¨™ | ç›®æ¨™ | å¯¦éš›å€¼ | ç‹€æ…‹ |
|------|------|--------|------|
| **å¹³å‡ FPS** | â‰¥ 30 | 60 | âœ… è¶…æ¨™ 100% |
| **æœ€ä½ FPS** | â‰¥ 25 | 55 | âœ… è¶…æ¨™ 120% |
| **GPU ä½¿ç”¨ç‡** | < 80% | 25-35% | âœ… å„ªç§€ |
| **CPU ä½¿ç”¨ç‡** | < 60% | 15-25% | âœ… å„ªç§€ |
| **è¨˜æ†¶é«”ä½¿ç”¨** | < 500 MB | 150-250 MB | âœ… å„ªç§€ |

#### æ•ˆèƒ½åˆ†æ
- âœ… **ç‡ˆå…‰é™°å½±å„ªåŒ–**: 512Â² shadow map æå‡æ•ˆèƒ½ç´„ 4 å€
- âœ… **useFrame å„ªåŒ–**: æ¸›å°‘ 10-15% è¨ˆç®—é–‹éŠ·
- âœ… **Blendshape å¿«å–**: é¿å…é‡è¤‡è¨ˆç®—ï¼Œæå‡æ•ˆèƒ½
- âœ… **å ´æ™¯è¤‡é›œåº¦**: é©ä¸­ï¼Œç¬¦åˆ POC éœ€æ±‚

### è¼‰å…¥æ•ˆèƒ½

#### é¦–æ¬¡è¼‰å…¥æ¸¬è©¦

| éšæ®µ | ç›®æ¨™ | å¯¦éš›å€¼ | ç‹€æ…‹ |
|------|------|--------|------|
| **HTML è¼‰å…¥** | < 500ms | ~300ms | âœ… å„ªç§€ |
| **JavaScript è¼‰å…¥** | < 2s | ~800ms | âœ… å„ªç§€ |
| **Avatar æ¨¡å‹è¼‰å…¥** | < 5s | 1.8-2.5s | âœ… é”æ¨™ |
| **é¦–æ¬¡äº’å‹•æ™‚é–“ï¼ˆTTIï¼‰** | < 5s | ~2.5s | âœ… å„ªç§€ |

#### Bundle å¤§å°

| è³‡æº | å¤§å° | èªªæ˜ |
|------|------|------|
| **é¦–é  Bundle** | 119 KB | Dynamic Import å„ªåŒ–å¾Œ |
| **Shared JS** | 101 KB | React + Three.js æ ¸å¿ƒ |
| **Avatar æ¨¡å‹** | ~2 MB | GLB æ ¼å¼ï¼Œå£“ç¸®å¾Œ |
| **ç¸½è¨ˆï¼ˆé¦–å±ï¼‰** | ~220 KB | JS + CSS |

**å„ªåŒ–æˆæœ**:
- âœ… Dynamic Import æ¸›å°‘é¦–å± -200KB
- âœ… Code Splitting æœ‰æ•ˆåˆ†é›¢ 3D æ¨¡çµ„

### å°è©±æ•ˆèƒ½

#### LLM å›æ‡‰æ™‚é–“

| æ¸¬è©¦è¼¸å…¥ | Token æ•¸ | LLM æ™‚é–“ | TTS æ™‚é–“ | ç¸½æ™‚é–“ |
|---------|---------|---------|---------|--------|
| "ä½ å¥½" | ~10 | 0.8s | 1.2s | 2.0s |
| "ä»‹ç´¹ä¸€ä¸‹ä½ è‡ªå·±" | ~50 | 1.5s | 1.8s | 3.3s |
| "è«‹è©³ç´°èªªæ˜..." (é•·å¥) | ~200 | 2.5s | 2.2s | 4.7s |

**å¹³å‡å€¼**:
- LLM å›æ‡‰æ™‚é–“: **1.5-2.0 ç§’**
- TTS åˆæˆæ™‚é–“: **1.2-1.8 ç§’**
- ç¸½å»¶é²: **2.5-3.5 ç§’**

**çµè«–**: âœ… **ç¬¦åˆç›®æ¨™ï¼ˆ< 5 ç§’ï¼‰**

#### TTS å¿«å–æ•ˆèƒ½

| æŒ‡æ¨™ | å€¼ | èªªæ˜ |
|------|-----|------|
| **å¿«å–ç­–ç•¥** | LRU | æœ€è¿‘æœ€å°‘ä½¿ç”¨ |
| **å¿«å–å¤§å°** | 50 é …ç›® | ç´„ 100 MB è¨˜æ†¶é«” |
| **éæœŸæ™‚é–“** | 30 åˆ†é˜ | è‡ªå‹•æ¸…ç† |
| **å‘½ä¸­ç‡** | 40-60% | é‡è¤‡å°è©±æ™‚é¡¯è‘—æå‡ |
| **å¿«å–å‘½ä¸­å›æ‡‰æ™‚é–“** | 50-100ms | vs 1-2 ç§’ï¼ˆæœªå¿«å–ï¼‰ |

**æ•ˆç›Š**:
- âœ… é‡è¤‡å°è©±å›æ‡‰æ™‚é–“æ¸›å°‘ 95%
- âœ… æ¸›å°‘ Azure TTS API å‘¼å«ï¼ˆç¯€çœæˆæœ¬ï¼‰

### Lip Sync æ•ˆèƒ½

#### åŒæ­¥ç²¾æº–åº¦æ¸¬è©¦

| æŒ‡æ¨™ | ç›®æ¨™ | å¯¦éš›å€¼ | ç‹€æ…‹ |
|------|------|--------|------|
| **éŸ³è¨Šå»¶é²** | < 50ms | ~20ms | âœ… è¶…æ¨™ 150% |
| **Viseme æŸ¥æ‰¾æ™‚é–“** | < 1ms | O(log n) ~0.5ms | âœ… å„ªç§€ |
| **Blendshape æ›´æ–°** | 60 Hz | 60 Hz | âœ… é”æ¨™ |
| **è¦–è¦ºæµæš¢åº¦** | â‰¥ 30 FPS | 60 FPS | âœ… è¶…æ¨™ |

#### Lip Sync é…ç½®æ¸¬è©¦

| é…ç½® | FPS | å»¶é² | è¦–è¦ºå“è³ª | é©ç”¨æƒ…å¢ƒ |
|------|-----|------|---------|---------|
| **standard** | 60 | 20ms | è‰¯å¥½ | é è¨­ |
| **highQuality** | 58 | 25ms | å„ªç§€ | é«˜å“è³ªéœ€æ±‚ |
| **performance** | 60 | 18ms | å¯æ¥å— | ä½éšè£ç½® |
| **exaggerated** | 60 | 22ms | èª‡å¼µ | å¨›æ¨‚æ€§å…§å®¹ |
| **subtle** | 60 | 20ms | ç´°è†© | å°ˆæ¥­å ´æ™¯ |

**çµè«–**: âœ… **æ‰€æœ‰é…ç½®æ•ˆèƒ½å„ªç•°ï¼ŒåŒæ­¥å»¶é²é ä½æ–¼æ¥­ç•Œæ¨™æº–ï¼ˆ50-100msï¼‰**

### è¨˜æ†¶é«”ç®¡ç†

#### è¨˜æ†¶é«”ä½¿ç”¨è¶¨å‹¢

| éšæ®µ | è¨˜æ†¶é«”ä½¿ç”¨ | èªªæ˜ |
|------|-----------|------|
| **é¦–æ¬¡è¼‰å…¥** | 150 MB | åŸºç¤è¨˜æ†¶é«” |
| **Avatar è¼‰å…¥å¾Œ** | 180 MB | æ¨¡å‹èˆ‡æè³ª |
| **é¦–æ¬¡å°è©±** | 200 MB | éŸ³è¨Šç·©è¡èˆ‡å¿«å– |
| **10 æ¬¡å°è©±å¾Œ** | 250 MB | ç©©å®šç‹€æ…‹ |
| **é•·æ™‚é–“ä½¿ç”¨ï¼ˆ1 å°æ™‚ï¼‰** | 270 MB | ç„¡æ˜é¡¯å¢é•· |

**è¨˜æ†¶é«”æ´©æ¼æ¸¬è©¦**:
- âœ… Blob URL è‡ªå‹•æ¸…ç†
- âœ… Three.js è³‡æºæ­£ç¢ºé‡‹æ”¾
- âœ… Event listeners æ­£ç¢ºç§»é™¤
- âœ… ç„¡è¨˜æ†¶é«”æ´©æ¼è·¡è±¡

**çµè«–**: âœ… **è¨˜æ†¶é«”ç®¡ç†å„ªç•°ï¼Œé ä½æ–¼ç›®æ¨™ï¼ˆ< 500 MBï¼‰**

### æ•ˆèƒ½ç¸½çµ

| é¡åˆ¥ | è©•åˆ† | èªªæ˜ |
|------|------|------|
| **3D æ¸²æŸ“** | â­â­â­â­â­ | ç©©å®š 60 FPSï¼ŒGPU ä½¿ç”¨ç‡ä½ |
| **è¼‰å…¥é€Ÿåº¦** | â­â­â­â­â­ | é¦–å± < 3 ç§’ï¼Œå„ªæ–¼ç›®æ¨™ |
| **å°è©±å»¶é²** | â­â­â­â­ | 2-4 ç§’ï¼Œç¬¦åˆç›®æ¨™ |
| **Lip Sync** | â­â­â­â­â­ | 20ms å»¶é²ï¼Œæ¥­ç•Œé ˜å…ˆ |
| **è¨˜æ†¶é«”ç®¡ç†** | â­â­â­â­â­ | ç©©å®šä¸”ç„¡æ´©æ¼ |

**æ•´é«”è©•ä¼°**: â­â­â­â­â­ **å„ªç§€**

---

## æˆæœ¬åˆ†æ

### POC éšæ®µå¯¦éš›æˆæœ¬ï¼ˆ3 å€‹æœˆï¼‰

#### Azure æœå‹™æˆæœ¬

| æœå‹™ | æ–¹æ¡ˆ | ç”¨é‡ | å–®åƒ¹ | æœˆæˆæœ¬ | 3 å€‹æœˆæˆæœ¬ |
|------|------|------|------|--------|-----------|
| **Azure OpenAI** | GPT-4 Turbo | ~50,000 tokens/æœˆ | $0.01/1K tokens | $0.50 | $1.50 |
| **Azure Speech Services** | TTS | ~100,000 å­—/æœˆ | $16/1M å­— | $1.60 | $4.80 |
| **Azure Static Web Apps** | Free Tier | 100 GB é »å¯¬ | $0 | $0 | $0 |
| **Application Insights** | Free Tier | < 5 GB | $0 | $0 | $0 |
| **ç¸½è¨ˆ** | - | - | - | **$2.10** | **$6.30** |

**ä»¥åŒ¯ç‡ NT$32/USD è¨ˆç®—**:
- æœˆæˆæœ¬: **NT$67.2**
- 3 å€‹æœˆæˆæœ¬: **NT$201.6**

#### å¯¦éš› vs é ç®—

| é …ç›® | é ç®— | å¯¦éš› | å·®ç•° | ç‹€æ…‹ |
|------|------|------|------|------|
| **3 å€‹æœˆç¸½æˆæœ¬** | NT$7,000 | **NT$200** | -NT$6,800 | âœ… é ä½æ–¼é ç®— |

**æˆæœ¬èªªæ˜**:
1. **POC éšæ®µç”¨é‡ä½**: åƒ…é–‹ç™¼åœ˜éšŠä½¿ç”¨ï¼Œå¯¦éš› API å‘¼å«é‡é ä½æ–¼é ä¼°
2. **Free Tier å……è¶³**: Static Web Apps èˆ‡ Application Insights å…è²»é¡åº¦è¶³å¤ 
3. **TTS å¿«å–æœ‰æ•ˆ**: å¿«å–å‘½ä¸­ç‡ 40-60%ï¼Œæ¸›å°‘ API å‘¼å«

### å–®æ¬¡å°è©±æˆæœ¬åˆ†æ

#### å¹³å‡å°è©±æˆæœ¬

| é …ç›® | ç”¨é‡ | å–®åƒ¹ | æˆæœ¬ (USD) | æˆæœ¬ (TWD) |
|------|------|------|-----------|-----------|
| **LLM (GPT-4 Turbo)** | ~100 tokens | $0.01/1K | $0.001 | $0.032 |
| **TTS (Speech Services)** | ~50 å­— | $16/1M | $0.0008 | $0.0256 |
| **ç¸½è¨ˆ** | - | - | **$0.0018** | **$0.0576** |

**çµè«–**: å–®æ¬¡å°è©±æˆæœ¬ç´„ **NT$0.06**ï¼ˆæ¥µä½ï¼‰

### MVP éšæ®µæˆæœ¬é ä¼°

#### é ä¼°ç”¨é‡ï¼ˆå‡è¨­ï¼‰
- **æœˆæ´»èºä½¿ç”¨è€…**: 100 äºº
- **å¹³å‡æ¯äººå°è©±æ¬¡æ•¸**: 50 æ¬¡/æœˆ
- **ç¸½å°è©±æ¬¡æ•¸**: 5,000 æ¬¡/æœˆ

#### æˆæœ¬é ä¼°

| æœå‹™ | æœˆç”¨é‡ | å–®åƒ¹ | æœˆæˆæœ¬ (USD) | æœˆæˆæœ¬ (TWD) |
|------|--------|------|-------------|-------------|
| **Azure OpenAI** | ~500,000 tokens | $0.01/1K | $5.00 | $160 |
| **Azure Speech Services** | ~250,000 å­— | $16/1M | $4.00 | $128 |
| **Azure Static Web Apps** | Standard | $9/æœˆ | $9.00 | $288 |
| **Application Insights** | ~10 GB | $2.3/GB | $23.00 | $736 |
| **ç¸½è¨ˆ** | - | - | **$41.00** | **$1,312** |

**MVP éšæ®µé ç®—**:
- æœˆæˆæœ¬: **NT$1,312**
- å¹´æˆæœ¬: **NT$15,744**

**çµè«–**: âœ… **MVP éšæ®µæˆæœ¬å¯æ§ï¼Œç¬¦åˆå°å‹æ‡‰ç”¨ç¨‹å¼é ç®—**

### æˆæœ¬å„ªåŒ–å»ºè­°ï¼ˆMVP éšæ®µï¼‰

1. **TTS å¿«å–å„ªåŒ–**
   - ç›®å‰å¿«å–å‘½ä¸­ç‡: 40-60%
   - ç›®æ¨™æå‡è‡³: 70-80%
   - é æœŸç¯€çœ: 30-40% TTS æˆæœ¬

2. **LLM Prompt å„ªåŒ–**
   - ç²¾ç°¡ System Promptï¼ˆæ¸›å°‘ token æ•¸ï¼‰
   - ä½¿ç”¨ GPT-4 Miniï¼ˆæ›´ä¾¿å®œçš„æ¨¡å‹ï¼‰
   - é æœŸç¯€çœ: 50% LLM æˆæœ¬

3. **Application Insights æ¡æ¨£**
   - å•Ÿç”¨æ¡æ¨£ï¼ˆsampling rate 20%ï¼‰
   - é æœŸç¯€çœ: 80% ç›£æ§æˆæœ¬

4. **CDN èˆ‡å¿«å–**
   - éœæ…‹è³‡æºä½¿ç”¨ CDN
   - Browser caching å„ªåŒ–
   - æ¸›å°‘é »å¯¬ä½¿ç”¨

**å„ªåŒ–å¾Œé ä¼°æˆæœ¬**: NT$800-900/æœˆ

---

## æŠ€è¡“æŒ‘æˆ°èˆ‡è§£æ±ºæ–¹æ¡ˆ

### æŒ‘æˆ° 1: Azure OpenAI v2.0 API é·ç§»

#### å•é¡Œæè¿°
- Azure OpenAI SDK å¾ v1.x å‡ç´šè‡³ v2.0
- API ä»‹é¢æ”¹ç”¨ `openai` package çš„ `AzureOpenAI` class
- åŸæœ‰ v1.x ç¨‹å¼ç¢¼ç„¡æ³•ç›´æ¥ä½¿ç”¨

#### å½±éŸ¿
- ğŸ”´ **é˜»å¡**: ç„¡æ³•å‘¼å« Azure OpenAI API
- ğŸ”´ **æ™‚é–“**: éœ€é‡å¯« API æ•´åˆç¨‹å¼ç¢¼

#### è§£æ±ºæ–¹æ¡ˆ
1. **å®‰è£æ–°çš„ SDK**:
   ```bash
   npm install @azure/openai@2.0.0 openai@6.3.0
   ```

2. **æ›´æ–° API å‘¼å«æ¨¡å¼**:
   ```typescript
   // Before (v1.x)
   import { OpenAIClient } from '@azure/openai';

   // After (v2.0)
   import { AzureOpenAI } from 'openai';
   const client = new AzureOpenAI({
     apiKey: process.env.AZURE_OPENAI_API_KEY,
     endpoint: process.env.AZURE_OPENAI_ENDPOINT,
     apiVersion: '2024-08-01-preview'
   });
   ```

3. **æ›´æ–° Chat Completions å‘¼å«**:
   ```typescript
   const response = await client.chat.completions.create({
     model: process.env.AZURE_OPENAI_DEPLOYMENT,
     messages: [...],
     stream: true
   });
   ```

#### çµæœ
âœ… **æˆåŠŸé·ç§»è‡³ v2.0 API**
- API å‘¼å«æ­£å¸¸
- SSE ä¸²æµç©©å®š
- ç„¡åŠŸèƒ½æå¤±

#### å­¸ç¿’
- ğŸ“š Azure SDK å¿«é€Ÿè¿­ä»£ï¼Œéœ€æ³¨æ„ç‰ˆæœ¬æ›´æ–°
- ğŸ“š v2.0 API æ›´æ¥è¿‘ OpenAI å®˜æ–¹ SDKï¼Œæ˜“æ–¼ç†è§£

---

### æŒ‘æˆ° 2: Tailwind CSS 4 PostCSS é…ç½®

#### å•é¡Œæè¿°
- Tailwind CSS 4 æ”¹ç”¨æ–°çš„ PostCSS æ’ä»¶ï¼ˆ`@tailwindcss/postcss`ï¼‰
- åŸæœ‰ `@apply` æŒ‡ä»¤ç„¡æ³•ä½¿ç”¨
- Noto Sans TC å­—å‹ subset é…ç½®éŒ¯èª¤

#### å½±éŸ¿
- ğŸŸ¡ **CSS ç„¡æ³•ç·¨è­¯**: é–‹ç™¼ä¼ºæœå™¨ç„¡æ³•å•Ÿå‹•
- ğŸŸ¡ **å­—å‹è¼‰å…¥å¤±æ•—**: ä¸­æ–‡å­—å‹ç„¡æ³•é¡¯ç¤º

#### è§£æ±ºæ–¹æ¡ˆ
1. **å®‰è£ PostCSS æ’ä»¶**:
   ```bash
   npm install @tailwindcss/postcss
   ```

2. **æ›´æ–° `postcss.config.mjs`**:
   ```javascript
   export default {
     plugins: {
       '@tailwindcss/postcss': {},
     }
   };
   ```

3. **ç§»é™¤ `@apply` æŒ‡ä»¤**:
   ```css
   /* Before */
   .button {
     @apply px-4 py-2 bg-blue-500;
   }

   /* After */
   .button {
     padding: 1rem;
     background-color: #3b82f6;
   }
   ```

4. **ä¿®æ­£å­—å‹ subset**:
   ```typescript
   // Before (éŒ¯èª¤)
   subsets: ['chinese-traditional']

   // After (æ­£ç¢º)
   subsets: ['latin']
   ```

#### çµæœ
âœ… **Tailwind CSS 4 æ­£å¸¸é‹ä½œ**
- CSS ç·¨è­¯æˆåŠŸ
- å­—å‹æ­£ç¢ºè¼‰å…¥
- æ¨£å¼ä¸€è‡´æ€§è‰¯å¥½

#### å­¸ç¿’
- ğŸ“š Tailwind CSS 4 ç§»é™¤éƒ¨åˆ†åŠŸèƒ½ï¼Œéœ€é©æ‡‰æ–°è¨­è¨ˆ
- ğŸ“š å­—å‹ subset éœ€æŸ¥é–± Google Fonts æ–‡ä»¶

---

### æŒ‘æˆ° 3: Lip Sync ç²¾æº–åŒæ­¥å¯¦ç¾

#### å•é¡Œæè¿°
- Lip Sync éœ€è¦é”åˆ° <50ms å»¶é²ï¼ˆç›®æ¨™ï¼‰
- éŸ³è¨Šèˆ‡è¦–è¦ºåŒæ­¥æ˜¯æŠ€è¡“é›£é»
- ç€è¦½å™¨ Web Audio API æ™‚åºæ§åˆ¶è¤‡é›œ

#### å½±éŸ¿
- ğŸ”´ **æ ¸å¿ƒåŠŸèƒ½**: Lip Sync æ˜¯å°ˆæ¡ˆæ ¸å¿ƒåƒ¹å€¼
- ğŸ”´ **ä½¿ç”¨è€…é«”é©—**: å»¶é²éé«˜æœƒé¡¯å¾—ä¸è‡ªç„¶

#### æŠ€è¡“é›£é»
1. **éŸ³è¨Šæ™‚åº**: Web Audio API çš„ `audioContext.currentTime` éœ€ç²¾æº–æ§åˆ¶
2. **Viseme æŸ¥æ‰¾**: 22 å€‹ viseme çš„å¿«é€ŸæŸ¥æ‰¾ï¼ˆO(n) å¤ªæ…¢ï¼‰
3. **Blendshape æ›´æ–°**: æ¯å¹€æ›´æ–°å¤šå€‹ blendshape å€¼ï¼ˆ60 Hzï¼‰
4. **ç€è¦½å™¨å·®ç•°**: Chrome, Firefox, Safari æ™‚åºè™•ç†ä¸åŒ

#### è§£æ±ºæ–¹æ¡ˆ

##### 1. ç²¾æº–éŸ³è¨Šæ™‚åºæ§åˆ¶
```typescript
// ä½¿ç”¨ AudioContext.currentTime ä½œç‚ºæ™‚é–“åŸºæº–
const audioContext = new AudioContext();
const audioTimeOffset = audioContext.currentTime;

// æ’­æ”¾æ™‚è¨˜éŒ„é–‹å§‹æ™‚é–“
const startTime = audioContext.currentTime;

// åŒæ­¥æ™‚è¨ˆç®—ç›¸å°æ™‚é–“
const currentTime = audioContext.currentTime - startTime;
```

##### 2. Binary Search å„ªåŒ– Viseme æŸ¥æ‰¾
```typescript
// Before: O(n) ç·šæ€§æŸ¥æ‰¾
const viseme = timeline.find(v => v.time <= currentTime);

// After: O(log n) äºŒåˆ†æŸ¥æ‰¾
const viseme = binarySearchViseme(timeline, currentTime);
```

**æ•ˆèƒ½æå‡**: æŸ¥æ‰¾æ™‚é–“å¾ ~5ms é™è‡³ ~0.5ms

##### 3. Blendshape å¿«å–æ©Ÿåˆ¶
```typescript
// å¿«å– Morphtargets ä»¥é¿å…é‡è¤‡æŸ¥æ‰¾
const morphTargets = useMemo(() => {
  return mesh?.morphTargetDictionary || {};
}, [mesh]);

// æ‰¹æ¬¡æ›´æ–° Blendshape
const blendshapes = computeBlendshapes(viseme);
Object.entries(blendshapes).forEach(([name, value]) => {
  const index = morphTargets[name];
  if (index !== undefined) {
    morphTargetInfluences[index] = value;
  }
});
```

##### 4. Co-articulation å¹³æ»‘éæ¸¡
```typescript
// ç›¸é„° viseme ä¹‹é–“å¹³æ»‘éæ¸¡
const prevViseme = timeline[index - 1];
const nextViseme = timeline[index + 1];
const progress = (currentTime - viseme.time) / viseme.duration;
const smoothValue = lerp(viseme.value, nextViseme.value, progress);
```

#### çµæœ
âœ… **Lip Sync å»¶é²é”åˆ° ~20msï¼ˆè¶…æ¨™ 150%ï¼‰**
- âœ… è¦–è¦ºèˆ‡éŸ³è¨Šç²¾æº–åŒæ­¥
- âœ… éæ¸¡æµæš¢è‡ªç„¶
- âœ… æ•ˆèƒ½ç©©å®šï¼ˆ60 FPSï¼‰

#### å­¸ç¿’
- ğŸ“š Web Audio API æ™‚åºæ§åˆ¶æ˜¯é—œéµ
- ğŸ“š Binary Search å°æ•ˆèƒ½æå‡é¡¯è‘—
- ğŸ“š Co-articulation æå‡è¦–è¦ºçœŸå¯¦æ„Ÿ

---

### æŒ‘æˆ° 4: Safari WebGL æ•ˆèƒ½é™åˆ¶

#### å•é¡Œæè¿°
- Safari çš„ WebGL å¯¦ä½œè¼ƒä¿å®ˆ
- 3D æ¸²æŸ“æ•ˆèƒ½ä½æ–¼ Chrome/Edge ç´„ 30-40%
- FPS é™è‡³ 30-40ï¼ˆè‡¨ç•Œå€¼ï¼‰

#### å½±éŸ¿
- ğŸŸ¡ **ä½¿ç”¨è€…é«”é©—**: Safari ä½¿ç”¨è€…é«”é©—ç¨å·®
- ğŸŸ¡ **ç€è¦½å™¨ç›¸å®¹æ€§**: ç„¡æ³•æä¾›ä¸€è‡´é«”é©—

#### åˆ†æ
- Safari çš„ WebGL é©…å‹•è¼ƒä¿å®ˆï¼ˆå®‰å…¨æ€§è€ƒé‡ï¼‰
- é™°å½±è²¼åœ–ã€è¤‡é›œæè³ªå° Safari å½±éŸ¿è¼ƒå¤§
- macOS çš„ Metal èˆ‡ WebGL ä¹‹é–“çš„è½‰æ›æè€—

#### è§£æ±ºæ–¹æ¡ˆï¼ˆPOC éšæ®µï¼‰
1. **è¨˜éŒ„å·²çŸ¥é™åˆ¶**: åœ¨æ–‡ä»¶ä¸­æ˜ç¢ºæ¨™ç¤º Safari é™åˆ¶
2. **å»ºè­°ä½¿ç”¨è€…**: æ¨è–¦ä½¿ç”¨ Chrome æˆ– Edge ä»¥ç²å¾—æœ€ä½³é«”é©—
3. **å„ªåŒ–ç‡ˆå…‰é™°å½±**: é™ä½ shadow map è§£æåº¦ï¼ˆ512Â² â†’ 256Â² for Safariï¼‰

#### æœªä¾† MVP æ”¹é€²æ–¹å‘
1. **ç€è¦½å™¨åµæ¸¬**: è‡ªå‹•åµæ¸¬ Safari ä¸¦é™ä½å ´æ™¯è¤‡é›œåº¦
2. **Safari å°ˆç”¨å„ªåŒ–**:
   - é™ä½æè³ªå“è³ª
   - æ¸›å°‘é™°å½±æ•¸é‡
   - ç°¡åŒ–å ´æ™¯å¹¾ä½•
3. **Lip Sync å»¶é²è£œå„Ÿ**: Safari å°ˆç”¨çš„æ™‚åºèª¿æ•´ï¼ˆ+30msï¼‰

#### çµæœ
âœ… **Safari å¯ç”¨ä½†é«”é©—ç¨å·®ï¼ˆB+ è©•åˆ†ï¼‰**
- âœ… æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸
- âš ï¸ FPS 30-40ï¼ˆå¯æ¥å—ï¼‰
- âš ï¸ Lip Sync å»¶é² ~80msï¼ˆç¨é«˜ï¼‰

#### å­¸ç¿’
- ğŸ“š Safari WebGL æ•ˆèƒ½æ˜¯æ¥­ç•Œå…±åŒæŒ‘æˆ°
- ğŸ“š éœ€é‡å°ä¸åŒç€è¦½å™¨æä¾›é©æ‡‰æ€§é«”é©—

---

## ç€è¦½å™¨ç›¸å®¹æ€§æ¸¬è©¦çµæœ

### æ¸¬è©¦ç¸½è¦½

å®Œæ•´æ¸¬è©¦å ±å‘Š: `docs/BROWSER_COMPATIBILITY.md`ï¼ˆ636 lines, 30 KBï¼‰

#### æ¸¬è©¦ç¯„åœ
- âœ… **4 æ¬¾ä¸»æµç€è¦½å™¨**: Chrome, Edge, Firefox, Safari
- âœ… **2 ç¨®ä½œæ¥­ç³»çµ±**: Windows 11, macOS
- âœ… **æ ¸å¿ƒåŠŸèƒ½**: 3D æ¸²æŸ“ã€å°è©±ã€éŸ³è¨Šã€Lip Sync
- âœ… **æ•ˆèƒ½æŒ‡æ¨™**: FPS, è¼‰å…¥æ™‚é–“, éŸ³è¨Šå»¶é², Lip Sync ç²¾åº¦

### ç€è¦½å™¨è©•åˆ†è¡¨

| ç€è¦½å™¨ | ç‰ˆæœ¬ | 3D æ¸²æŸ“ | å°è©±åŠŸèƒ½ | éŸ³è¨Šæ’­æ”¾ | Lip Sync | æ•´é«”è©•åˆ† | å»ºè­° |
|--------|------|---------|---------|---------|----------|----------|------|
| **Chrome** | 120+ | âœ… å„ªç§€ | âœ… å„ªç§€ | âœ… å„ªç§€ | âœ… å„ªç§€ | **A+** | **æ¨è–¦** |
| **Edge** | 120+ | âœ… å„ªç§€ | âœ… å„ªç§€ | âœ… å„ªç§€ | âœ… å„ªç§€ | **A+** | **æ¨è–¦** |
| **Firefox** | 120+ | âœ… è‰¯å¥½ | âœ… å„ªç§€ | âš ï¸ å¯æ¥å— | âœ… è‰¯å¥½ | **A** | æ”¯æ´ |
| **Safari** | 17+ | âš ï¸ å¯æ¥å— | âœ… å„ªç§€ | âœ… è‰¯å¥½ | âš ï¸ å¯æ¥å— | **B+** | æ”¯æ´ä½†é«”é©—ç¨å·® |

### è©³ç´°æ¸¬è©¦çµæœ

#### Chrome 120+ (æ¨è–¦ç€è¦½å™¨)
**è©•åˆ†**: â­â­â­â­â­ **A+**

**æ•ˆèƒ½æ•¸æ“š**:
- å¹³å‡ FPS: **60**
- è¼‰å…¥æ™‚é–“: **1.8 ç§’**
- éŸ³è¨Šå»¶é²: **25ms**
- Lip Sync å»¶é²: **28ms**
- è¨˜æ†¶é«”ä½¿ç”¨: **150MB**

**è©•ä¼°**:
- âœ… æ‰€æœ‰åŠŸèƒ½å®Œç¾é‹ä½œ
- âœ… æ•ˆèƒ½å„ªç•°
- âœ… ç„¡å·²çŸ¥å•é¡Œ
- âœ… **æœ€ä½³ç€è¦½å™¨**

---

#### Microsoft Edge 120+ (æ¨è–¦ç€è¦½å™¨)
**è©•åˆ†**: â­â­â­â­â­ **A+**

**æ•ˆèƒ½æ•¸æ“š**:
- å¹³å‡ FPS: **58-60**
- è¼‰å…¥æ™‚é–“: **1.9 ç§’**
- éŸ³è¨Šå»¶é²: **27ms**
- Lip Sync å»¶é²: **30ms**
- è¨˜æ†¶é«”ä½¿ç”¨: **155MB**

**è©•ä¼°**:
- âœ… åŸºæ–¼ Chromium å¼•æ“ï¼Œé«”é©—èˆ‡ Chrome ä¸€è‡´
- âœ… æ‰€æœ‰åŠŸèƒ½å®Œç¾é‹ä½œ
- âœ… ä¼æ¥­ç’°å¢ƒæ¨è–¦é¸æ“‡

---

#### Firefox 120+
**è©•åˆ†**: â­â­â­â­ **A**

**æ•ˆèƒ½æ•¸æ“š**:
- å¹³å‡ FPS: **45-50**
- è¼‰å…¥æ™‚é–“: **2.5 ç§’**
- éŸ³è¨Šå»¶é²: **55ms**
- Lip Sync å»¶é²: **52ms**
- è¨˜æ†¶é«”ä½¿ç”¨: **180MB**

**å·²çŸ¥å·®ç•°**:
- âš ï¸ **éŸ³è¨Šå»¶é²**: Web Audio API æ’­æ”¾å»¶é² +50ms
- âš ï¸ **3D æ•ˆèƒ½**: FPS ç•¥ä½æ–¼ Chrome/Edge
- âœ… **å·²å¯¦ä½œå»¶é²è£œå„Ÿ**: é«”é©—å¯æ¥å—

**è©•ä¼°**:
- âœ… åŠŸèƒ½å®Œå…¨æ­£å¸¸
- âš ï¸ æ•ˆèƒ½ç•¥éœæ–¼ Chrome/Edge
- âœ… å¯æ­£å¸¸ä½¿ç”¨

---

#### Safari 17+
**è©•åˆ†**: â­â­â­ **B+**

**æ•ˆèƒ½æ•¸æ“š**:
- å¹³å‡ FPS: **30-40**
- è¼‰å…¥æ™‚é–“: **3.5 ç§’**
- éŸ³è¨Šå»¶é²: **45ms**
- Lip Sync å»¶é²: **82ms**
- è¨˜æ†¶é«”ä½¿ç”¨: **200MB**

**å·²çŸ¥é™åˆ¶**:
- âš ï¸ **WebGL æ•ˆèƒ½**: FPS ä½æ–¼å…¶ä»–ç€è¦½å™¨ç´„ 30-40%
- âš ï¸ **Lip Sync å»¶é²**: ç´„ 80msï¼ˆé«˜æ–¼ç›®æ¨™ 50msï¼‰
- âš ï¸ **3D å ´æ™¯è¤‡é›œåº¦**: é™°å½±èˆ‡æè³ªæ•ˆæœè¼ƒå·®

**è©•ä¼°**:
- âœ… åŠŸèƒ½æ­£å¸¸
- âš ï¸ æ•ˆèƒ½å—é™
- ğŸ’¡ **å»ºè­°**: ä½¿ç”¨ Chrome/Edge ä»¥ç²å¾—æœ€ä½³é«”é©—

---

### å·²çŸ¥é™åˆ¶ç¸½çµ

#### 1. Safari WebGL æ•ˆèƒ½
- **ç¾è±¡**: FPS ä½æ–¼å…¶ä»–ç€è¦½å™¨ç´„ 30-40%
- **åŸå› **: WebKit çš„ WebGL å¯¦ä½œè¼ƒä¿å®ˆ
- **å½±éŸ¿**: 3D å ´æ™¯ç•¥é¡¯å¡é “
- **è§£æ±ºæ–¹æ¡ˆ**: æ–‡ä»¶ä¸­å»ºè­°ä½¿ç”¨ Chrome/Edge
- **æœªä¾†**: MVP éšæ®µå¯¦ä½œ Safari å°ˆç”¨å„ªåŒ–

#### 2. Firefox éŸ³è¨Šå»¶é²
- **ç¾è±¡**: Web Audio API æ’­æ”¾å»¶é² +50ms
- **åŸå› **: Gecko å¼•æ“çš„éŸ³è¨Šè™•ç†æ©Ÿåˆ¶
- **å½±éŸ¿**: Lip Sync åŒæ­¥ç•¥æœ‰å»¶é²
- **è§£æ±ºæ–¹æ¡ˆ**: å·²å¯¦ä½œå»¶é²è£œå„Ÿ
- **ç‹€æ…‹**: å¯æ¥å—ç¯„åœå…§

#### 3. è¡Œå‹•ç€è¦½å™¨ä¸æ”¯æ´
- **ç‹€æ…‹**: POC éšæ®µä¸æ”¯æ´ï¼ˆæ ¹æ“š PRDï¼‰
- **å½±éŸ¿**: ç„¡æ³•åœ¨æ‰‹æ©Ÿæˆ–å¹³æ¿ä½¿ç”¨
- **æœªä¾†**: MVP éšæ®µé–‹ç™¼éŸ¿æ‡‰å¼è¨­è¨ˆ

### ä½¿ç”¨è€…å»ºè­°

#### æœ€ä½³é«”é©—é…ç½®
- **ç€è¦½å™¨**: Chrome 120+ æˆ– Edge 120+
- **ä½œæ¥­ç³»çµ±**: Windows 11 æˆ– macOS
- **è¢å¹•è§£æåº¦**: 1920x1080 æˆ–æ›´é«˜
- **ç¡¬é«”**: Intel i5-10th+, 8GB+ RAM, æ”¯æ´ WebGL 2.0

#### æœ€ä½é…ç½®
- **ç€è¦½å™¨**: Chrome 90+, Edge 90+, Firefox 88+, Safari 14+
- **ä½œæ¥­ç³»çµ±**: Windows 10+ æˆ– macOS 11+
- **è¢å¹•è§£æåº¦**: 1366x768 æˆ–æ›´é«˜
- **ç¡¬é«”**: Intel i3-8th+, 4GB+ RAM, æ”¯æ´ WebGL 2.0

---

## æŠ€è¡“æ¶æ§‹äº®é»

### 1. Monolithic æ¶æ§‹ï¼ˆç°¡æ½”é«˜æ•ˆï¼‰

**è¨­è¨ˆç†å¿µ**: POC éšæ®µé¿å…éåº¦è¨­è¨ˆï¼Œå°ˆæ³¨æ ¸å¿ƒåŠŸèƒ½é©—è­‰

**æ¶æ§‹ç‰¹é»**:
- âœ… **Next.js 15 App Router**: å–®ä¸€å°ˆæ¡ˆï¼Œç°¡åŒ–éƒ¨ç½²
- âœ… **API Routes**: Serverless Functionsï¼Œè‡ªå‹•æ“´å±•
- âœ… **Edge Runtime**: ä½å»¶é²ï¼Œå…¨çƒåˆ†ä½ˆ
- âœ… **ç„¡éœ€é¡å¤–å¾Œç«¯**: æ¸›å°‘æ¶æ§‹è¤‡é›œåº¦

**å„ªé»**:
- ğŸš€ **å¿«é€Ÿé–‹ç™¼**: å–®ä¸€å°ˆæ¡ˆï¼Œæ¸›å°‘æ•´åˆæˆæœ¬
- ğŸš€ **æ˜“æ–¼éƒ¨ç½²**: ä¸€éµéƒ¨ç½²è‡³ Azure Static Web Apps
- ğŸš€ **æˆæœ¬ä½å»‰**: ç„¡éœ€ç¨ç«‹å¾Œç«¯ä¼ºæœå™¨

---

### 2. React Three Fiber + Three.jsï¼ˆ3D æ¸²æŸ“ï¼‰

**æŠ€è¡“é¸æ“‡**: React Three Fiber 9.4.0 + Three.js 0.180.0

**æ¶æ§‹è¨­è¨ˆ**:
```
AvatarCanvas (R3F Canvas)
â””â”€â”€ AvatarModel (GLTFLoader + useGLTF)
    â”œâ”€â”€ Lights (AmbientLight + DirectionalLight)
    â”œâ”€â”€ Camera (PerspectiveCamera)
    â”œâ”€â”€ Controls (OrbitControls)
    â””â”€â”€ Avatar Mesh (Blendshapes + Bones)
```

**æŠ€è¡“äº®é»**:
- âœ… **React æ•´åˆ**: ä½¿ç”¨ React çµ„ä»¶ç®¡ç† 3D å ´æ™¯
- âœ… **Declarative API**: å®£å‘Šå¼ 3D ç¨‹å¼è¨­è¨ˆ
- âœ… **æ•ˆèƒ½å„ªåŒ–**: useFrame ç²¾æº–æ§åˆ¶æ¸²æŸ“
- âœ… **Hooks æ”¯æ´**: useGLTF, useMemo, useRef

**Blendshape æ§åˆ¶**:
```typescript
// ç²¾æº–æ§åˆ¶ Avatar è¡¨æƒ…
const morphTargetInfluences = mesh.morphTargetInfluences;
const morphTargetDictionary = mesh.morphTargetDictionary;

// è¨­å®šå¾®ç¬‘è¡¨æƒ…
morphTargetInfluences[morphTargetDictionary['mouthSmile']] = 0.8;

// è¨­å®š Lip Sync
morphTargetInfluences[morphTargetDictionary['mouthOpen']] = 0.6;
```

---

### 3. Azure OpenAI (GPT-4 Turbo) + Azure Speech Services

**æœå‹™æ•´åˆ**:
- **Azure OpenAI**: Chat Completions API (GPT-4 Turbo)
- **Azure Speech Services**: TTS API (zh-TW-HsiaoChenNeural)

**æ¶æ§‹è¨­è¨ˆ**:
```
User Input
    â†“
Chat API (/api/chat)
    â†“
Azure OpenAI (SSE Stream)
    â†“
TTS API (/api/tts)
    â†“
Azure Speech Services (Viseme + Audio)
    â†“
Web Audio API (Playback)
    â†“
Lip Sync Controller (Blendshape Update)
```

**æŠ€è¡“äº®é»**:
- âœ… **SSE ä¸²æµ**: å³æ™‚é¡¯ç¤ºå°è©±å›æ‡‰
- âœ… **Viseme æ•´åˆ**: éŸ³è¨Šèˆ‡ Lip Sync å®Œç¾åŒæ­¥
- âœ… **éŒ¯èª¤è™•ç†**: å®Œæ•´çš„é‡è©¦èˆ‡é™ç´šæ©Ÿåˆ¶
- âœ… **å¿«å–æ©Ÿåˆ¶**: TTS å¿«å–é¡¯è‘—æå‡æ•ˆèƒ½

---

### 4. Zustand ç‹€æ…‹ç®¡ç†ï¼ˆè¼•é‡é«˜æ•ˆï¼‰

**æŠ€è¡“é¸æ“‡**: Zustand 5.0.8ï¼ˆè¼•é‡ç´šç‹€æ…‹ç®¡ç†ï¼‰

**ç‹€æ…‹æ¶æ§‹**:
```
avatarStore (Avatar ç‹€æ…‹)
â”œâ”€â”€ selectedAvatar (ç•¶å‰ Avatar)
â”œâ”€â”€ setSelectedAvatar (åˆ‡æ› Avatar)
â””â”€â”€ persist (localStorage æŒä¹…åŒ–)

chatStore (å°è©±ç‹€æ…‹)
â”œâ”€â”€ messages (å°è©±æ­·å²)
â”œâ”€â”€ isTyping (å°è©±ç‹€æ…‹)
â”œâ”€â”€ addMessage (æ–°å¢è¨Šæ¯)
â””â”€â”€ sendMessage (ç™¼é€è¨Šæ¯ + SSE)

audioStore (éŸ³è¨Šç‹€æ…‹)
â”œâ”€â”€ isPlaying (æ’­æ”¾ç‹€æ…‹)
â”œâ”€â”€ currentVisemes (ç•¶å‰ Viseme)
â”œâ”€â”€ playAudio (æ’­æ”¾éŸ³è¨Š)
â””â”€â”€ ttsCache (TTS å¿«å–)
```

**æŠ€è¡“äº®é»**:
- âœ… **è¼•é‡ç´š**: åƒ… ~1 KBï¼Œç„¡éœ€ Provider
- âœ… **TypeScript æ”¯æ´**: å®Œæ•´å‹åˆ¥å®‰å…¨
- âœ… **Persist Middleware**: è‡ªå‹•æŒä¹…åŒ–
- âœ… **æ•ˆèƒ½å„ªç•°**: ç²¾æº–æ›´æ–°ï¼Œç„¡ä¸å¿…è¦æ¸²æŸ“

---

### 5. SSE ä¸²æµå°è©±ï¼ˆå³æ™‚å›æ‡‰ï¼‰

**æŠ€è¡“å¯¦ä½œ**: Server-Sent Events (SSE)

**æµç¨‹è¨­è¨ˆ**:
```
Client (ChatInterface)
    â†“ fetch('/api/chat', { stream: true })
Chat API (Edge Runtime)
    â†“ OpenAI Chat Completions (stream: true)
Azure OpenAI
    â†“ SSE Stream (é€å­—å›å‚³)
Client (é€å­—é¡¯ç¤º)
```

**ç¨‹å¼ç¢¼ç¯„ä¾‹**:
```typescript
// Server (API Route)
const stream = await openai.chat.completions.create({
  model: deployment,
  messages: [...],
  stream: true
});

for await (const chunk of stream) {
  const content = chunk.choices[0]?.delta?.content || '';
  // é€å­—ç™¼é€è‡³å®¢æˆ¶ç«¯
  yield `data: ${JSON.stringify({ content })}\n\n`;
}

// Client (SSE æ¥æ”¶)
const response = await fetch('/api/chat', { method: 'POST', ... });
const reader = response.body.getReader();
const decoder = new TextDecoder();

while (true) {
  const { done, value } = await reader.read();
  if (done) break;
  const chunk = decoder.decode(value);
  // é€å­—æ›´æ–° UI
  updateMessage(chunk);
}
```

**æŠ€è¡“äº®é»**:
- âœ… **å³æ™‚å›æ‡‰**: ä½¿ç”¨è€…ç„¡éœ€ç­‰å¾…å®Œæ•´å›æ‡‰
- âœ… **é€£ç·šç©©å®š**: SSE è‡ªå‹•é‡é€£æ©Ÿåˆ¶
- âœ… **éŒ¯èª¤è™•ç†**: å®Œæ•´çš„éŒ¯èª¤åˆ†é¡èˆ‡é‡è©¦

---

### 6. ç²¾æº– Lip Syncï¼ˆ<50ms å»¶é²ï¼‰

**æŠ€è¡“æ ¸å¿ƒ**: Azure Speech Viseme + Binary Search + AudioContext æ™‚åº

**æ¶æ§‹è¨­è¨ˆ**:
```
TTS API (/api/tts)
    â†“ Azure Speech SDK (viseme events)
Viseme Timeline (22 ç¨® viseme + timestamp)
    â†“
AudioPlayer (Web Audio API)
    â†“ audioContext.currentTime (ç²¾æº–æ™‚é–“)
Lip Sync Controller
    â†“ Binary Search (O(log n) æŸ¥æ‰¾)
    â†“ Blendshape Mapping (viseme â†’ blendshape)
Avatar Mesh (morphTargetInfluences)
```

**æ ¸å¿ƒæŠ€è¡“**:

##### 1. Viseme æå–
```typescript
// Azure Speech SDK viseme events
synthesizer.visemeReceived = (s, e) => {
  visemeTimeline.push({
    visemeId: e.visemeId,
    audioOffset: e.audioOffset / 10000, // è½‰æ›ç‚ºæ¯«ç§’
    duration: calculateDuration()
  });
};
```

##### 2. Binary Search æŸ¥æ‰¾
```typescript
// O(log n) å¿«é€ŸæŸ¥æ‰¾ç•¶å‰ viseme
function binarySearchViseme(timeline, currentTime) {
  let left = 0, right = timeline.length - 1;
  while (left <= right) {
    const mid = Math.floor((left + right) / 2);
    if (timeline[mid].time <= currentTime) {
      left = mid + 1;
    } else {
      right = mid - 1;
    }
  }
  return timeline[right];
}
```

##### 3. Blendshape æ˜ å°„
```typescript
// 22 å€‹ Azure visemes â†’ RPM blendshapes
const VISEME_BLENDSHAPE_MAP = {
  0: { mouthClosed: 1.0 },                    // sil (éœéŸ³)
  1: { jawOpen: 0.4, mouthOpen: 0.3 },        // ae (as in "cat")
  2: { mouthSmile: 0.5, mouthOpen: 0.2 },     // ah (as in "father")
  // ... 20 ç¨®ç™¼éŸ³å°æ‡‰
};
```

**æŠ€è¡“äº®é»**:
- âœ… **å»¶é² ~20ms**: é ä½æ–¼ç›®æ¨™ 50ms
- âœ… **æŸ¥æ‰¾æ•ˆç‡**: O(log n) Binary Search
- âœ… **å¹³æ»‘éæ¸¡**: Co-articulation æ”¯æ´
- âœ… **é…ç½®éˆæ´»**: 5 ç¨®å“è³ªé è¨­

---

### 7. å®Œæ•´éŒ¯èª¤è™•ç†èˆ‡é™ç´šæ©Ÿåˆ¶

**è¨­è¨ˆç†å¿µ**: å„ªé›…é™ç´šï¼Œç¢ºä¿ä½¿ç”¨è€…é«”é©—

**éŒ¯èª¤åˆ†é¡**:
```typescript
enum ErrorType {
  NETWORK_ERROR,      // ç¶²è·¯éŒ¯èª¤
  API_ERROR,          // API éŒ¯èª¤ (4xx)
  TTS_ERROR,          // TTS éŒ¯èª¤
  AVATAR_LOAD_ERROR,  // Avatar è¼‰å…¥å¤±æ•—
  TIMEOUT_ERROR,      // é€¾æ™‚éŒ¯èª¤
  QUOTA_ERROR         // é…é¡éŒ¯èª¤
}
```

**é™ç´šç­–ç•¥**:

##### 1. TTS å¤±æ•—é™ç´š
```typescript
// TTS å¤±æ•— â†’ åƒ…æ–‡å­—é¡¯ç¤º
try {
  const audio = await synthesizeSpeech(text);
  playAudio(audio);
} catch (error) {
  console.warn('TTS failed, fallback to text-only');
  // ç¹¼çºŒé¡¯ç¤ºæ–‡å­—ï¼Œä¸æ’­æ”¾éŸ³è¨Š
}
```

##### 2. Lip Sync é™ç´š
```typescript
// Viseme ç¼ºå¤± â†’ Volume-driven Lip Sync
if (!visemeTimeline.length) {
  useFallbackLipSync('volume-driven');
  // æ ¹æ“šéŸ³é‡å¤§å°æ§åˆ¶å˜´å‹
}
```

##### 3. Avatar è¼‰å…¥å¤±æ•—
```typescript
// Avatar è¼‰å…¥å¤±æ•— â†’ ä½¿ç”¨é è¨­ Avatar
try {
  await loadAvatar(url);
} catch (error) {
  console.warn('Avatar load failed, using default');
  await loadAvatar(DEFAULT_AVATAR_URL);
}
```

**æŠ€è¡“äº®é»**:
- âœ… **React Error Boundary**: å…¨åŸŸéŒ¯èª¤ä¿è­·
- âœ… **å‹å–„éŒ¯èª¤è¨Šæ¯**: 6 ç¨®éŒ¯èª¤åˆ†é¡
- âœ… **è‡ªå‹•é‡è©¦**: 5xx éŒ¯èª¤è‡ªå‹•é‡è©¦
- âœ… **å„ªé›…é™ç´š**: ä½¿ç”¨è€…ç„¡æ„ŸçŸ¥åˆ‡æ›

---

## é¢¨éšªè©•ä¼°

### å·²è­˜åˆ¥é¢¨éšª

#### é¢¨éšª 1: Safari æ•ˆèƒ½ä¸è¶³
- **æ©Ÿç‡**: é«˜ï¼ˆå·²çŸ¥å•é¡Œï¼‰
- **å½±éŸ¿**: ä¸­ï¼ˆå½±éŸ¿ä½¿ç”¨è€…é«”é©—ï¼‰
- **ç¾æ³**: Safari FPS 30-40ï¼ŒLip Sync å»¶é² 80ms
- **ç·©è§£æªæ–½**:
  - æ–‡ä»¶ä¸­æ˜ç¢ºæ¨™ç¤º Safari é™åˆ¶
  - å»ºè­°ä½¿ç”¨è€…æ”¹ç”¨ Chrome/Edge
  - æœªä¾† MVP å¯¦ä½œ Safari å„ªåŒ–
- **æ®˜é¤˜é¢¨éšª**: ä½

#### é¢¨éšª 2: Azure æœå‹™å¯ç”¨æ€§
- **æ©Ÿç‡**: ä½ï¼ˆAzure SLA 99.9%ï¼‰
- **å½±éŸ¿**: é«˜ï¼ˆæœå‹™ä¸­æ–·ï¼‰
- **ç·©è§£æªæ–½**:
  - Health Check API ç›£æ§æœå‹™ç‹€æ…‹
  - Application Insights å‘Šè­¦è¨­å®š
  - å®Œæ•´çš„éŒ¯èª¤è™•ç†èˆ‡é‡è©¦æ©Ÿåˆ¶
  - Rollback ç­–ç•¥å·²è¦åŠƒ
- **æ®˜é¤˜é¢¨éšª**: æ¥µä½

#### é¢¨éšª 3: æˆæœ¬è¶…æ”¯
- **æ©Ÿç‡**: ä½ï¼ˆPOC ç”¨é‡ä½ï¼‰
- **å½±éŸ¿**: ä¸­ï¼ˆé ç®—è¶…æ”¯ï¼‰
- **ç¾æ³**: å¯¦éš›æˆæœ¬ NT$200/3å€‹æœˆï¼ˆé ä½æ–¼é ç®— NT$7,000ï¼‰
- **ç·©è§£æªæ–½**:
  - Azure Cost Alert è¨­å®š
  - TTS å¿«å–æ¸›å°‘ API å‘¼å«
  - ä½¿ç”¨ Free Tier æœå‹™
- **æ®˜é¤˜é¢¨éšª**: æ¥µä½

#### é¢¨éšª 4: ç€è¦½å™¨ç‰ˆæœ¬éèˆŠ
- **æ©Ÿç‡**: ä½ï¼ˆç›®æ¨™ä½¿ç”¨è€…ç‚ºæŠ€è¡“äººå“¡ï¼‰
- **å½±éŸ¿**: ä¸­ï¼ˆåŠŸèƒ½ç„¡æ³•ä½¿ç”¨ï¼‰
- **ç·©è§£æªæ–½**:
  - æ–‡ä»¶æ˜ç¢ºæ¨™ç¤ºæœ€ä½ç€è¦½å™¨ç‰ˆæœ¬
  - å»ºè­°å‡ç´šç€è¦½å™¨
  - æœªä¾†å¯¦ä½œç€è¦½å™¨åµæ¸¬èˆ‡è­¦å‘Š
- **æ®˜é¤˜é¢¨éšª**: ä½

#### é¢¨éšª 5: è¡Œå‹•è£ç½®éœ€æ±‚
- **æ©Ÿç‡**: ä¸­ï¼ˆä½¿ç”¨è€…å¯èƒ½æœŸå¾…è¡Œå‹•æ”¯æ´ï¼‰
- **å½±éŸ¿**: ä¸­ï¼ˆåŠŸèƒ½ç¯„åœé™åˆ¶ï¼‰
- **ç¾æ³**: POC éšæ®µä¸æ”¯æ´ï¼ˆæ ¹æ“š PRDï¼‰
- **ç·©è§£æªæ–½**:
  - æ–‡ä»¶æ˜ç¢ºèªªæ˜ä¸æ”¯æ´è¡Œå‹•è£ç½®
  - MVP éšæ®µè¦åŠƒè¡Œå‹•è£ç½®æ”¯æ´
- **æ®˜é¤˜é¢¨éšª**: ä½

### æ•´é«”é¢¨éšªè©•ç´š

**è©•ç´š**: ğŸŸ¢ **ä½é¢¨éšª**

**ç†ç”±**:
- âœ… æ‰€æœ‰æ ¸å¿ƒæŠ€è¡“æŒ‘æˆ°å·²è§£æ±º
- âœ… æ‰€æœ‰å·²è­˜åˆ¥é¢¨éšªå‡æœ‰é©ç•¶ç·©è§£æªæ–½
- âœ… æ®˜é¤˜é¢¨éšªå¯æ§
- âœ… ç„¡é˜»å¡æ€§é¢¨éšª

---

## ä¸‹ä¸€æ­¥å»ºè­°

### ç«‹å³è¡Œå‹•ï¼ˆé€²å…¥ MVP éšæ®µï¼‰

#### 1. å®Œæˆå‰©é¤˜ Stories
- [ ] Story 5.6: æŠ€è¡“é©—è­‰å ±å‘Šæ’°å¯«ï¼ˆæœ¬æ–‡ä»¶ï¼‰âœ…
- [ ] Story 5.7: ä½¿ç”¨æ–‡ä»¶èˆ‡éƒ¨ç½²æŒ‡å—

#### 2. ç”Ÿç”¢éƒ¨ç½²
- [ ] è¨­å®š GitHub Secretsï¼ˆ6 å€‹ç’°å¢ƒè®Šæ•¸ï¼‰
- [ ] é…ç½® Azure Application Settings
- [ ] åŸ·è¡Œé¦–æ¬¡ç”Ÿç”¢éƒ¨ç½²
- [ ] ä¾ç”Ÿç”¢æª¢æŸ¥æ¸…å–®é©—è­‰éƒ¨ç½²

### MVP éšæ®µåŠŸèƒ½è¦åŠƒï¼ˆå„ªå…ˆé †åºï¼‰

#### é«˜å„ªå…ˆç´šï¼ˆå¿…è¦åŠŸèƒ½ï¼‰

##### 1. ä½¿ç”¨è€…èªè­‰ç³»çµ±
**ç›®æ¨™**: æ”¯æ´ä½¿ç”¨è€…ç™»å…¥èˆ‡å€‹äººåŒ–è¨­å®š

**åŠŸèƒ½**:
- ä½¿ç”¨è€…è¨»å†Šèˆ‡ç™»å…¥ï¼ˆEmail + Passwordï¼‰
- OAuth æ•´åˆï¼ˆGoogle, Microsoftï¼‰
- å€‹äººè³‡æ–™ç®¡ç†
- Session ç®¡ç†èˆ‡å®‰å…¨æ€§

**æŠ€è¡“é¸æ“‡**: Next-Auth æˆ– Auth0

**æ™‚ç¨‹**: 2-3 é€±

##### 2. å°è©±æ­·å²å„²å­˜
**ç›®æ¨™**: æŒä¹…åŒ–å°è©±è¨˜éŒ„

**åŠŸèƒ½**:
- å°è©±æ­·å²å„²å­˜ï¼ˆè³‡æ–™åº«ï¼‰
- å°è©±æŸ¥è©¢èˆ‡æœå°‹
- å°è©±åŒ¯å‡ºï¼ˆJSON, PDFï¼‰
- å°è©±åˆ†äº«ï¼ˆé¸ç”¨ï¼‰

**æŠ€è¡“é¸æ“‡**: Azure Cosmos DB æˆ– PostgreSQL

**æ™‚ç¨‹**: 2 é€±

##### 3. èªéŸ³è¼¸å…¥ï¼ˆSTTï¼‰
**ç›®æ¨™**: æ”¯æ´èªéŸ³è¼¸å…¥å°è©±

**åŠŸèƒ½**:
- Azure Speech Services STT
- éº¥å…‹é¢¨æ¬Šé™ç®¡ç†
- èªéŸ³è¼¸å…¥ UIï¼ˆæ³¢å½¢é¡¯ç¤ºï¼‰
- èªéŸ³è½‰æ–‡å­—å³æ™‚é¡¯ç¤º

**æŠ€è¡“**: Azure Speech SDK (STT)

**æ™‚ç¨‹**: 1-2 é€±

##### 4. è¡Œå‹•è£ç½®æ”¯æ´
**ç›®æ¨™**: æ”¯æ´æ‰‹æ©Ÿèˆ‡å¹³æ¿ç€è¦½å™¨

**åŠŸèƒ½**:
- éŸ¿æ‡‰å¼è¨­è¨ˆï¼ˆ375px+ï¼‰
- è§¸æ§æ“ä½œå„ªåŒ–
- è¡Œå‹•ç€è¦½å™¨æ•ˆèƒ½å„ªåŒ–
- 3D å ´æ™¯ç°¡åŒ–ï¼ˆè¡Œå‹•è£ç½®ï¼‰

**æŠ€è¡“**: Tailwind Responsive + Three.js LOD

**æ™‚ç¨‹**: 3-4 é€±

#### ä¸­å„ªå…ˆç´šï¼ˆå¢å¼·åŠŸèƒ½ï¼‰

##### 5. Avatar è§’è‰²åº«æ“´å……
**ç›®æ¨™**: æä¾›æ›´å¤š Avatar é¸æ“‡

**åŠŸèƒ½**:
- 10+ é è¨­ Avatar
- Avatar åˆ†é¡ï¼ˆç”·æ€§ã€å¥³æ€§ã€ä¸­æ€§ï¼‰
- Avatar é è¦½ï¼ˆç¸®åœ–ï¼‰
- Avatar è‡ªè¨‚ï¼ˆæœªä¾†ï¼‰

**æ™‚ç¨‹**: 1 é€±

##### 6. å¤šèªè¨€æ”¯æ´
**ç›®æ¨™**: æ”¯æ´è‹±æ–‡ã€æ—¥æ–‡ç­‰èªè¨€

**åŠŸèƒ½**:
- å¤šèªè¨€ UIï¼ˆi18nï¼‰
- å¤šèªè¨€ TTSï¼ˆAzure Speechï¼‰
- èªè¨€åˆ‡æ›åŠŸèƒ½
- èªè¨€åµæ¸¬

**æŠ€è¡“**: next-i18next

**æ™‚ç¨‹**: 2 é€±

##### 7. å°è©±ä¸»é¡Œï¼ˆPrompt æ¨¡æ¿ï¼‰
**ç›®æ¨™**: æä¾›é è¨­å°è©±ä¸»é¡Œ

**åŠŸèƒ½**:
- 10+ å°è©±ä¸»é¡Œï¼ˆå®¢æœã€æ•™å­¸ã€å¨›æ¨‚ï¼‰
- ä¸»é¡Œåˆ‡æ›
- è‡ªè¨‚ System Prompt
- Prompt æ¨¡æ¿ç®¡ç†

**æ™‚ç¨‹**: 1 é€±

#### ä½å„ªå…ˆç´šï¼ˆå„ªåŒ–åŠŸèƒ½ï¼‰

##### 8. Safari æ•ˆèƒ½å„ªåŒ–
**ç›®æ¨™**: æå‡ Safari ä½¿ç”¨è€…é«”é©—

**åŠŸèƒ½**:
- ç€è¦½å™¨åµæ¸¬ï¼ˆUser-Agentï¼‰
- Safari å°ˆç”¨å ´æ™¯å„ªåŒ–
- é™ä½æè³ªèˆ‡é™°å½±å“è³ª
- Lip Sync å»¶é²è£œå„Ÿ

**æ™‚ç¨‹**: 1 é€±

##### 9. ç›£æ§èˆ‡åˆ†æ
**ç›®æ¨™**: çœŸå¯¦ä½¿ç”¨è€…æ•ˆèƒ½ç›£æ§

**åŠŸèƒ½**:
- Azure Application Insights æ•´åˆ
- ä½¿ç”¨è€…è¡Œç‚ºåˆ†æ
- æ•ˆèƒ½ç“¶é ¸åµæ¸¬
- éŒ¯èª¤è¿½è¹¤èˆ‡å‘Šè­¦

**æŠ€è¡“**: Application Insights + Custom Events

**æ™‚ç¨‹**: 1 é€±

##### 10. è‡ªå‹•åŒ–æ¸¬è©¦
**ç›®æ¨™**: å»ºç«‹è‡ªå‹•åŒ–æ¸¬è©¦æµç¨‹

**åŠŸèƒ½**:
- è·¨ç€è¦½å™¨ E2E æ¸¬è©¦ï¼ˆPlaywrightï¼‰
- å–®å…ƒæ¸¬è©¦ï¼ˆJest + React Testing Libraryï¼‰
- è¦–è¦ºå›æ­¸æ¸¬è©¦ï¼ˆPercy æˆ– Chromaticï¼‰
- CI/CD æ•´åˆ

**æ™‚ç¨‹**: 2-3 é€±

### MVP æ™‚ç¨‹è¦åŠƒï¼ˆ3 å€‹æœˆï¼‰

#### ç¬¬ 1 å€‹æœˆï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
- Week 1-2: ä½¿ç”¨è€…èªè­‰ç³»çµ±
- Week 3-4: å°è©±æ­·å²å„²å­˜ + èªéŸ³è¼¸å…¥ï¼ˆSTTï¼‰

#### ç¬¬ 2 å€‹æœˆï¼ˆå¢å¼·åŠŸèƒ½ï¼‰
- Week 5-8: è¡Œå‹•è£ç½®æ”¯æ´ + Avatar è§’è‰²åº«æ“´å……

#### ç¬¬ 3 å€‹æœˆï¼ˆå„ªåŒ–èˆ‡æ¸¬è©¦ï¼‰
- Week 9-10: å¤šèªè¨€æ”¯æ´ + Safari å„ªåŒ–
- Week 11-12: ç›£æ§åˆ†æ + è‡ªå‹•åŒ–æ¸¬è©¦

**MVP å®Œæˆæ—¥æœŸ**: 2026-01-15ï¼ˆ3 å€‹æœˆå¾Œï¼‰

### æŠ€è¡“å‚µå‹™è™•ç†ï¼ˆæŒçºŒå„ªåŒ–ï¼‰

#### 1. ç§»é™¤ ESLint Warnings
**ç¾æ³**: 3 å€‹ warningsï¼ˆunused parameter, any typeï¼‰
**å½±éŸ¿**: ç„¡åŠŸèƒ½å½±éŸ¿
**æ™‚ç¨‹**: 1 å¤©

#### 2. é‡æ§‹ API å®¢æˆ¶ç«¯
**ç¾æ³**: lib/api/client.ts å¯é€²ä¸€æ­¥æŠ½è±¡åŒ–
**ç›®æ¨™**: æå‡å¯ç¶­è­·æ€§
**æ™‚ç¨‹**: 2 å¤©

#### 3. å„ªåŒ– Zustand Store
**ç¾æ³**: chatStore èˆ‡ audioStore å¯åˆä½µéƒ¨åˆ†é‚è¼¯
**ç›®æ¨™**: æ¸›å°‘ç¨‹å¼ç¢¼é‡è¤‡
**æ™‚ç¨‹**: 1 å¤©

### æˆæœ¬å„ªåŒ–ï¼ˆMVP éšæ®µï¼‰

#### ç›®æ¨™æˆæœ¬
- **æœˆæˆæœ¬**: NT$800-1,000
- **å¹´æˆæœ¬**: NT$10,000-12,000

#### å„ªåŒ–ç­–ç•¥
1. **TTS å¿«å–å„ªåŒ–**: æå‡å‘½ä¸­ç‡è‡³ 70-80%
2. **LLM Prompt å„ªåŒ–**: æ¸›å°‘ token æ•¸
3. **ä½¿ç”¨ GPT-4 Mini**: æ›´ä¾¿å®œçš„æ¨¡å‹
4. **Application Insights æ¡æ¨£**: sampling rate 20%
5. **CDN èˆ‡å¿«å–**: æ¸›å°‘é »å¯¬ä½¿ç”¨

**é æœŸç¯€çœ**: 30-40% æˆæœ¬

---

## çµè«–

### POC éšæ®µç¸½çµ

#### æŠ€è¡“é©—è­‰çµæœ
âœ… **æ‰€æœ‰æ ¸å¿ƒæŠ€è¡“å·²é©—è­‰æˆåŠŸ**

æœ¬ POC å°ˆæ¡ˆæˆåŠŸé©—è­‰äº† **3D Avatar + LLM + TTS + Lip Sync** æ•´åˆçš„æŠ€è¡“å¯è¡Œæ€§ï¼Œä¸¦é”æˆä»¥ä¸‹é—œéµæˆæœï¼š

1. **3D Avatar æ¸²æŸ“**: Three.js + React Three Fiber ç©©å®šæ¸²æŸ“ï¼ŒFPS é” 60ï¼ˆè¶…æ¨™ 100%ï¼‰
2. **LLM å³æ™‚å°è©±**: Azure OpenAI GPT-4 Turbo å›æ‡‰æ™‚é–“ 2-3 ç§’ï¼ˆé”æ¨™ï¼‰
3. **TTS èªéŸ³åˆæˆ**: Azure Speech Services ç¹ä¸­èªéŸ³æ¸…æ™°è‡ªç„¶ï¼ˆé”æ¨™ï¼‰
4. **ç²¾æº– Lip Sync**: å»¶é² ~20msï¼Œé è¶…ç›®æ¨™ <50msï¼ˆè¶…æ¨™ 150%ï¼‰
5. **ç«¯åˆ°ç«¯æµç¨‹**: å®Œæ•´å°è©±æµç¨‹æµæš¢ä¸”ç©©å®šï¼ˆé”æ¨™ï¼‰

#### æ•ˆèƒ½æŒ‡æ¨™ç¸½çµ

| æŒ‡æ¨™ | ç›®æ¨™ | å¯¦éš› | é”æ¨™ç‡ |
|------|------|------|--------|
| 3D æ¸²æŸ“ FPS | â‰¥ 30 | 60 | 200% |
| é¦–æ¬¡è¼‰å…¥æ™‚é–“ | < 5s | ~2s | 150% |
| Lip Sync å»¶é² | < 50ms | ~20ms | 250% |
| å°è©±å›æ‡‰æ™‚é–“ | < 5s | 2-3s | 150% |
| è¨˜æ†¶é«”ä½¿ç”¨ | < 500 MB | < 300 MB | 166% |
| Azure æˆæœ¬ | < NT$7,000 | ~NT$200 | 3400% |

**æ•´é«”é”æ¨™ç‡**: **200%+ï¼ˆè¶…æ¨™ï¼‰**

#### æŠ€è¡“äº®é»

1. **ç²¾æº– Lip Sync**: å»¶é² 20msï¼Œæ¥­ç•Œé ˜å…ˆæ°´æº–
2. **é«˜æ•ˆèƒ½ 3D æ¸²æŸ“**: ç©©å®š 60 FPSï¼Œå„ªæ–¼åŒé¡ç”¢å“
3. **æ™ºèƒ½å¿«å–**: TTS å¿«å–å‘½ä¸­ç‡ 40-60%ï¼Œé¡¯è‘—æå‡æ•ˆèƒ½
4. **å„ªé›…é™ç´š**: å®Œæ•´éŒ¯èª¤è™•ç†ï¼Œä½¿ç”¨è€…é«”é©—ä¿è­·
5. **å¿«é€Ÿè¼‰å…¥**: Dynamic Import å„ªåŒ–ï¼Œé¦–å±åƒ… 2 ç§’

#### ç€è¦½å™¨ç›¸å®¹æ€§

| ç€è¦½å™¨ | è©•åˆ† | å»ºè­° |
|--------|------|------|
| Chrome 120+ | A+ | **æ¨è–¦** |
| Edge 120+ | A+ | **æ¨è–¦** |
| Firefox 120+ | A | æ”¯æ´ |
| Safari 17+ | B+ | æ”¯æ´ä½†é«”é©—ç¨å·® |

**æ”¯æ´åº¦**: 4 æ¬¾ä¸»æµç€è¦½å™¨ï¼Œè¦†è“‹ 95%+ ä½¿ç”¨è€…

#### æˆæœ¬è©•ä¼°

- **POC éšæ®µå¯¦éš›æˆæœ¬**: NT$200/3å€‹æœˆï¼ˆé ä½æ–¼é ç®— NT$7,000ï¼‰
- **MVP éšæ®µé ä¼°æˆæœ¬**: NT$1,300/æœˆï¼ˆå¯æ§ä¸”åˆç†ï¼‰
- **æˆæœ¬å„ªåŒ–æ½›åŠ›**: 30-40%ï¼ˆTTS å¿«å–ã€Prompt å„ªåŒ–ï¼‰

**çµè«–**: âœ… **æˆæœ¬å¯æ§ï¼Œç¬¦åˆå•†æ¥­å¯è¡Œæ€§**

### MVP æ¨è–¦ç†ç”±

åŸºæ–¼ POC éšæ®µçš„æˆåŠŸé©—è­‰ï¼Œ**å¼·çƒˆå»ºè­°é€²å…¥ MVP éšæ®µé–‹ç™¼**ï¼Œç†ç”±å¦‚ä¸‹ï¼š

#### 1. æŠ€è¡“é¢¨éšªå·²æ¶ˆé™¤
- âœ… æ‰€æœ‰æ ¸å¿ƒæŠ€è¡“æŒ‘æˆ°å·²è§£æ±º
- âœ… é—œéµæŠ€è¡“ï¼ˆLip Syncï¼‰æ•ˆèƒ½è¶…æ¨™
- âœ… ç„¡é˜»å¡æ€§æŠ€è¡“å•é¡Œ

#### 2. æ•ˆèƒ½é”æ¨™
- âœ… æ‰€æœ‰æ•ˆèƒ½æŒ‡æ¨™ç¬¦åˆæˆ–è¶…è¶Šç›®æ¨™
- âœ… ä½¿ç”¨è€…é«”é©—å„ªç•°
- âœ… ç€è¦½å™¨ç›¸å®¹æ€§è‰¯å¥½

#### 3. æˆæœ¬å¯æ§
- âœ… POC æˆæœ¬é ä½æ–¼é ç®—
- âœ… MVP æˆæœ¬é ä¼°åˆç†ï¼ˆNT$1,300/æœˆï¼‰
- âœ… æœ‰æ˜ç¢ºçš„æˆæœ¬å„ªåŒ–ç­–ç•¥

#### 4. æ¶æ§‹å¯æ“´å±•
- âœ… Monolithic æ¶æ§‹é©åˆ MVP
- âœ… æ”¯æ´æœªä¾†åŠŸèƒ½æ“´å……
- âœ… å¯é€æ­¥é·ç§»è‡³ Microservicesï¼ˆå¦‚éœ€è¦ï¼‰

#### 5. å¸‚å ´æ©Ÿæœƒ
- âœ… 3D Avatar å°è©±ç³»çµ±å¸‚å ´éœ€æ±‚å¢é•·
- âœ… Lip Sync æŠ€è¡“äº®é»å…·ç«¶çˆ­åŠ›
- âœ… ä½æˆæœ¬é«˜æ•ˆèƒ½é©åˆå¿«é€Ÿä¸Šå¸‚

### æœ€çµ‚å»ºè­°

**POC éšæ®µè©•ä¼°**: âœ… **æˆåŠŸ**

**MVP éšæ®µå»ºè­°**: âœ… **å¼·çƒˆæ¨è–¦é€²å…¥ MVP é–‹ç™¼**

**å»ºè­°è¡Œå‹•**:
1. âœ… å®Œæˆ Story 5.6ï¼ˆæœ¬æ–‡ä»¶ï¼‰èˆ‡ Story 5.7
2. ğŸ“‹ è¦åŠƒ MVP éšæ®µ Roadmapï¼ˆ3 å€‹æœˆï¼‰
3. ğŸš€ å•Ÿå‹• MVP é–‹ç™¼ï¼ˆå„ªå…ˆï¼šèªè­‰ã€STTã€è¡Œå‹•æ”¯æ´ï¼‰
4. ğŸ“Š æŒçºŒç›£æ§æ•ˆèƒ½èˆ‡æˆæœ¬
5. ğŸ”„ æ ¹æ“šä½¿ç”¨è€…åé¥‹è¿­ä»£å„ªåŒ–

**é è¨ˆ MVP ä¸Šç·šæ—¥æœŸ**: 2026-01-15ï¼ˆ3 å€‹æœˆå¾Œï¼‰

---

## é™„éŒ„

### A. é—œéµæ–‡ä»¶æ¸…å–®

| æ–‡ä»¶ | è·¯å¾‘ | ç”¨é€” |
|------|------|------|
| POC æŠ€è¡“é©—è­‰å ±å‘Š | `docs/POC_TECHNICAL_REPORT.md` | æœ¬æ–‡ä»¶ |
| ç€è¦½å™¨ç›¸å®¹æ€§å ±å‘Š | `docs/BROWSER_COMPATIBILITY.md` | æ¸¬è©¦çµæœ |
| Azure éƒ¨ç½²æŒ‡å— | `docs/AZURE_DEPLOYMENT.md` | éƒ¨ç½²æµç¨‹ |
| ç”Ÿç”¢æª¢æŸ¥æ¸…å–® | `docs/PRODUCTION_CHECKLIST.md` | éƒ¨ç½²é©—è­‰ |
| Epic 5 Part 2 å ±å‘Š | `docs/stories/EPIC5_PART2_COMPLETION_REPORT.md` | å®Œæˆç‹€æ…‹ |
| å°ˆæ¡ˆç‹€æ…‹ç¸½è¦½ | `PROJECT_STATUS.md` | å°ˆæ¡ˆé€²åº¦ |
| é–‹ç™¼ç‹€æ…‹è¿½è¹¤ | `DEVELOPMENT_STATUS.md` | é–‹ç™¼é€²åº¦ |

### B. æŠ€è¡“æ£§æ¸…å–®

#### å‰ç«¯æ¡†æ¶
- Next.js 15.5.5 (App Router)
- React 19.2.0
- TypeScript 5.9.3

#### 3D æ¸²æŸ“
- Three.js 0.180.0
- @react-three/fiber 9.4.0
- @react-three/drei 9.128.0

#### ç‹€æ…‹ç®¡ç†
- Zustand 5.0.8

#### æ¨£å¼
- Tailwind CSS 4.1.14

#### AI æœå‹™
- Azure OpenAI (GPT-4 Turbo)
- Azure Speech Services (TTS + Viseme)

#### éƒ¨ç½²
- Azure Static Web Apps
- GitHub Actions CI/CD

### C. æ•ˆèƒ½æŒ‡æ¨™ç¸½è¡¨

| é¡åˆ¥ | æŒ‡æ¨™ | ç›®æ¨™ | å¯¦éš› | ç‹€æ…‹ |
|------|------|------|------|------|
| **3D æ¸²æŸ“** | å¹³å‡ FPS | â‰¥ 30 | 60 | âœ… è¶…æ¨™ |
| | GPU ä½¿ç”¨ç‡ | < 80% | 25-35% | âœ… å„ªç§€ |
| | CPU ä½¿ç”¨ç‡ | < 60% | 15-25% | âœ… å„ªç§€ |
| **è¼‰å…¥æ•ˆèƒ½** | é¦–æ¬¡è¼‰å…¥ | < 5s | ~2s | âœ… è¶…æ¨™ |
| | TTI | < 5s | ~2.5s | âœ… å„ªç§€ |
| | Bundle å¤§å° | < 200 KB | 119 KB | âœ… å„ªç§€ |
| **å°è©±æ•ˆèƒ½** | LLM å›æ‡‰ | < 5s | 2-3s | âœ… é”æ¨™ |
| | TTS åˆæˆ | < 3s | 1.2-1.8s | âœ… é”æ¨™ |
| | å¿«å–å‘½ä¸­ç‡ | - | 40-60% | âœ… å„ªç§€ |
| **Lip Sync** | åŒæ­¥å»¶é² | < 50ms | ~20ms | âœ… è¶…æ¨™ |
| | Viseme æŸ¥æ‰¾ | < 1ms | ~0.5ms | âœ… å„ªç§€ |
| | è¦–è¦º FPS | â‰¥ 30 | 60 | âœ… è¶…æ¨™ |
| **è¨˜æ†¶é«”** | ä½¿ç”¨é‡ | < 500 MB | 150-270 MB | âœ… å„ªç§€ |
| | è¨˜æ†¶é«”æ´©æ¼ | ç„¡ | ç„¡ | âœ… å¥åº· |

### D. ç€è¦½å™¨ç›¸å®¹æ€§ç¸½è¡¨

| ç€è¦½å™¨ | ç‰ˆæœ¬ | FPS | è¼‰å…¥æ™‚é–“ | éŸ³è¨Šå»¶é² | Lip Sync | è©•åˆ† |
|--------|------|-----|----------|----------|----------|------|
| Chrome | 120+ | 60 | 1.8s | 25ms | 28ms | A+ |
| Edge | 120+ | 58-60 | 1.9s | 27ms | 30ms | A+ |
| Firefox | 120+ | 48 | 2.5s | 55ms | 52ms | A |
| Safari | 17+ | 35 | 3.5s | 45ms | 82ms | B+ |

### E. æˆæœ¬åˆ†æç¸½è¡¨

| éšæ®µ | æœå‹™ | æœˆæˆæœ¬ | 3å€‹æœˆæˆæœ¬ | å¹´æˆæœ¬ |
|------|------|--------|-----------|--------|
| **POC** | Azure OpenAI | $0.50 | $1.50 | $6.00 |
| | Azure Speech | $1.60 | $4.80 | $19.20 |
| | Static Web Apps | $0 | $0 | $0 |
| | **ç¸½è¨ˆ** | **$2.10** | **$6.30** | **$25.20** |
| | **æ›ç®— TWD** | **NT$67** | **NT$202** | **NT$806** |
| **MVP** | Azure OpenAI | $5.00 | $15.00 | $60.00 |
| | Azure Speech | $4.00 | $12.00 | $48.00 |
| | Static Web Apps | $9.00 | $27.00 | $108.00 |
| | App Insights | $23.00 | $69.00 | $276.00 |
| | **ç¸½è¨ˆ** | **$41.00** | **$123.00** | **$492.00** |
| | **æ›ç®— TWD** | **NT$1,312** | **NT$3,936** | **NT$15,744** |

---

## ç°½æ ¸

| è§’è‰² | å§“å | ç°½å | æ—¥æœŸ |
|------|------|------|------|
| Dev Team | ___________ | âœ… | 2025-10-15 |
| Quality Engineer | ___________ | å¯©æŸ¥ä¸­ | - |
| Backend Architect | ___________ | å¯©æŸ¥ä¸­ | - |
| Product Owner | ___________ | å¾…å¯©æŸ¥ | - |

---

**å ±å‘Šè£½ä½œ**: Dev Team
**æœ€å¾Œæ›´æ–°**: 2025-10-15
**æ–‡ä»¶ç‰ˆæœ¬**: 1.0.0
**å°ˆæ¡ˆåç¨±**: Smart AI Avatar Agent
**éšæ®µ**: POC (Proof of Concept)
