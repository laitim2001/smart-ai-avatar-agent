# Story 5.7: ä½¿ç”¨æ–‡ä»¶èˆ‡éƒ¨ç½²æŒ‡å—

**Epic**: Epic 5 - Polish & Deployment
**Story ID**: 5.7
**Story åç¨±**: ä½¿ç”¨æ–‡ä»¶èˆ‡éƒ¨ç½²æŒ‡å—
**å„ªå…ˆé †åº**: High
**é ä¼°æ™‚é–“**: 6 å°æ™‚
**ç‹€æ…‹**: Draft

---

## ğŸ“‹ Story æè¿°

### User Story
**As a** é–‹ç™¼è€…ã€ç¶­é‹äººå“¡ã€ä½¿ç”¨è€…
**I want** å®Œæ•´çš„æ–‡ä»¶ï¼ˆä½¿ç”¨æ‰‹å†Šã€API æ–‡ä»¶ã€éƒ¨ç½²æŒ‡å—ã€æ•…éšœæ’é™¤ï¼‰
**So that** å¯ä»¥å¿«é€Ÿä¸Šæ‰‹æ‡‰ç”¨ç¨‹å¼ã€ç¨ç«‹éƒ¨ç½²ã€è§£æ±ºå¸¸è¦‹å•é¡Œï¼Œç„¡éœ€ä¾è³´åŸå§‹é–‹ç™¼åœ˜éšŠ

### Business Value
- **çŸ¥è­˜ç§»è½‰**: æ–°åœ˜éšŠæˆå“¡å¯å¿«é€Ÿä¸Šæ‰‹ï¼Œæ¸›å°‘ onboarding æ™‚é–“
- **ç¶­é‹ç¨ç«‹æ€§**: ç¶­é‹åœ˜éšŠå¯ç¨ç«‹éƒ¨ç½²èˆ‡æ’é™¤æ•…éšœ
- **ä½¿ç”¨è€…è‡ªåŠ©**: ä½¿ç”¨è€…å¯è‡ªè¡ŒæŸ¥é–±æ–‡ä»¶è§£æ±ºå•é¡Œï¼Œæ¸›å°‘æ”¯æ´æˆæœ¬
- **å°ˆæ¡ˆå¯æŒçºŒæ€§**: å³ä½¿åŸå§‹åœ˜éšŠé›¢é–‹ï¼Œå°ˆæ¡ˆä»å¯æŒçºŒç¶­è­·

### Technical Context
- **æ–‡ä»¶é¡å‹**: User Guide, API Reference, Deployment Guide, Troubleshooting
- **æ–‡ä»¶æ ¼å¼**: Markdown (å¯è½‰æ›ç‚º PDF/HTML)
- **ç›®æ¨™å—çœ¾**: é–‹ç™¼è€…ã€ç¶­é‹äººå“¡ã€ä¸€èˆ¬ä½¿ç”¨è€…
- **ç¶­è­·ç­–ç•¥**: æ–‡ä»¶èˆ‡ç¨‹å¼ç¢¼åŒæ­¥æ›´æ–°

---

## âœ… Acceptance Criteria

### Functional Requirements
1. **ä½¿ç”¨è€…æ‰‹å†Š (User Guide)**:
   - [ ] æ‡‰ç”¨ç¨‹å¼åŠŸèƒ½èªªæ˜
   - [ ] æ“ä½œæ­¥é©Ÿåœ–æ–‡æ•™å­¸
   - [ ] å¸¸è¦‹å•é¡Œ FAQ
   - [ ] ç€è¦½å™¨ç›¸å®¹æ€§èªªæ˜

2. **API æ–‡ä»¶ (API Reference)**:
   - [ ] Azure TTS API ä½¿ç”¨èªªæ˜
   - [ ] å…§éƒ¨ API endpoint æ–‡ä»¶
   - [ ] è«‹æ±‚/å›æ‡‰ç¯„ä¾‹
   - [ ] éŒ¯èª¤ç¢¼èªªæ˜

3. **éƒ¨ç½²æŒ‡å— (Deployment Guide)**:
   - [ ] Azure Static Web Apps éƒ¨ç½²æ­¥é©Ÿ
   - [ ] ç’°å¢ƒè®Šæ•¸è¨­å®š
   - [ ] CI/CD pipeline èªªæ˜
   - [ ] å›æ»¾èˆ‡æ•…éšœæ¢å¾©

4. **æ•…éšœæ’é™¤ (Troubleshooting Guide)**:
   - [ ] å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ
   - [ ] éŒ¯èª¤è¨Šæ¯å°ç…§è¡¨
   - [ ] Debug æŠ€å·§
   - [ ] è¯çµ¡æ”¯æ´ç®¡é“

### Non-Functional Requirements
1. **å®Œæ•´æ€§**: æ¶µè“‹æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½èˆ‡æ“ä½œ
2. **å¯è®€æ€§**: éæŠ€è¡“äººå“¡ä¹Ÿèƒ½ç†è§£ä½¿ç”¨è€…æ‰‹å†Š
3. **å¯ç¶­è­·æ€§**: æ–‡ä»¶çµæ§‹æ¸…æ™°ï¼Œæ˜“æ–¼æ›´æ–°
4. **å¯æœå°‹æ€§**: ä½¿ç”¨æ˜ç¢ºæ¨™é¡Œèˆ‡é—œéµå­—

---

## ğŸ—ï¸ Technical Design

### æ–‡ä»¶çµæ§‹

```
docs/
â”œâ”€â”€ user-guide/
â”‚   â”œâ”€â”€ getting-started.md          # å¿«é€Ÿé–‹å§‹
â”‚   â”œâ”€â”€ features.md                 # åŠŸèƒ½èªªæ˜
â”‚   â”œâ”€â”€ faq.md                      # å¸¸è¦‹å•é¡Œ
â”‚   â””â”€â”€ browser-compatibility.md    # ç€è¦½å™¨æ”¯æ´
â”‚
â”œâ”€â”€ api-reference/
â”‚   â”œâ”€â”€ azure-tts-api.md            # Azure TTS API
â”‚   â”œâ”€â”€ internal-api.md             # å…§éƒ¨ API
â”‚   â””â”€â”€ error-codes.md              # éŒ¯èª¤ç¢¼
â”‚
â”œâ”€â”€ deployment/
â”‚   â”œâ”€â”€ azure-static-web-apps.md    # Azure éƒ¨ç½²
â”‚   â”œâ”€â”€ environment-variables.md    # ç’°å¢ƒè®Šæ•¸
â”‚   â”œâ”€â”€ ci-cd-pipeline.md           # CI/CD
â”‚   â””â”€â”€ rollback-recovery.md        # å›æ»¾æ¢å¾©
â”‚
â”œâ”€â”€ troubleshooting/
â”‚   â”œâ”€â”€ common-issues.md            # å¸¸è¦‹å•é¡Œ
â”‚   â”œâ”€â”€ error-messages.md           # éŒ¯èª¤è¨Šæ¯
â”‚   â”œâ”€â”€ debug-guide.md              # Debug æŒ‡å—
â”‚   â””â”€â”€ support.md                  # è¯çµ¡æ”¯æ´
â”‚
â”œâ”€â”€ architecture/
â”‚   â”œâ”€â”€ system-overview.md          # ç³»çµ±æ¦‚è¦½
â”‚   â”œâ”€â”€ technology-stack.md         # æŠ€è¡“æ£§
â”‚   â””â”€â”€ security.md                 # å®‰å…¨æ€§
â”‚
â””â”€â”€ README.md                       # å°ˆæ¡ˆç¸½è¦½
```

### æ–‡ä»¶æ’°å¯«åŸå‰‡

**KISS (Keep It Simple, Stupid)**:
- ä½¿ç”¨ç°¡å–®èªè¨€ï¼Œé¿å…è¡“èªéè¼‰
- ä¸€å€‹æ¦‚å¿µä¸€å€‹æ®µè½
- ä½¿ç”¨æ­¥é©ŸåŒ–èªªæ˜ï¼ˆ1, 2, 3ï¼‰

**Visual First**:
- æˆªåœ– > æ–‡å­—æè¿°
- æµç¨‹åœ– > é•·æ®µæ–‡å­—
- ç¨‹å¼ç¢¼ç¯„ä¾‹ > æŠ½è±¡èªªæ˜

**User-Centric**:
- ä»¥ä½¿ç”¨è€…ç›®æ¨™ç‚ºå°å‘ï¼ˆ"å¦‚ä½•..."ï¼‰
- æä¾›å¯¦éš›ä½¿ç”¨æƒ…å¢ƒ
- åŒ…å«é æœŸçµæœ

---

## ğŸ“ Tasks

### Task 1: æ’°å¯«ä½¿ç”¨è€…å¿«é€Ÿé–‹å§‹æŒ‡å—

**æè¿°**: æ’°å¯«æ–°ä½¿ç”¨è€…çš„å¿«é€Ÿä¸Šæ‰‹æŒ‡å—

**æª”æ¡ˆ**: `docs/user-guide/getting-started.md`

**ç¨‹å¼ç¢¼å¯¦ä½œ**:
```markdown
# Smart AI Avatar Agent - å¿«é€Ÿé–‹å§‹æŒ‡å—

æ­¡è¿ä½¿ç”¨ Smart AI Avatar Agentï¼æœ¬æŒ‡å—å°‡å¸¶æ‚¨å¿«é€Ÿé«”é©— 3D Avatar èˆ‡èªéŸ³å°è©±åŠŸèƒ½ã€‚

---

## ğŸ¯ 5 åˆ†é˜å¿«é€Ÿé«”é©—

### Step 1: é–‹å•Ÿæ‡‰ç”¨ç¨‹å¼

**Production URL**: https://smart-ai-avatar.azurestaticapps.net

ä½¿ç”¨ä»¥ä¸‹ç€è¦½å™¨ç²å¾—æœ€ä½³é«”é©—:
- âœ… Google Chrome 120+ (æ¨è–¦)
- âœ… Microsoft Edge 120+
- âš ï¸ Safari 17+ (éœ€é»æ“Šã€Œå•Ÿç”¨éŸ³è¨Šã€)
- âš ï¸ Firefox 121+ (éœ€é»æ“Šã€Œå•Ÿç”¨éŸ³è¨Šã€)

### Step 2: å•Ÿç”¨éŸ³è¨ŠåŠŸèƒ½ (Safari/Firefox)

å¦‚æœæ‚¨ä½¿ç”¨ Safari æˆ– Firefoxï¼Œé¦–æ¬¡é€²å…¥æœƒçœ‹åˆ°ã€Œå•Ÿç”¨éŸ³è¨Šã€æŒ‰éˆ•ï¼š

![å•Ÿç”¨éŸ³è¨ŠæŒ‰éˆ•](../images/audio-activation.png)

**ç‚ºä»€éº¼éœ€è¦é€™å€‹æ­¥é©Ÿï¼Ÿ**
- ç€è¦½å™¨å®‰å…¨æ”¿ç­–è¦æ±‚ä½¿ç”¨è€…ç¢ºèªæ‰èƒ½æ’­æ”¾éŸ³è¨Š
- é€™æ˜¯ä¸€æ¬¡æ€§æ“ä½œï¼Œä¹‹å¾Œä¸æœƒå†å‡ºç¾

é»æ“Šã€ŒğŸµ å•Ÿç”¨éŸ³è¨Šã€æŒ‰éˆ•å³å¯ç¹¼çºŒã€‚

### Step 3: è§€å¯Ÿ 3D Avatar

é é¢è¼‰å…¥å®Œæˆå¾Œï¼Œæ‚¨æœƒçœ‹åˆ° 3D Avatarï¼š

![3D Avatar](../images/avatar-display.png)

**äº’å‹•æ–¹å¼**:
- ğŸ–±ï¸ **æ»‘é¼ æ‹–æ›³**: æ—‹è½‰è¦–è§’
- ğŸ” **æ»‘é¼ æ»¾è¼ª**: ç¸®æ”¾è·é›¢
- ğŸ“± **è§¸æ§**: å–®æŒ‡æ‹–æ›³æ—‹è½‰ï¼Œé›™æŒ‡ç¸®æ”¾

### Step 4: ç™¼é€ç¬¬ä¸€å‰‡è¨Šæ¯

åœ¨ç•«é¢ä¸‹æ–¹çš„èŠå¤©è¼¸å…¥æ¡†è¼¸å…¥ã€Œä½ å¥½ã€ï¼š

![èŠå¤©ä»‹é¢](../images/chat-interface.png)

ç„¶å¾Œé»æ“Šã€Œé€å‡ºã€æŒ‰éˆ•ã€‚

### Step 5: é«”é©—èªéŸ³èˆ‡ Lip Sync

ç³»çµ±æœƒï¼š
1. âœ… ç”Ÿæˆä¸­æ–‡èªéŸ³ï¼ˆ~2 ç§’ï¼‰
2. âœ… è‡ªå‹•æ’­æ”¾éŸ³è¨Š
3. âœ… Avatar å˜´å‹åŒæ­¥å‹•ç•«

![Lip Sync å‹•ç•«](../images/lipsync-animation.png)

**ğŸ‰ æ­å–œï¼æ‚¨å·²å®Œæˆç¬¬ä¸€æ¬¡å°è©±é«”é©—ï¼**

---

## ğŸŒŸ åŠŸèƒ½äº®é»

### 1. 3D Avatar é¡¯ç¤º

**æŠ€è¡“**: WebGL (Three.js)
**ç‰¹è‰²**:
- æµæš¢çš„ 3D æ¸²æŸ“ï¼ˆ30+ FPSï¼‰
- å¯è‡ªç”±æ—‹è½‰èˆ‡ç¸®æ”¾è¦–è§’
- é–’ç½®æ™‚æœ‰å¾®å¦™çš„å‘¼å¸å‹•ç•«

**ç³»çµ±éœ€æ±‚**:
- æ”¯æ´ WebGL çš„ç¾ä»£ç€è¦½å™¨
- å»ºè­°é¡¯ç¤ºå¡: æ•´åˆé¡¯å¡ä»¥ä¸Š

### 2. Azure TTS èªéŸ³ç”Ÿæˆ

**æŠ€è¡“**: Azure Cognitive Services Speech API
**ç‰¹è‰²**:
- è‡ªç„¶çš„ä¸­æ–‡èªéŸ³ï¼ˆHsiaoChenNeuralï¼‰
- å¿«é€Ÿç”Ÿæˆï¼ˆå¹³å‡ 1.8 ç§’ï¼‰
- é«˜éŸ³è³ªï¼ˆ16kHz, 32kbps MP3ï¼‰

**æ”¯æ´èªè¨€**: ç›®å‰åƒ…ä¸­æ–‡ï¼ˆPOC éšæ®µï¼‰

### 3. Lip Sync å˜´å‹åŒæ­¥

**æŠ€è¡“**: Web Audio API + Blendshape Animation
**ç‰¹è‰²**:
- èªéŸ³èˆ‡å˜´å‹å³æ™‚åŒæ­¥ï¼ˆå»¶é² <100msï¼‰
- æº–ç¢ºåº¦ 72%ï¼ˆPOC ç›®æ¨™ 70%ï¼‰
- æµæš¢çš„éæ¸¡å‹•ç•«

**å·²çŸ¥é™åˆ¶**: å¿«é€Ÿèªå¥æˆ–é«˜é »éŸ³ç´ æº–ç¢ºåº¦ç•¥ä½

### 4. éŸ¿æ‡‰å¼è¨­è¨ˆ

**æ”¯æ´è£ç½®**:
- ğŸ’» **Desktop**: å®Œæ•´åŠŸèƒ½ï¼Œæœ€ä½³é«”é©—
- ğŸ“± **Tablet**: è§¸æ§å„ªåŒ–ï¼Œè‰¯å¥½é«”é©—
- ğŸ“± **Mobile**: è§¸æ§å„ªåŒ–ï¼Œå¯æ¥å—é«”é©—

**è‡ªå‹•èª¿æ•´**:
- Desktop: å·¦å³åˆ†æ¬„ä½ˆå±€ï¼ˆAvatar å·¦ã€Chat å³ï¼‰
- Tablet/Mobile: ä¸Šä¸‹ä½ˆå±€ï¼ˆAvatar ä¸Šã€Chat ä¸‹ï¼‰

---

## ğŸ”§ é€²éšè¨­å®š

### èª¿æ•´ 3D è¦–è§’

**åˆå§‹è¦–è§’é‡ç½®**:
1. é‡æ–°æ•´ç†é é¢ï¼ˆF5ï¼‰
2. æˆ–èª¿æ•´è‡³æ‚¨å–œæ­¡çš„è§’åº¦å¾Œè¨˜ä½è©²ä½ç½®

**æœ€ä½³è§€çœ‹è§’åº¦**:
- è·é›¢: 2.5 - 3.5 å…¬å°º
- é«˜åº¦: èˆ‡ Avatar çœ¼ç›å¹³è¦–
- è§’åº¦: æ­£é¢æˆ– 15Â° å´é¢

### éŸ³è¨ŠéŸ³é‡èª¿æ•´

**ç³»çµ±éŸ³é‡**:
- Windows: å³ä¸‹è§’éŸ³é‡åœ–ç¤º
- macOS: é ‚éƒ¨é¸å–®åˆ—éŸ³é‡æ§åˆ¶
- iOS/Android: è£ç½®å´é‚ŠéŸ³é‡éµ

**ç€è¦½å™¨éŸ³é‡**:
- Chrome: åˆ†é æ¨™ç±¤å³éµ â†’ "ç¶²ç«™è¨­å®š" â†’ éŸ³æ•ˆ
- Safari: Safari â†’ åå¥½è¨­å®š â†’ ç¶²ç«™ â†’ è‡ªå‹•æ’­æ”¾

---

## ğŸ“ ä½¿ç”¨æŠ€å·§

### æŠ€å·§ 1: æœ€ä½³è¨Šæ¯é•·åº¦

**æ¨è–¦é•·åº¦**: 10-30 å­—
- âœ… **çŸ­å¥** (5-10 å­—): ã€Œä½ å¥½ã€ã€ã€Œå†è¦‹ã€
- âœ… **ä¸­å¥** (10-30 å­—): ã€Œå¾ˆé«˜èˆˆèªè­˜ä½ ï¼Œæˆ‘æ˜¯ AI åŠ©æ‰‹ã€
- âš ï¸ **é•·å¥** (>30 å­—): å¯èƒ½éœ€è¦è¼ƒé•·ç”Ÿæˆæ™‚é–“

### æŠ€å·§ 2: æ¸…æ™°çš„èªå¥

**èªéŸ³ç”Ÿæˆå“è³ªæœ€ä½³**:
- âœ… æ¨™æº–ä¸­æ–‡è©å½™
- âœ… å®Œæ•´å¥å­ï¼ˆæœ‰æ¨™é»ï¼‰
- âŒ é¿å…éå¤šè‹±æ–‡æ··åˆ
- âŒ é¿å…ç¶²è·¯ç”¨èªæˆ–ç«æ˜Ÿæ–‡

### æŠ€å·§ 3: ç¶²è·¯é€£ç·š

**å»ºè­°ç¶²è·¯é€Ÿåº¦**:
- æœ€ä½: 1 Mbps
- æ¨è–¦: 5 Mbps+
- ç†æƒ³: 10 Mbps+

**é›¢ç·šæ¨¡å¼**: ç›®å‰ä¸æ”¯æ´ï¼ˆPOC éšæ®µï¼‰

---

## â“ å¸¸è¦‹å•é¡Œ

### Q1: ç‚ºä»€éº¼æˆ‘çœ‹ä¸åˆ° 3D Avatarï¼Ÿ

**å¯èƒ½åŸå› **:
1. **ç€è¦½å™¨ä¸æ”¯æ´ WebGL**
   - è§£æ±º: æ›´æ–°è‡³æœ€æ–°ç‰ˆ Chrome/Edge
   - æª¢æŸ¥: å‰å¾€ https://get.webgl.org/ æ¸¬è©¦

2. **é¡¯ç¤ºå¡é©…å‹•éèˆŠ**
   - è§£æ±º: æ›´æ–°é¡¯ç¤ºå¡é©…å‹•ç¨‹å¼

3. **ç¡¬é«”åŠ é€Ÿè¢«ç¦ç”¨**
   - Chrome: è¨­å®š â†’ ç³»çµ± â†’ ã€Œä½¿ç”¨ç¡¬é«”åŠ é€Ÿã€
   - å‹¾é¸å¾Œé‡æ–°å•Ÿå‹•ç€è¦½å™¨

### Q2: ç‚ºä»€éº¼è½ä¸åˆ°èªéŸ³ï¼Ÿ

**å¯èƒ½åŸå› **:
1. **æœªå•Ÿç”¨éŸ³è¨Š** (Safari/Firefox)
   - è§£æ±º: é»æ“Šã€Œå•Ÿç”¨éŸ³è¨Šã€æŒ‰éˆ•

2. **ç³»çµ±éŸ³é‡éœéŸ³**
   - è§£æ±º: æª¢æŸ¥ç³»çµ±éŸ³é‡è¨­å®š

3. **ç€è¦½å™¨åˆ†é éœéŸ³**
   - è§£æ±º: å³éµé»æ“Šåˆ†é  â†’ å–æ¶ˆéœéŸ³

### Q3: Lip Sync ä¸åŒæ­¥æ€éº¼è¾¦ï¼Ÿ

**å¯èƒ½åŸå› **:
1. **ç¶²è·¯å»¶é²**
   - è§£æ±º: æª¢æŸ¥ç¶²è·¯é€£ç·šé€Ÿåº¦
   - å»¶é² >200ms å¯èƒ½å½±éŸ¿åŒæ­¥

2. **CPU è² è¼‰éé«˜**
   - è§£æ±º: é—œé–‰å…¶ä»–å ç”¨ CPU çš„ç¨‹å¼
   - é™ä½è¦–çª—å¤§å°å¯æ”¹å–„æ•ˆèƒ½

3. **ç€è¦½å™¨æ•ˆèƒ½**
   - è§£æ±º: é‡æ–°æ•´ç†é é¢
   - æˆ–æ”¹ç”¨ Chrome/Edge

### Q4: æ‰‹æ©Ÿä¸Šå¾ˆæ…¢æ€éº¼è¾¦ï¼Ÿ

**å„ªåŒ–å»ºè­°**:
1. **é—œé–‰å…¶ä»– App**: é‡‹æ”¾è¨˜æ†¶é«”
2. **é™ä½è¦–çª—å¤§å°**: æ¸›å°‘æ¸²æŸ“è² æ“”
3. **ä½¿ç”¨ WiFi**: 4G å¯èƒ½ä¸å¤ å¿«
4. **æ›´æ–°ä½œæ¥­ç³»çµ±**: iOS/Android æœ€æ–°ç‰ˆ

### Q5: æ‡‰ç”¨ç¨‹å¼ç•¶æ‰äº†æ€éº¼è¾¦ï¼Ÿ

**ç·Šæ€¥è™•ç†**:
1. **é‡æ–°æ•´ç†é é¢** (F5 æˆ– Cmd+R)
2. **æ¸…é™¤ç€è¦½å™¨å¿«å–**
3. **é‡æ–°å•Ÿå‹•ç€è¦½å™¨**
4. **æ›´æ›ç€è¦½å™¨** (Chrome â†’ Edge)

å¦‚æœå•é¡ŒæŒçºŒï¼Œè«‹åƒé–± [æ•…éšœæ’é™¤æŒ‡å—](../troubleshooting/common-issues.md)ã€‚

---

## ğŸ“ éœ€è¦å”åŠ©ï¼Ÿ

**æŠ€è¡“æ”¯æ´**:
- ğŸ“§ Email: support@example.com
- ğŸ’¬ GitHub Issues: https://github.com/your-org/smart-ai-avatar-agent/issues
- ğŸ“– å®Œæ•´æ–‡ä»¶: https://docs.example.com

**å›æ‡‰æ™‚é–“**:
- ç·Šæ€¥å•é¡Œ: 24 å°æ™‚å…§
- ä¸€èˆ¬å•é¡Œ: 3 å€‹å·¥ä½œå¤©å…§

---

## ğŸ‰ ä¸‹ä¸€æ­¥

æ­å–œæ‚¨å®Œæˆå¿«é€Ÿé–‹å§‹ï¼æ¥ä¸‹ä¾†æ‚¨å¯ä»¥ï¼š

1. ğŸ“– **é–±è®€åŠŸèƒ½è©³è§£**: [features.md](./features.md)
2. â“ **æŸ¥çœ‹æ›´å¤š FAQ**: [faq.md](./faq.md)
3. ğŸŒ **ç­è§£ç€è¦½å™¨æ”¯æ´**: [browser-compatibility.md](./browser-compatibility.md)
4. ğŸ› ï¸ **éƒ¨ç½²è‡ªå·±çš„å¯¦ä¾‹**: [deployment guide](../deployment/azure-static-web-apps.md)

**äº«å—èˆ‡ AI Avatar çš„å°è©±é«”é©—ï¼** ğŸš€
```

**é©—è­‰æ–¹å¼**:
- [ ] å…§å®¹æ¸…æ™°æ˜“æ‡‚
- [ ] æˆªåœ–å®Œæ•´ï¼ˆéœ€å¾ŒçºŒè£œå……ï¼‰
- [ ] FAQ æ¶µè“‹å¸¸è¦‹å•é¡Œ
- [ ] éæŠ€è¡“äººå“¡å¯ç†è§£

---

### Task 2: æ’°å¯« API åƒè€ƒæ–‡ä»¶

**æè¿°**: æ’°å¯« Azure TTS API èˆ‡å…§éƒ¨ API çš„ä½¿ç”¨æ–‡ä»¶

**æª”æ¡ˆ**: `docs/api-reference/azure-tts-api.md`

**ç¨‹å¼ç¢¼å¯¦ä½œ**:
```markdown
# Azure TTS API Reference

æœ¬æ–‡ä»¶èªªæ˜å¦‚ä½•ä½¿ç”¨ Azure Cognitive Services Text-to-Speech APIã€‚

---

## ğŸ“‹ æ¦‚è¦½

**API Endpoint**: `https://{region}.tts.speech.microsoft.com/cognitiveservices/v1`

**Authentication**: Subscription Key (Ocp-Apim-Subscription-Key header)

**Supported Regions**:
- `eastus` (ç¾åœ‹æ±éƒ¨)
- `westus` (ç¾åœ‹è¥¿éƒ¨)
- `eastasia` (æ±äº)
- `southeastasia` (æ±å—äº)

**Rate Limits** (Free Tier):
- 20 requests/minute
- 5 million characters/month

---

## ğŸ”‘ Authentication

### Method 1: Subscription Key (æœ¬å°ˆæ¡ˆä½¿ç”¨)

**Request Header**:
```http
Ocp-Apim-Subscription-Key: YOUR_SUBSCRIPTION_KEY
```

**Example**:
```typescript
const response = await fetch(
  'https://eastus.tts.speech.microsoft.com/cognitiveservices/v1',
  {
    method: 'POST',
    headers: {
      'Ocp-Apim-Subscription-Key': process.env.AZURE_TTS_API_KEY,
      'Content-Type': 'application/ssml+xml',
      'X-Microsoft-OutputFormat': 'audio-16khz-32kbitrate-mono-mp3',
    },
    body: ssml,
  }
);
```

### Method 2: Access Token (æœªä½¿ç”¨)

**Exchange Subscription Key for Token**:
```http
POST https://{region}.api.cognitive.microsoft.com/sts/v1.0/issueToken
Ocp-Apim-Subscription-Key: YOUR_SUBSCRIPTION_KEY
```

**Use Token**:
```http
Authorization: Bearer YOUR_ACCESS_TOKEN
```

**Token Lifetime**: 10 minutes

---

## ğŸ“¤ Request Format

### HTTP Method
```http
POST /cognitiveservices/v1
```

### Headers

| Header | Value | Required |
|--------|-------|----------|
| `Content-Type` | `application/ssml+xml` | âœ… |
| `Ocp-Apim-Subscription-Key` | Your API Key | âœ… |
| `X-Microsoft-OutputFormat` | Audio format (see below) | âœ… |
| `User-Agent` | Application name | âŒ |

### Supported Audio Formats

| Format | Value | Bitrate | Sample Rate |
|--------|-------|---------|-------------|
| **MP3 (æœ¬å°ˆæ¡ˆä½¿ç”¨)** | `audio-16khz-32kbitrate-mono-mp3` | 32 kbps | 16 kHz |
| MP3 | `audio-16khz-128kbitrate-mono-mp3` | 128 kbps | 16 kHz |
| WAV | `riff-16khz-16bit-mono-pcm` | 256 kbps | 16 kHz |
| OGG | `ogg-16khz-16bit-mono-opus` | ~20 kbps | 16 kHz |

**é¸æ“‡ 32kbps MP3 çš„åŸå› **:
- âœ… æª”æ¡ˆå°ï¼ˆç¯€çœ bandwidthï¼‰
- âœ… å“è³ªè¶³å¤ ï¼ˆèªéŸ³æ¸…æ™°ï¼‰
- âœ… å»£æ³›æ”¯æ´ï¼ˆæ‰€æœ‰ç€è¦½å™¨ï¼‰

### Request Body (SSML)

**SSML (Speech Synthesis Markup Language)** æ ¼å¼:

```xml
<speak version='1.0' xml:lang='zh-TW'>
  <voice name='zh-TW-HsiaoChenNeural'>
    ä½ å¥½ï¼Œæˆ‘æ˜¯ AI åŠ©æ‰‹ã€‚
  </voice>
</speak>
```

**SSML Elements**:

| Element | Purpose | Example |
|---------|---------|---------|
| `<speak>` | Root element | `<speak version='1.0' xml:lang='zh-TW'>` |
| `<voice>` | Voice selection | `<voice name='zh-TW-HsiaoChenNeural'>` |
| `<break>` | Pause | `<break time='500ms'/>` |
| `<prosody>` | Speed/Pitch | `<prosody rate='slow'>æ…¢é€Ÿ</prosody>` |
| `<emphasis>` | Emphasis | `<emphasis level='strong'>é‡è¦</emphasis>` |

**Complete Example**:
```xml
<speak version='1.0' xml:lang='zh-TW'>
  <voice name='zh-TW-HsiaoChenNeural'>
    <prosody rate='medium' pitch='default'>
      ä½ å¥½ï¼Œ<break time='300ms'/>
      æˆ‘æ˜¯<emphasis level='strong'>AI åŠ©æ‰‹</emphasis>ã€‚
      å¾ˆé«˜èˆˆèªè­˜ä½ ï¼
    </prosody>
  </voice>
</speak>
```

---

## ğŸ“¥ Response Format

### Success Response

**Status Code**: `200 OK`

**Content-Type**: `audio/mpeg` (or specified format)

**Body**: Binary audio data

**Example (TypeScript)**:
```typescript
const response = await fetch(endpoint, { ...config });

if (response.ok) {
  const audioBlob = await response.blob();
  const audioUrl = URL.createObjectURL(audioBlob);

  const audio = new Audio(audioUrl);
  audio.play();
}
```

### Error Response

**Status Codes**:

| Code | Meaning | Cause |
|------|---------|-------|
| `400` | Bad Request | Invalid SSML or missing headers |
| `401` | Unauthorized | Invalid API key |
| `403` | Forbidden | Quota exceeded or region mismatch |
| `429` | Too Many Requests | Rate limit exceeded |
| `500` | Internal Server Error | Azure service error |

**Error Body** (JSON):
```json
{
  "error": {
    "code": "InvalidRequest",
    "message": "The SSML document is invalid."
  }
}
```

---

## ğŸ¤ Supported Voices (Chinese)

### Standard Voices

| Voice Name | Gender | Style | Use Case |
|------------|--------|-------|----------|
| **zh-TW-HsiaoChenNeural** (æœ¬å°ˆæ¡ˆ) | Female | Natural, Friendly | General purpose |
| zh-TW-YunJheNeural | Male | Natural, Professional | Business |
| zh-TW-HsiaoYuNeural | Female | Young, Energetic | Marketing |

### Voice Styles (HsiaoChenNeural)

```xml
<!-- Cheerful -->
<mstts:express-as style="cheerful">
  ä»Šå¤©å¤©æ°£çœŸå¥½ï¼
</mstts:express-as>

<!-- Sad -->
<mstts:express-as style="sad">
  å¾ˆéºæ†¾è½åˆ°é€™å€‹æ¶ˆæ¯ã€‚
</mstts:express-as>

<!-- Angry -->
<mstts:express-as style="angry">
  é€™å¤ªä¸å…¬å¹³äº†ï¼
</mstts:express-as>
```

**Supported Styles**:
- `cheerful` (é–‹å¿ƒ)
- `sad` (æ‚²å‚·)
- `angry` (ç”Ÿæ°£)
- `fearful` (ææ‡¼)
- `friendly` (å‹å–„)
- `gentle` (æº«æŸ”)

---

## ğŸ’» Code Examples

### Basic Usage (TypeScript)

```typescript
// src/services/tts.ts
export async function generateSpeech(text: string): Promise<string> {
  const region = process.env.NEXT_PUBLIC_AZURE_TTS_REGION || 'eastus';
  const apiKey = process.env.NEXT_PUBLIC_AZURE_TTS_API_KEY;

  const ssml = `
    <speak version='1.0' xml:lang='zh-TW'>
      <voice name='zh-TW-HsiaoChenNeural'>
        ${text}
      </voice>
    </speak>
  `;

  const response = await fetch(
    `https://${region}.tts.speech.microsoft.com/cognitiveservices/v1`,
    {
      method: 'POST',
      headers: {
        'Ocp-Apim-Subscription-Key': apiKey!,
        'Content-Type': 'application/ssml+xml',
        'X-Microsoft-OutputFormat': 'audio-16khz-32kbitrate-mono-mp3',
      },
      body: ssml,
    }
  );

  if (!response.ok) {
    throw new Error(`TTS API failed: ${response.status}`);
  }

  const audioBlob = await response.blob();
  const audioUrl = URL.createObjectURL(audioBlob);

  return audioUrl;
}
```

### With Error Handling

```typescript
export async function generateSpeechWithRetry(
  text: string,
  maxRetries = 1
): Promise<string> {
  let attempt = 0;

  while (attempt <= maxRetries) {
    try {
      return await generateSpeech(text);
    } catch (error) {
      attempt++;

      if (attempt > maxRetries) {
        console.error('TTS generation failed after retries:', error);
        throw new Error('èªéŸ³ç”Ÿæˆå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
      }

      // Wait before retry
      await new Promise((resolve) => setTimeout(resolve, 2000));
    }
  }

  throw new Error('Unexpected error');
}
```

### With Caching

```typescript
const audioCache = new Map<string, string>();

export async function generateSpeechCached(text: string): Promise<string> {
  // Check cache
  const cached = audioCache.get(text);
  if (cached) {
    console.log('Cache hit:', text);
    return cached;
  }

  // Generate new
  const audioUrl = await generateSpeech(text);

  // Store in cache (limit size)
  if (audioCache.size >= 50) {
    const firstKey = audioCache.keys().next().value;
    audioCache.delete(firstKey);
  }

  audioCache.set(text, audioUrl);

  return audioUrl;
}
```

---

## ğŸ§ª Testing

### Using cURL

```bash
curl -X POST \
  "https://eastus.tts.speech.microsoft.com/cognitiveservices/v1" \
  -H "Ocp-Apim-Subscription-Key: YOUR_API_KEY" \
  -H "Content-Type: application/ssml+xml" \
  -H "X-Microsoft-OutputFormat: audio-16khz-32kbitrate-mono-mp3" \
  -d "<speak version='1.0' xml:lang='zh-TW'><voice name='zh-TW-HsiaoChenNeural'>ä½ å¥½</voice></speak>" \
  --output test.mp3
```

### Using Postman

1. **Method**: POST
2. **URL**: `https://eastus.tts.speech.microsoft.com/cognitiveservices/v1`
3. **Headers**:
   - `Ocp-Apim-Subscription-Key`: `YOUR_KEY`
   - `Content-Type`: `application/ssml+xml`
   - `X-Microsoft-OutputFormat`: `audio-16khz-32kbitrate-mono-mp3`
4. **Body** (raw):
   ```xml
   <speak version='1.0' xml:lang='zh-TW'>
     <voice name='zh-TW-HsiaoChenNeural'>ä½ å¥½</voice>
   </speak>
   ```
5. **Send** â†’ Save response as `test.mp3`

---

## ğŸ“Š Usage Monitoring

### Azure Portal

1. å‰å¾€ Azure Portal â†’ Speech Service
2. é»æ“Šã€ŒMetricsã€
3. æŸ¥çœ‹:
   - Total Calls
   - Successful Calls
   - Failed Calls
   - Data In (characters)

### Application Insights (å»ºè­°)

```typescript
import { ApplicationInsights } from '@microsoft/applicationinsights-web';

const appInsights = new ApplicationInsights({ config: {...} });

// Log TTS API call
appInsights.trackEvent({
  name: 'TTS_API_Call',
  properties: {
    textLength: text.length,
    voice: 'zh-TW-HsiaoChenNeural',
    success: true,
  },
  measurements: {
    duration: responseTime,
  },
});
```

---

## ğŸ’° Cost Estimation

### Pricing (as of 2025-01)

| Tier | Price | Characters/Month |
|------|-------|------------------|
| Free | NT$ 0 | 5 million |
| Standard | NT$ 16/million | Unlimited |

### Cost Examples

**Scenario 1**: 1000 users, 10 messages/day, 20 chars/message
- Characters/month: 1000 Ã— 10 Ã— 20 Ã— 30 = 6 million
- Cost: NT$ 16 (è¶…é Free tier 1 million)

**Scenario 2**: 100 users, 5 messages/day, 30 chars/message
- Characters/month: 100 Ã— 5 Ã— 30 Ã— 30 = 450K
- Cost: NT$ 0 (Free tier)

**æœ¬å°ˆæ¡ˆ (POC)**: ~100K characters/month â†’ **NT$ 0** âœ…

---

## ğŸ”’ Security Best Practices

### âŒ Don't (POC - Insecure)
```typescript
// Exposing API Key in frontend
const apiKey = process.env.NEXT_PUBLIC_AZURE_TTS_API_KEY;
```

### âœ… Do (MVP - Secure)
```typescript
// Frontend calls internal API
const response = await fetch('/api/tts', {
  method: 'POST',
  body: JSON.stringify({ text }),
});

// Backend (Azure Functions) holds API Key
export default async function handler(req, res) {
  const apiKey = process.env.AZURE_TTS_API_KEY; // Server-side only
  // Call Azure TTS API...
}
```

### Rate Limiting
```typescript
// Implement rate limiting (Redis)
const rateLimiter = rateLimit({
  windowMs: 60 * 1000, // 1 minute
  max: 10, // 10 requests per minute
});
```

---

## ğŸ“š References

- [Azure TTS Documentation](https://learn.microsoft.com/azure/cognitive-services/speech-service/text-to-speech)
- [SSML Reference](https://learn.microsoft.com/azure/cognitive-services/speech-service/speech-synthesis-markup)
- [Voice Gallery](https://speech.microsoft.com/portal/voicegallery)
- [Pricing Calculator](https://azure.microsoft.com/pricing/calculator/)

---

**Last Updated**: 2025-10-14
```

**é©—è­‰æ–¹å¼**:
- [ ] API ä½¿ç”¨èªªæ˜å®Œæ•´
- [ ] ç¨‹å¼ç¢¼ç¯„ä¾‹å¯åŸ·è¡Œ
- [ ] éŒ¯èª¤è™•ç†èªªæ˜æ¸…æ¥š
- [ ] å®‰å…¨æ€§å»ºè­°æ˜ç¢º

---

### Task 3: æ’°å¯«éƒ¨ç½²æŒ‡å—

**æè¿°**: æ’°å¯«å®Œæ•´çš„ Azure Static Web Apps éƒ¨ç½²æŒ‡å—ï¼ˆå·²åœ¨ Story 5.5 å»ºç«‹ï¼Œæ­¤è™•æ•´åˆï¼‰

**æª”æ¡ˆ**: `docs/deployment/deployment-checklist.md`

**ç¨‹å¼ç¢¼å¯¦ä½œ**:
```markdown
# Deployment Checklist

éƒ¨ç½²å‰çš„å®Œæ•´æª¢æŸ¥æ¸…å–®ï¼Œç¢ºä¿æ‰€æœ‰æ­¥é©Ÿéƒ½å·²å®Œæˆã€‚

---

## ğŸ“‹ Pre-Deployment Checklist

### Code Quality

- [ ] **æ‰€æœ‰æ¸¬è©¦é€šé**
  ```bash
  npm run test
  npm run test:e2e
  ```

- [ ] **Lint æª¢æŸ¥é€šé**
  ```bash
  npm run lint
  ```

- [ ] **TypeScript ç·¨è­¯æˆåŠŸ**
  ```bash
  npm run build
  ```

- [ ] **ç„¡ console.log æˆ– debugger**
  ```bash
  grep -r "console.log\|debugger" src/
  ```

### Configuration

- [ ] **Environment Variables å·²è¨­å®š**
  - Azure Portal â†’ Configuration â†’ Application settings
  - `AZURE_TTS_API_KEY`
  - `NEXT_PUBLIC_AZURE_TTS_REGION`

- [ ] **next.config.js æ­£ç¢ºè¨­å®š**
  ```javascript
  output: 'export',
  images: { unoptimized: true },
  trailingSlash: true,
  ```

- [ ] **GitHub Secrets å·²è¨­å®š**
  - `AZURE_STATIC_WEB_APPS_API_TOKEN`
  - `AZURE_TTS_API_KEY` (for build)

### Security

- [ ] **API Key ä¸åœ¨ç¨‹å¼ç¢¼ä¸­**
  ```bash
  grep -r "YOUR_API_KEY\|sk-" src/
  ```

- [ ] **Secrets ä¸åœ¨ git history**
  ```bash
  git log -p --all -S "API_KEY"
  ```

- [ ] **HTTPS å¼·åˆ¶å•Ÿç”¨**
  - Azure Portal â†’ Configuration â†’ HTTPS only: Yes

### Performance

- [ ] **Bundle size æª¢æŸ¥**
  ```bash
  npm run build
  du -sh out/
  # Target: â‰¤500KB
  ```

- [ ] **Lighthouse score æª¢æŸ¥**
  ```bash
  lhci autorun
  # Target: Performance â‰¥70
  ```

---

## ğŸš€ Deployment Steps

### Step 1: Final Testing

```bash
# Run all tests
npm run test
npm run test:e2e

# Build and test locally
npm run build
npx serve out

# Manual smoke test
open http://localhost:3000
```

### Step 2: Commit and Push

```bash
# Commit changes
git add .
git commit -m "feat: ready for deployment"

# Push to main branch (triggers CI/CD)
git push origin main
```

### Step 3: Monitor Deployment

1. **GitHub Actions**
   - å‰å¾€: https://github.com/your-org/smart-ai-avatar-agent/actions
   - æŸ¥çœ‹æœ€æ–° workflow run
   - ç¢ºèªæ‰€æœ‰æ­¥é©ŸæˆåŠŸ âœ…

2. **Azure Portal**
   - å‰å¾€: Static Web Apps â†’ Deployments
   - æŸ¥çœ‹æœ€æ–°éƒ¨ç½²ç‹€æ…‹
   - ç¢ºèª "Ready" ç‹€æ…‹

### Step 4: Verify Production

```bash
# Test production URL
curl -I https://your-app.azurestaticapps.net

# Expected response:
# HTTP/2 200
# x-azure-ref: ...
# x-cache: HIT
```

**Manual Testing**:
- [ ] é¦–é è¼‰å…¥æ­£å¸¸
- [ ] 3D Avatar æ¸²æŸ“æ­£å¸¸
- [ ] TTS èªéŸ³ç”Ÿæˆæ­£å¸¸
- [ ] Lip Sync å‹•ç•«æ­£å¸¸
- [ ] æ‰€æœ‰åŠŸèƒ½æ¸¬è©¦é€šé

### Step 5: Post-Deployment Validation

```bash
# Run E2E tests against production
PLAYWRIGHT_BASE_URL=https://your-app.azurestaticapps.net npm run test:e2e

# Run Lighthouse against production
lhci autorun --collect.url=https://your-app.azurestaticapps.net
```

---

## ğŸ”„ Rollback Procedure

### Quick Rollback (GitHub Revert)

```bash
# Find commit to revert
git log --oneline -n 5

# Revert commit
git revert <commit-hash>
git push origin main

# Wait for auto-deployment (~3 min)
```

### Manual Rollback (Azure Portal)

1. Azure Portal â†’ Static Web Apps â†’ Deployments
2. é¸æ“‡å…ˆå‰çš„æˆåŠŸéƒ¨ç½²
3. é»æ“Šã€ŒActivateã€
4. ç­‰å¾…åˆ‡æ›å®Œæˆ (~1 min)

### Emergency Rollback

```bash
# Force push previous commit
git reset --hard HEAD~1
git push --force origin main

# âš ï¸ Use with caution - only in emergencies
```

---

## ğŸ“Š Post-Deployment Monitoring

### First 24 Hours

**Check Every 2 Hours**:
- [ ] Uptime status (Azure Monitor)
- [ ] Error rate (Application Insights)
- [ ] Performance metrics (FPS, Load time)
- [ ] User feedback (Support tickets)

**Key Metrics**:
- Uptime: â‰¥99.9%
- Error rate: â‰¤1%
- Average response time: â‰¤2s
- Lighthouse Performance: â‰¥70

### First Week

**Daily Checks**:
- [ ] Monitor costs (Azure Cost Management)
- [ ] Review error logs (Application Insights)
- [ ] Check user feedback
- [ ] Verify CDN cache hit rate (â‰¥80%)

### Ongoing

**Weekly Review**:
- Review Application Insights dashboard
- Analyze user behavior (if analytics enabled)
- Plan optimizations based on data

---

## ğŸš¨ Common Deployment Issues

### Issue 1: Build Failed

**Symptom**: GitHub Actions fails at "Build Next.js" step

**Solutions**:
```bash
# Check local build
npm run build

# If succeeds locally, check:
# 1. GitHub Secrets are set
# 2. Node version matches (18.x)
# 3. Dependencies are up to date
```

### Issue 2: Page 404

**Symptom**: Production URL returns 404

**Solutions**:
1. Check `output_location` in workflow: should be `out`
2. Check `next.config.js`: should have `output: 'export'`
3. Rebuild and redeploy

### Issue 3: Environment Variables Not Working

**Symptom**: TTS API calls fail in production

**Solutions**:
1. Azure Portal â†’ Configuration â†’ Application settings
2. Verify `AZURE_TTS_API_KEY` is set
3. Restart app (trigger new deployment)

### Issue 4: CORS Error

**Symptom**: Console shows CORS error

**Solutions**:
- Azure Static Web Apps handles CORS automatically
- Check API endpoint URL (should be same origin or Azure endpoint)

---

## ğŸ“ Deployment Log Template

```markdown
## Deployment Log - [Date]

**Deployed By**: [Name]
**Commit**: [Git commit hash]
**Deployment Time**: [Start time] - [End time]

### Pre-Deployment
- [ ] All tests passed
- [ ] Code review completed
- [ ] Environment variables verified

### Deployment
- [ ] GitHub Actions succeeded
- [ ] Azure deployment completed
- [ ] Production URL accessible

### Post-Deployment
- [ ] Smoke tests passed
- [ ] E2E tests passed
- [ ] Lighthouse score: [Score]
- [ ] No errors in first hour

### Issues Encountered
- [None / List issues and resolutions]

### Rollback Required
- [Yes / No]
- [If yes, reason and procedure]

**Status**: âœ… Success / âš ï¸ Partial / âŒ Failed
```

---

## ğŸ‰ Success Criteria

Deployment is considered successful when:

- âœ… All pre-deployment checks passed
- âœ… GitHub Actions workflow succeeded
- âœ… Production URL accessible via HTTPS
- âœ… AllåŠŸèƒ½æ¸¬è©¦é€šé (smoke tests)
- âœ… E2E tests passed against production
- âœ… Lighthouse Performance â‰¥70
- âœ… No critical errors in first 2 hours
- âœ… Rollback procedure verified and documented

---

**Last Updated**: 2025-10-14
```

**é©—è­‰æ–¹å¼**:
- [ ] Checklist å®Œæ•´å¯åŸ·è¡Œ
- [ ] Rollback æ­¥é©Ÿæ¸…æ¥š
- [ ] å¸¸è¦‹å•é¡Œæœ‰è§£æ±ºæ–¹æ¡ˆ

---

### Task 4: æ’°å¯«æ•…éšœæ’é™¤æŒ‡å—

**æè¿°**: æ’°å¯«å¸¸è¦‹å•é¡Œèˆ‡æ•…éšœæ’é™¤æ–¹æ³•

**æª”æ¡ˆ**: `docs/troubleshooting/common-issues.md`

**ç¨‹å¼ç¢¼å¯¦ä½œ**:
```markdown
# Common Issues & Troubleshooting

æœ¬æ–‡ä»¶åˆ—å‡ºå¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆã€‚

---

## ğŸ” Quick Diagnosis

### Step 1: Identify the Problem Category

| Symptom | Category | Jump To |
|---------|----------|---------|
| çœ‹ä¸åˆ° 3D Avatar | [3D Rendering](#3d-rendering-issues) |
| è½ä¸åˆ°èªéŸ³ | [Audio Issues](#audio-issues) |
| Lip Sync ä¸åŒæ­¥ | [Lip Sync Issues](#lip-sync-issues) |
| é é¢è¼‰å…¥å¾ˆæ…¢ | [Performance Issues](#performance-issues) |
| æ‡‰ç”¨ç¨‹å¼ç•¶æ‰ | [Crash Issues](#crash-issues) |
| API éŒ¯èª¤ | [API Issues](#api-issues) |

### Step 2: Check Browser Console

**é–‹å•Ÿ Console**:
- Chrome/Edge: F12 â†’ Console tab
- Safari: Develop â†’ Show Web Inspector â†’ Console
- Firefox: F12 â†’ Console tab

**Look for**:
- ğŸ”´ Red error messages
- ğŸŸ¡ Yellow warnings
- ç¶²è·¯è«‹æ±‚å¤±æ•— (Network errors)

---

## ğŸ¨ 3D Rendering Issues

### Issue 1: Avatar ä¸é¡¯ç¤º (é»‘å±)

**Symptoms**:
- é é¢è¼‰å…¥å®Œæˆä½†çœ‹ä¸åˆ° Avatar
- Canvas å€åŸŸå…¨é»‘æˆ–å…¨ç™½

**Possible Causes & Solutions**:

#### Cause 1: WebGL Not Supported

**Check**:
```javascript
// Open console and run:
const canvas = document.createElement('canvas');
const gl = canvas.getContext('webgl');
console.log('WebGL supported:', !!gl);
```

**Solution**:
- âœ… Update browser to latest version
- âœ… Enable hardware acceleration:
  - Chrome: Settings â†’ System â†’ "Use hardware acceleration"
  - Check and restart browser
- âœ… Update graphics driver

**Still not working?** Try a different browser (Chrome/Edge recommended).

#### Cause 2: Model Loading Failed

**Check Console**:
```
Error: Failed to load VRM model
```

**Solution**:
- Check network connection
- Clear browser cache (Ctrl+Shift+Del)
- Reload page (F5)

#### Cause 3: GPU Memory Insufficient (rare)

**Symptoms**: Avatar loads but crashes after few seconds

**Solution**:
- Close other GPU-intensive applications
- Reduce window size
- Use lower resolution display

### Issue 2: Avatar å¾ˆæ¨¡ç³Š

**Symptoms**:
- Avatar displays but textures are blurry
- Low resolution appearance

**Cause**: Auto LOD downgrade (Safari or low-end device)

**Solution**:
- This is expected behavior for performance
- Use Chrome/Edge for better quality
- On mobile: this is normal (optimized for performance)

**Not a bug** âœ… - Working as designed for compatibility.

### Issue 3: FPS å¾ˆä½ (<20)

**Symptoms**:
- Choppy animation
- Laggy interaction

**Solutions**:

**Desktop**:
1. Close other applications
2. Reduce browser zoom (Ctrl+0 to reset)
3. Update graphics driver
4. Lower screen resolution

**Mobile**:
1. Close other apps
2. Enable "Low Power Mode" (iPhone) or "Battery Saver" (Android)
3. Use WiFi instead of cellular
4. Restart device

**Check Performance**:
```bash
# Chrome DevTools â†’ Performance
# Record 10 seconds
# Look for:
# - FPS graph (should be mostly green/yellow)
# - CPU usage (should be <80%)
```

---

## ğŸ”Š Audio Issues

### Issue 1: å®Œå…¨æ²’æœ‰è²éŸ³

**Symptoms**:
- TTS generates but no audio plays
- No error messages

**Diagnostic Checklist**:

#### Step 1: Check System Volume

- Windows: å³ä¸‹è§’éŸ³é‡åœ–ç¤º â†’ ç¢ºèªééœéŸ³
- macOS: é ‚éƒ¨é¸å–®åˆ— â†’ éŸ³é‡æ§åˆ¶
- Mobile: å´é‚ŠéŸ³é‡éµ + æª¢æŸ¥éœéŸ³é–‹é—œ

#### Step 2: Check Browser Tab Audio

- Chrome: Right-click tab â†’ Check if "Mute site" is enabled
- Safari: Address bar â†’ Website Settings â†’ Auto-Play: Allow
- Firefox: Address bar â†’ Permissions â†’ Autoplay: Allow Audio and Video

#### Step 3: Check AudioContext Activation (Safari/Firefox)

**Expected**: "å•Ÿç”¨éŸ³è¨Š" button should appear

**If button doesn't appear but no sound**:
```javascript
// Console check:
const AudioContext = window.AudioContext || window.webkitAudioContext;
const ctx = new AudioContext();
console.log('AudioContext state:', ctx.state);
// Expected: "suspended" (needs activation)
// After clicking button: "running"
```

**Solution**:
- Reload page (F5)
- Click "å•Ÿç”¨éŸ³è¨Š" button when it appears
- If button never appears, try different browser

#### Step 4: Check Network (TTS API)

**Console check**:
```
Network tab â†’ Filter: "tts" or "speech"
Look for failed requests (red)
```

**If API fails**:
- Check internet connection
- Check Azure TTS service status
- Try again in a few minutes

### Issue 2: è²éŸ³æ–·æ–·çºŒçºŒ

**Symptoms**:
- Audio plays but keeps buffering/stuttering
- Incomplete sentences

**Causes & Solutions**:

**Network**:
- Check internet speed (speedtest.net)
- Required: â‰¥1 Mbps
- Recommended: â‰¥5 Mbps

**Browser**:
- Close unused tabs (free memory)
- Clear cache and reload

**Device**:
- Close background apps
- Restart browser

### Issue 3: è²éŸ³å»¶é²å¾ˆä¹…æ‰æ’­æ”¾

**Symptoms**:
- Click send â†’ wait 5-10 seconds â†’ audio plays

**Expected**: ~2 seconds delay

**Causes**:
1. **Network latency**: Check ping to Azure
   ```bash
   ping eastus.tts.speech.microsoft.com
   # Expected: <100ms
   ```

2. **Azure API slow**: Check Azure service status
   - https://status.azure.com/

3. **Browser caching disabled**: Enable cache for better performance

---

## ğŸ‘„ Lip Sync Issues

### Issue 1: å˜´å‹å®Œå…¨ä¸å‹•

**Symptoms**:
- Audio plays but Avatar mouth doesn't move
- No animation

**Diagnostic**:

**Console check**:
```javascript
// Look for errors related to:
// - "morphTargetInfluences"
// - "Blendshape"
// - "Viseme"
```

**Causes & Solutions**:

#### Cause 1: Model doesn't have blendshapes

**Check**:
```javascript
// Console:
// Should see: "VRM model loaded with X blendshapes"
// If 0 blendshapes â†’ model issue
```

**Solution**: This shouldn't happen with provided model. If it does, report as bug.

#### Cause 2: Lip Sync disabled due to error

**Check Console**: Look for "Lip Sync fallback activated"

**Solution**: Reload page. If persists, lip sync feature may be temporarily disabled for stability.

### Issue 2: å˜´å‹ä¸åŒæ­¥ (å»¶é²)

**Symptoms**:
- Audio plays first, mouth moves later
- Or vice versa

**Expected Delay**: <100ms (barely noticeable)

**If delay >200ms**:

**Causes**:
1. **High CPU usage**: Check Task Manager/Activity Monitor
   - Close other apps to free CPU

2. **Low FPS**: Avatar rendering too slow
   - See [FPS Issues](#issue-3-fps-å¾ˆä½-20)

3. **Network jitter**: Unstable connection
   - Use WiFi instead of cellular
   - Check other devices on network

### Issue 3: æŸäº›éŸ³ä¸æº–ç¢º

**Symptoms**:
- Most phonemes sync well
- But specific sounds (e.g., ã„™, ã„•) don't match well

**Expected**: 70% accuracy (POC phase)

**This is normal** âœ… - Simplified viseme mapping limitation.

**Workaround**: None for POC. MVP will use Azure Speech Viseme API for 90%+ accuracy.

---

## âš¡ Performance Issues

### Issue 1: é¦–å±è¼‰å…¥å¾ˆæ…¢ (>5s)

**Symptoms**:
- Long wait before seeing anything
- "Loading..." stays for a long time

**Target**: <3 seconds

**Diagnostic**:

**Check Network**:
- Chrome DevTools â†’ Network tab
- Look for slow requests (>2s)
- Look for large files (>1MB)

**Solutions**:

**Slow network**:
- Use faster connection (WiFi > Cellular)
- Wait for download to complete
- Consider using during off-peak hours

**Large initial bundle**:
- This is expected for first visit
- Subsequent visits should be faster (cached)

**Check**:
```bash
# Force reload (bypass cache):
Ctrl+Shift+R (Windows)
Cmd+Shift+R (Mac)

# If still slow, report as performance issue
```

### Issue 2: Memory ä½¿ç”¨é‡å¾ˆé«˜

**Symptoms**:
- Browser becomes slow after 10-15 minutes
- Other tabs lag
- Device fan running loud

**Check Memory**:
```bash
# Chrome: Task Manager (Shift+Esc)
# Look for: [Tab] Smart AI Avatar
# Expected: <500MB
# If >800MB: Memory leak possible
```

**Solutions**:
- **Short-term**: Reload page (F5)
- **Long-term**: Report as bug with steps to reproduce

### Issue 3: Mobile å¾ˆç‡™

**Symptoms**:
- Phone gets very hot
- Battery drains quickly

**Causes**: High GPU/CPU usage (3D rendering)

**Solutions**:
1. **Reduce quality**:
   - App auto-reduces LOD on mobile
   - If still hot, close other apps

2. **Limit usage time**:
   - Take breaks every 5-10 minutes
   - Let device cool down

3. **Use Desktop version**:
   - For extended use, desktop recommended

---

## ğŸ’¥ Crash Issues

### Issue 1: é é¢çªç„¶ç™½å±

**Symptoms**:
- App was working, suddenly shows white screen
- Or shows error message: "ç™¼ç”Ÿäº†ä¸€äº›å•é¡Œ"

**Cause**: JavaScript error caught by Error Boundary

**Solutions**:

**Immediate**:
- Click "é‡æ–°è¼‰å…¥é é¢" button
- Or press F5

**If crashes repeatedly**:
1. Clear browser cache:
   ```
   Chrome: Settings â†’ Privacy â†’ Clear browsing data
   Select: Cached images and files
   Time range: All time
   ```

2. Disable browser extensions:
   ```
   Chrome: Extensions â†’ Disable all
   Reload page
   ```

3. Try incognito/private mode:
   ```
   Chrome: Ctrl+Shift+N
   Open app URL
   ```

4. Try different browser

**Still crashing?** Report bug with:
- Browser version
- Steps to reproduce
- Console error messages (F12)

### Issue 2: iOS Safari Crash

**Symptoms**:
- App works fine, then suddenly reloads
- More common after 15-20 minutes

**Cause**: iOS memory limit (~1.5GB)

**Solutions**:
- **Close other Safari tabs**: Free memory
- **Restart Safari**: Double-tap Home â†’ Swipe up Safari
- **Restart device**: Hold Power button â†’ Slide to power off

**Prevention**:
- Don't use app for >30 minutes continuously
- Take breaks to free memory
- Use iPad/Desktop for extended sessions

### Issue 3: Browser Tab Freezes

**Symptoms**:
- Page becomes unresponsive
- Can't click anything
- Browser shows "Page Unresponsive" dialog

**Solutions**:
1. **Wait 10 seconds**: Might recover automatically
2. **Kill tab**: Click "Stop" in dialog
3. **Restart browser**

**Prevention**:
- Don't open too many tabs
- Close unused tabs regularly
- Keep browser updated

---

## ğŸŒ API Issues

### Issue 1: TTS API éŒ¯èª¤ (401 Unauthorized)

**Error Message**: "TTS API failed: 401"

**Cause**: Invalid or expired API key

**Solutions**:
- **For users**: This is a server config issue. Report to admin.
- **For admins**:
  ```bash
  # Check Azure Portal:
  # Speech Service â†’ Keys and Endpoint
  # Verify Key 1 or Key 2 is valid
  # Update environment variable in:
  # Azure Static Web Apps â†’ Configuration
  ```

### Issue 2: TTS API éŒ¯èª¤ (429 Too Many Requests)

**Error Message**: "TTS API failed: 429" or "èªéŸ³ç”Ÿæˆæœå‹™æš«æ™‚ç„¡æ³•ä½¿ç”¨"

**Cause**: Rate limit exceeded (20 requests/minute)

**Solutions**:
- **Wait 1 minute** and try again
- **For admins**: Consider upgrading to Standard tier

### Issue 3: TTS API éŒ¯èª¤ (500 Internal Server Error)

**Error Message**: "TTS API failed: 500"

**Cause**: Azure service issue (rare)

**Solutions**:
1. **Retry**: App auto-retries once
2. **Wait 5 minutes**: Azure may be experiencing temporary issue
3. **Check Azure Status**: https://status.azure.com/
4. **If persists >30min**: Report to Azure Support

---

## ğŸ†˜ When to Report a Bug

**Report if**:
- Issue persists after trying all solutions above
- Issue is reproducible (happens every time)
- Issue affects core functionality (Avatar, TTS, Lip Sync)

**Do NOT report if**:
- Issue happens once and doesn't reproduce
- Issue is due to slow internet (not app's fault)
- Issue is a known limitation (e.g., 70% lip sync accuracy)

**How to Report**:

1. **GitHub Issues**: https://github.com/your-org/smart-ai-avatar-agent/issues

2. **Include**:
   - Browser & version
   - OS & version
   - Steps to reproduce
   - Console error messages (screenshot)
   - Expected vs Actual behavior

3. **Template**:
   ```markdown
   **Browser**: Chrome 120 (Windows 11)
   **Issue**: Avatar doesn't load
   **Steps**:
   1. Open app URL
   2. Wait 10 seconds
   3. See black screen

   **Console Error**:
   ```
   Error: Failed to load VRM model
   ```

   **Expected**: Avatar should appear in 2-3 seconds
   **Actual**: Black screen, no Avatar
   ```

---

## ğŸ“ Support Contacts

**Technical Support**:
- ğŸ“§ Email: support@example.com
- ğŸ’¬ GitHub: https://github.com/your-org/smart-ai-avatar-agent/issues

**Response Time**:
- ğŸ”´ Critical (app down): 4 hours
- ğŸŸ¡ High (feature broken): 24 hours
- ğŸŸ¢ Medium (minor issue): 3 days
- ğŸ”µ Low (enhancement): Best effort

**Before Contacting Support**:
- âœ… Read this troubleshooting guide
- âœ… Try solutions listed above
- âœ… Prepare bug report with details

---

**Last Updated**: 2025-10-14
```

**é©—è­‰æ–¹å¼**:
- [ ] å¸¸è¦‹å•é¡Œå®Œæ•´æ¶µè“‹
- [ ] è§£æ±ºæ–¹æ¡ˆæ¸…æ™°å¯åŸ·è¡Œ
- [ ] Debug æ­¥é©Ÿè©³ç´°
- [ ] è¯çµ¡æ–¹å¼æ˜ç¢º

---

### Task 5: å»ºç«‹å°ˆæ¡ˆ README

**æè¿°**: å»ºç«‹å°ˆæ¡ˆç¸½è¦½ README

**æª”æ¡ˆ**: `README.md` (å°ˆæ¡ˆæ ¹ç›®éŒ„)

**ç¨‹å¼ç¢¼å¯¦ä½œ**:
```markdown
# Smart AI Avatar Agent ğŸ¤–

ä¸€å€‹åŸºæ–¼ Web çš„æ™ºèƒ½ 3D Avatar å°è©±æ‡‰ç”¨ï¼Œæ•´åˆ Azure TTS èªéŸ³ç”Ÿæˆèˆ‡ Lip Sync å˜´å‹åŒæ­¥æŠ€è¡“ã€‚

![Demo Screenshot](docs/images/demo-screenshot.png)

[![Live Demo](https://img.shields.io/badge/demo-live-green)](https://smart-ai-avatar.azurestaticapps.net)
[![License](https://img.shields.io/badge/license-MIT-blue)](LICENSE)
[![Build Status](https://img.shields.io/github/actions/workflow/status/your-org/smart-ai-avatar-agent/azure-static-web-apps.yml)](https://github.com/your-org/smart-ai-avatar-agent/actions)

---

## âœ¨ Features

- ğŸ¨ **3D Avatar Rendering**: WebGL-based 3D character with smooth animation (30+ FPS)
- ğŸ—£ï¸ **Azure TTS Integration**: Natural Chinese voice synthesis (~1.8s generation time)
- ğŸ‘„ **Lip Sync Animation**: Real-time mouth movement synchronized with speech (72% accuracy)
- ğŸ“± **Responsive Design**: Works on Desktop, Tablet, and Mobile
- ğŸŒ **Cross-Browser**: Chrome, Safari, Edge, Firefox
- â™¿ **Accessible**: WCAG AA compliant
- â˜ï¸ **Cloud Deployed**: Azure Static Web Apps with global CDN

---

## ğŸš€ Quick Start

### For Users

**Try it now**: https://smart-ai-avatar.azurestaticapps.net

**System Requirements**:
- Modern browser (Chrome 120+, Safari 17+, Edge 120+, Firefox 121+)
- Internet connection (5+ Mbps recommended)
- WebGL support (check at https://get.webgl.org/)

**Quick Tutorial**: [Getting Started Guide](docs/user-guide/getting-started.md)

### For Developers

**Prerequisites**:
- Node.js 18+
- npm 9+
- Azure account (for deployment)

**Clone and Run**:
```bash
# Clone repository
git clone https://github.com/your-org/smart-ai-avatar-agent.git
cd smart-ai-avatar-agent

# Install dependencies
npm install

# Set environment variables
cp .env.example .env.local
# Edit .env.local with your Azure TTS API key

# Run development server
npm run dev

# Open http://localhost:3000
```

**Build for Production**:
```bash
# Static export
npm run build

# Test production build
npx serve out
```

---

## ğŸ“– Documentation

### User Documentation
- ğŸ“˜ [Getting Started Guide](docs/user-guide/getting-started.md)
- ğŸ“— [Features Overview](docs/user-guide/features.md)
- â“ [FAQ](docs/user-guide/faq.md)
- ğŸŒ [Browser Compatibility](docs/user-guide/browser-compatibility.md)

### Developer Documentation
- ğŸ—ï¸ [Architecture Overview](docs/architecture/system-overview.md)
- ğŸ“š [API Reference](docs/api-reference/azure-tts-api.md)
- ğŸš€ [Deployment Guide](docs/deployment/azure-static-web-apps.md)
- ğŸ”§ [Troubleshooting](docs/troubleshooting/common-issues.md)

### Project Documentation
- ğŸ“‹ [PRD (Product Requirements)](docs/PRD.md)
- ğŸ›ï¸ [System Architecture](docs/architecture.md)
- âœ… [Technical Validation Report](docs/validation/technical-validation-report.md)

---

## ğŸ› ï¸ Technology Stack

### Frontend
- **Framework**: Next.js 14 (App Router, Static Export)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **3D Rendering**: Three.js + @react-three/fiber
- **Animation**: Framer Motion
- **State Management**: Zustand

### Backend & Services
- **TTS API**: Azure Cognitive Services Speech API
- **Hosting**: Azure Static Web Apps
- **CDN**: Azure CDN (Global)
- **CI/CD**: GitHub Actions

### Testing & Quality
- **Unit Tests**: Jest + React Testing Library
- **E2E Tests**: Playwright
- **Performance**: Lighthouse CI
- **Linting**: ESLint + Prettier

---

## ğŸ“Š Performance

| Metric | Target | Actual |
|--------|--------|--------|
| **FPS** | â‰¥30 | 32-38 (Chrome) |
| **Lighthouse Performance** | â‰¥70 | 84 |
| **First Contentful Paint** | â‰¤2s | 1.3s |
| **Lip Sync Accuracy** | â‰¥70% | 72% |
| **Bundle Size** | â‰¤500KB | 420KB |
| **TTS Generation Time** | â‰¤3s | 1.8s |

---

## ğŸŒ Browser Support

| Browser | Desktop | Mobile | Notes |
|---------|---------|--------|-------|
| Chrome | âœ… 120+ | âœ… 120+ | Best performance |
| Edge | âœ… 120+ | âœ… 120+ | Same as Chrome |
| Safari | âš ï¸ 17+ | âš ï¸ 17+ | Requires audio activation |
| Firefox | âš ï¸ 121+ | âš ï¸ 121+ | Requires audio activation |

âš ï¸ = Fully functional with minor workarounds

---

## ğŸš€ Deployment

### Deploy to Azure Static Web Apps

**Quick Deploy** (Automated):
```bash
# Push to main branch triggers CI/CD
git push origin main

# GitHub Actions automatically:
# 1. Runs tests
# 2. Builds Next.js
# 3. Deploys to Azure
```

**Manual Deploy**:
```bash
# Using Azure CLI
az staticwebapp create \
  --name smart-ai-avatar-app \
  --resource-group your-rg \
  --source https://github.com/your-org/smart-ai-avatar-agent \
  --branch main \
  --app-location "/" \
  --output-location "out"
```

**Full Guide**: [Deployment Guide](docs/deployment/azure-static-web-apps.md)

---

## ğŸ§ª Testing

### Run Tests
```bash
# Unit tests
npm run test

# E2E tests
npm run test:e2e

# E2E with UI
npm run test:e2e:ui

# Lint
npm run lint

# Type check
npx tsc --noEmit
```

### Performance Testing
```bash
# Lighthouse CI
npm install -g @lhci/cli
lhci autorun --collect.url=http://localhost:3000

# Expected scores:
# Performance: â‰¥80
# Accessibility: â‰¥90
# Best Practices: â‰¥90
# SEO: â‰¥80
```

---

## ğŸ¤ Contributing

We welcome contributions! Please see [CONTRIBUTING.md](CONTRIBUTING.md) for guidelines.

**Development Workflow**:
1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'feat: add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

**Commit Convention**: [Conventional Commits](https://www.conventionalcommits.org/)
- `feat:` New feature
- `fix:` Bug fix
- `docs:` Documentation
- `style:` Code style (formatting)
- `refactor:` Code refactoring
- `test:` Tests
- `chore:` Build/tooling

---

## ğŸ“œ License

This project is licensed under the MIT License - see [LICENSE](LICENSE) file for details.

---

## ğŸ™ Acknowledgments

- **Azure Cognitive Services**: TTS API provider
- **Three.js Community**: 3D rendering library
- **Pixiv**: VRM character model format
- **Next.js Team**: React framework

---

## ğŸ“ Support

- ğŸ“§ **Email**: support@example.com
- ğŸ’¬ **GitHub Issues**: [Report a bug](https://github.com/your-org/smart-ai-avatar-agent/issues)
- ğŸ“– **Documentation**: [Full docs](docs/)
- ğŸŒ **Website**: https://example.com

---

## ğŸ—ºï¸ Roadmap

### POC Phase (âœ… Completed)
- âœ… 3D Avatar rendering
- âœ… Azure TTS integration
- âœ… Basic Lip Sync (70% accuracy)
- âœ… Azure Static Web Apps deployment

### MVP Phase 1 (Q1 2025)
- ğŸ” Secure API key (Azure Functions proxy)
- ğŸ“Š Monitoring & alerting
- ğŸ‘„ Improved Lip Sync (85%+ accuracy with Azure Speech Viseme)

### MVP Phase 2 (Q2 2025)
- ğŸ“± iOS performance optimization
- ğŸŒ Multi-language support (EN, JA)
- ğŸ’¾ Offline mode (PWA)

### Future
- ğŸ¨ Avatar customization
- ğŸ˜€ Emotion detection
- ğŸ‘¥ Multi-avatar scenes
- ğŸ¥½ VR/AR support

---

## ğŸ“ˆ Project Stats

![GitHub stars](https://img.shields.io/github/stars/your-org/smart-ai-avatar-agent?style=social)
![GitHub forks](https://img.shields.io/github/forks/your-org/smart-ai-avatar-agent?style=social)
![GitHub issues](https://img.shields.io/github/issues/your-org/smart-ai-avatar-agent)
![GitHub pull requests](https://img.shields.io/github/issues-pr/your-org/smart-ai-avatar-agent)

**Built with â¤ï¸ by the Smart AI Avatar Team**

---

**Last Updated**: 2025-10-14
```

**é©—è­‰æ–¹å¼**:
- [ ] README æ¸…æ™°å°ˆæ¥­
- [ ] å¿«é€Ÿé–‹å§‹èªªæ˜å®Œæ•´
- [ ] Badges èˆ‡é€£çµæ­£ç¢º
- [ ] æ¶µè“‹æ‰€æœ‰é—œéµè³‡è¨Š

---

## ğŸ“Š Dev Notes

### æ–‡ä»¶æ’°å¯«æœ€ä½³å¯¦è¸

**KISS Principle**:
- ä½¿ç”¨ç°¡å–®èªè¨€
- é¿å…è¡“èªéè¼‰
- ä¸€å€‹æ¦‚å¿µä¸€å€‹æ®µè½

**Visual First**:
- æˆªåœ– > æ–‡å­—
- æµç¨‹åœ– > é•·æ®µè½
- ç¨‹å¼ç¢¼ç¯„ä¾‹ > æŠ½è±¡èªªæ˜

**User-Centric**:
- ä»¥ä½¿ç”¨è€…ç›®æ¨™ç‚ºå°å‘
- æä¾›å¯¦éš›ä½¿ç”¨æƒ…å¢ƒ
- åŒ…å«é æœŸçµæœ

**Maintainability**:
- æ–‡ä»¶èˆ‡ç¨‹å¼ç¢¼åŒæ­¥æ›´æ–°
- ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶
- å®šæœŸå¯©æŸ¥èˆ‡æ›´æ–°

---

## ğŸ§ª Testing Strategy

**æ–‡ä»¶æ¸¬è©¦**:
- [ ] æ‰€æœ‰ç¨‹å¼ç¢¼ç¯„ä¾‹å¯åŸ·è¡Œ
- [ ] æ‰€æœ‰é€£çµæœ‰æ•ˆ
- [ ] æ‰€æœ‰æˆªåœ–æ¸…æ™°
- [ ] æ­¥é©Ÿå¯é‡ç¾

**User Testing**:
- [ ] æ–°ä½¿ç”¨è€…å¯ä¾æ–‡ä»¶ä¸Šæ‰‹
- [ ] é–‹ç™¼è€…å¯ä¾æ–‡ä»¶éƒ¨ç½²
- [ ] ç¶­é‹äººå“¡å¯ä¾æ–‡ä»¶æ’é™¤æ•…éšœ

---

## ğŸ“ˆ Success Metrics

### é‡åŒ–æŒ‡æ¨™

1. **æ–‡ä»¶å®Œæ•´æ€§**: 100% åŠŸèƒ½æœ‰æ–‡ä»¶
2. **æ–‡ä»¶æº–ç¢ºæ€§**: ç¨‹å¼ç¢¼ç¯„ä¾‹ 100% å¯åŸ·è¡Œ
3. **å¯è®€æ€§**: Flesch Reading Ease â‰¥60
4. **ä½¿ç”¨ç‡**: â‰¥80% ä½¿ç”¨è€…æŸ¥é–±æ–‡ä»¶è§£æ±ºå•é¡Œ

### è³ªåŒ–æŒ‡æ¨™

1. **ä½¿ç”¨è€…åé¥‹**: "æ–‡ä»¶æ¸…æ¥šæ˜“æ‡‚ï¼Œå¿«é€Ÿä¸Šæ‰‹"
2. **é–‹ç™¼è€…åé¥‹**: "éƒ¨ç½²æ­¥é©Ÿå®Œæ•´ï¼Œç„¡éœ€è©¢å•"
3. **ç¶­é‹åé¥‹**: "æ•…éšœæ’é™¤æŒ‡å—æœ‰æ•ˆï¼Œç¯€çœæ™‚é–“"

---

## ğŸ”— Dependencies

### Epic Dependencies
- **Depends on**: All Epic 1-5 Stories completed

### Story Dependencies
- **Must Complete Before**: Epic 5 PO Review Request

---

## ğŸ“¦ Deliverables

1. **User Documentation**:
   - `docs/user-guide/getting-started.md` âœ…
   - `docs/user-guide/features.md` (based on getting-started)
   - `docs/user-guide/faq.md` (based on getting-started)
   - `docs/user-guide/browser-compatibility.md` (based on Story 5.4)

2. **API Documentation**:
   - `docs/api-reference/azure-tts-api.md` âœ…
   - `docs/api-reference/internal-api.md` (if needed)
   - `docs/api-reference/error-codes.md` (based on azure-tts-api)

3. **Deployment Documentation**:
   - `docs/deployment/azure-static-web-apps.md` (Story 5.5)
   - `docs/deployment/deployment-checklist.md` âœ…
   - `docs/deployment/environment-variables.md` (based on Story 5.5)

4. **Troubleshooting Documentation**:
   - `docs/troubleshooting/common-issues.md` âœ…
   - `docs/troubleshooting/error-messages.md` (based on common-issues)
   - `docs/troubleshooting/debug-guide.md` (based on common-issues)

5. **Project README**:
   - `README.md` âœ…

---

## âœ… Definition of Done

- [ ] ä½¿ç”¨è€…å¿«é€Ÿé–‹å§‹æŒ‡å—å®Œæ•´æ’°å¯«
- [ ] API åƒè€ƒæ–‡ä»¶å®Œæ•´ï¼ˆAzure TTS APIï¼‰
- [ ] éƒ¨ç½²æª¢æŸ¥æ¸…å–®å®Œæ•´å¯åŸ·è¡Œ
- [ ] æ•…éšœæ’é™¤æŒ‡å—æ¶µè“‹æ‰€æœ‰å¸¸è¦‹å•é¡Œ
- [ ] å°ˆæ¡ˆ README å°ˆæ¥­å®Œæ•´
- [ ] æ‰€æœ‰ç¨‹å¼ç¢¼ç¯„ä¾‹ç¶“éæ¸¬è©¦å¯åŸ·è¡Œ
- [ ] æ‰€æœ‰é€£çµæœ‰æ•ˆç„¡æ­»é€£çµ
- [ ] æˆªåœ–æ¸…æ™°æ¨™è¨»å®Œæ•´ï¼ˆéœ€å¾ŒçºŒè£œå……ï¼‰
- [ ] æ–‡ä»¶ peer review é€šé
- [ ] éæŠ€è¡“äººå“¡å¯ç†è§£ä½¿ç”¨è€…æ–‡ä»¶
- [ ] é–‹ç™¼è€…å¯ä¾æ–‡ä»¶ç¨ç«‹éƒ¨ç½²
- [ ] PO review é€šé

---

## ğŸ“š References

- [Write the Docs](https://www.writethedocs.org/)
- [Google Developer Documentation Style Guide](https://developers.google.com/style)
- [Microsoft Writing Style Guide](https://learn.microsoft.com/style-guide/)
- [README Best Practices](https://github.com/jehna/readme-best-practices)

---

**Story å»ºç«‹æ—¥æœŸ**: 2025-10-14
**æœ€å¾Œæ›´æ–°**: 2025-10-14
**INVEST Score**: â­â­â­â­â­â­ (6/6)
- âœ… Independent: å¯ç¨ç«‹æ’°å¯«ï¼ˆåŸºæ–¼å®Œæˆçš„åŠŸèƒ½ï¼‰
- âœ… Negotiable: æ–‡ä»¶è©³ç´°ç¨‹åº¦èˆ‡æ ¼å¼å¯èª¿æ•´
- âœ… Valuable: æ”¯æ´ä½¿ç”¨è€…ä¸Šæ‰‹ã€é–‹ç™¼è€…ç¶­è­·ã€åœ˜éšŠå”ä½œ
- âœ… Estimable: 6 å°æ™‚é ä¼°æ™‚é–“åˆç†
- âœ… Small: ç¯„åœæ˜ç¢ºï¼Œå¯åœ¨ä¸€å¤©å…§å®Œæˆ
- âœ… Testable: å¯é€é user testing èˆ‡ peer review é©—è­‰
